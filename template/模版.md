你是一名 AI 研究助理与代码助理。
你的任务是：

**根据我提供的实验结果（notes / logs / .pkl / .csv / 表格）自动填写下面的"通用实验报告模板（Markdown）"。**

---

## 输出要求

### 基本格式
- 输出为 **一个 Markdown 文件**
- 保留所有结构标题，内容根据输入自动填写
- 使用清晰简洁、专业的学术写作风格
- 不得编造数字，所有数据必须来自提供的输入
- 若输入缺失信息，使用 `TODO` 标注

### 数学公式（LaTeX）
**必须使用正确的 LaTeX 语法，确保公式能正常渲染：**

1. **行内公式**：使用单个 `$` 包裹
   - ✅ 正确：`$R^2 = 0.99$`、`$\alpha = 0.01$`
   - ❌ 错误：`R² = 0.99`（直接使用上标字符）

2. **独立公式块**：使用 `$$...$$` 或 `\[...\]`
   ```
   $$
   \hat{y} = X w + b
   $$
   ```

3. **常用符号规范**：
   | 符号 | LaTeX 写法 | 渲染效果 |
   |------|-----------|---------|
   | R² | `$R^2$` | $R^2$ |
   | α | `$\alpha$` | $\alpha$ |
   | σ | `$\sigma$` | $\sigma$ |
   | ≥ | `$\geq$` | $\geq$ |
   | ≈ | `$\approx$` | $\approx$ |
   | 下标 | `$x_i$` | $x_i$ |
   | 分数 | `$\frac{a}{b}$` | $\frac{a}{b}$ |
   | 求和 | `$\sum_{i=1}^n$` | $\sum_{i=1}^n$ |
   | 矩阵转置 | `$X^\top$` | $X^\top$ |

4. **特殊注意**：
   - 下划线在公式外会被识别为斜体，变量名如 `log_g` 应写成 `$\log g$` 或 `log\_g`
   - 公式块前后需要空行以确保正确渲染

### 表格（Markdown）
使用标准 Markdown 表格语法：
```markdown
| 配置 | R² | MAE | RMSE | 备注 |
|------|-----|------|-------|------|
| PCA=5 | 0.95 | 0.05 | 0.07 | baseline |
```

### 内容要求
- **关键洞见（Insights）**：分层次总结（宏观 → 模型 → 实验细节）
- **绘图建议**：只描述图的内容和目的，不写代码
- **结论**：遵循以下结构化原则

### 结论写作原则

**逻辑流**：核心发现 → 关键结论 → 设计启示 → 物理解释 → 数字速查 → 下一步

**格式规范**：
| 元素 | 格式 | 示例 |
|------|------|------|
| 核心发现 | `> **一句话总结**` | > **log g 信息分布在低方差 PC 中** |
| 假设验证 | `❌ 原假设 / ✅ 实验结果` | ❌ 需要 5-10 PC → ✅ 需要 100+ PC |
| 关键结论 | 编号表格（2-4 条） | `| # | 结论 | 证据 |` |
| 设计启示 | 分类表格 | 架构原则、正则化策略、常见陷阱 |
| 数字速查 | 简洁表格（3-5 项） | `| 指标 | 值 |` |

**避免**：
- ❌ 无结构的长段落
- ❌ 重复前文已有的详细分析
- ❌ 超过 4 条的"关键结论"（不关键了）
- ❌ 没有证据支撑的结论

---

请根据输入内容填写下面模板：

---------------------------------------------
# 📘 通用实验报告模板（Markdown）
---------------------------------------------

---
> **实验名称：** TODO  
> **作者：** Viska Wei  
> **日期：** TODO  
> **数据版本：** TODO  
> **模型版本：** TODO

---

# 📑 目录

- [1. 🎯 目标](#1--目标)
- [2. 🧪 实验设计](#2--实验设计experiment-design)
- [3. 📊 实验图表](#3--实验图表)
- [4. 💡 关键洞见](#4--关键洞见key-insights)
- [5. 📝 结论](#5--结论conclusion)
- [6. 📎 附录](#6--附录)

---

# 1. 🎯 目标

## 1.1 背景与动机
> 描述本研究最顶层的科学目标或工程目标，例如：
- 指导神经网络架构设计  
- 理解光谱中 log g / Teff / [M/H] 的信息结构  
- 分离线性 / 非线性成分  
- 评估噪声、特征选择对天文参数估计的影响  

示例：
- 通过物理 + 统计分析，为 log g 的神经网络设计提供理论依据（信息维度、噪声敏感性、特征重要性）。

## 1.2 核心假设

> 用引用格式写出一个可证伪的假设，然后列出"如果成立"和"如果不成立"的含义。

**格式**：
```
> **[核心假设的一句话陈述]**

如果假设成立，意味着：
- [含义 1]
- [含义 2]

如果假设不成立，则需要：
- [替代理解/方向]
```

**示例**：
> **log g 由 flux 空间中的少数低维线性方向控制，用 $k \approx 5\text{-}10$ 个 PCA 分量即可达到 $R^2 \geq 0.98$。**

如果假设成立，意味着：
- log g 信息高度集中在前几个最大方差方向
- 神经网络只需学习一个低维线性映射

如果假设不成立，则需要重新理解 log g 在光谱空间中的几何分布。

## 1.3 验证问题

> 用**表格**列出 3-5 个具体问题，每个问题对应一个验证目标，实验后填入结果。

| # | 问题 | 验证目标 | 结果 |
|---|------|---------|------|
| Q1 | [具体、可量化的问题？] | [这个问题验证假设的哪个方面] | [❌/✅ + 数值] |
| Q2 | ... | ... | ... |
| Q3 | ... | ... | ... |

**写作要点**：
- 问题必须**具体可量化**（如"能否达到 $R^2 \geq 0.98$"而非"效果好不好"）
- 验证目标说明该问题**链接到哪个假设/设计决策**
- 结果用 ❌/✅ 开头，附上关键数值

**示例**：
| # | 问题 | 验证目标 | 结果 |
|---|------|---------|------|
| Q1 | PCA(10) 能否达到 $R^2 \geq 0.98$？ | 验证"低维假设"是否成立 | ❌ 否，$R^2 = 0.67$ |
| Q2 | 达到 $R^2 \geq 0.99$ 需要多少个 PCA 分量？ | 量化有效信息维度 | $k \geq 100$ |
| Q3 | 正则化强度如何影响不同 $k$ 下的性能？ | 理解 bias-variance tradeoff | $k > 50$ 时小 $\alpha$ 显著优于大 $\alpha$ |

## 1.4 结论摘要（实验后填写）

> 实验完成后，在目标章节直接给出结论预览，方便读者快速了解结果。

### 1.4.1 实验结论

| 结论 | 说明 |
|------|------|
| **[结论关键词]** | [一句话解释] |
| **[结论关键词]** | [一句话解释] |

### 1.4.2 设计启示

| 设计原则 | 具体建议 |
|---------|---------|
| **[原则名]** | [具体做法] |
| **[原则名]** | [具体做法] |

> **一句话总结**：[用一句话概括整个实验的核心发现和启示]

---

# 2. 🧪 实验设计（Experiment Design）

## 2.1 数据（Data）
- 训练样本数：  
- 测试样本数：  
- 特征维度：  
- 标签参数：  
- 噪声模型：  
\[
\text{noisy\_flux} = \text{flux} + \mathcal{N}(0, \sigma^2)
\]

## 2.2 使用的特征类型
- flux / error / flux+error  
- PCA 分解（例如 4096 → 10）  
- Top-K wavelength  
- Patch-based 特征  
- 其他：  

## 2.3 模型与算法（Model & Algorithm）

### 线性回归 / 岭回归
\[
\hat{y} = X w + b
\]
\[
w = (X^\top X + \alpha I)^{-1} X^\top y
\]

### LightGBM
- num\_leaves, max\_depth, feature\_fraction …  

### PCA
解释率曲线：  
\[
\lambda_i / \sum_j \lambda_j
\]

## 2.4 超参数（Hyperparameters）
- alpha：  
- PCA 维度：  
- noise levels：  
- LightGBM 参数：  
- 等等  

---

# 3. 📊 实验图表

> 展示已有的实验图表，每张图配有标题、描述和关键观察。

### 图 1：[图表标题]
![图片](path/to/image.png)

**Figure 1. [图表描述]**

**关键观察**：
- 观察点 1
- 观察点 2

---

# 4. 💡 关键洞见（Key Insights）

### 4.1 宏观层洞见（用于指导 Neural Network 架构设计）
例如：
- log g 主要存在于一个低维线性子空间（1–10 维）  
- log g 信息主要来自 Balmer wings / CaT / continuum slope  
- PCA>5 即可恢复 >98% R² → NN 不需要高维输入  
- 异方差 error σ 提供额外的判别力  

### 4.2 模型层洞见（用于优化模型）
例如：
- Ridge α 太大导致谱线过度平滑  
- Top-K 单点方法不稳定 → 需要局部窗口结构  
- Noise=1.0 时，PCA 仍保持高 R² → 数据内在维度很低  

### 4.3 实验层细节洞见
例如：
- Top 50 个点在低噪声有效，在高噪声完全崩溃  
- error σ 改变模型在高噪声时的决策方式  
- PCA 第 1 主成分对应等效宽度变化，与 log g 强相关  

---

# 5. 📝 结论（Conclusion）

> **写作原则**：结论应遵循 **"核心发现 → 关键结论 → 设计启示 → 物理解释 → 数字速查 → 下一步"** 的逻辑流。

## 5.1 核心发现

> 用一句话总结本实验最重要的发现（punch line），使用引用格式突出显示。

然后用 ❌/✅ 对比格式展示假设验证结果：
- ❌ 原假设：[原来以为是什么]
- ✅ 实验结果：[实际发现是什么]

## 5.2 关键结论（2-4 条）

> 使用编号表格，每条结论配证据，控制在 2-4 条。

| # | 结论 | 证据 |
|---|------|------|
| 1 | **[结论关键词]** | [支撑数据/观察] |
| 2 | **[结论关键词]** | [支撑数据/观察] |
| 3 | **[结论关键词]** | [支撑数据/观察] |

## 5.3 设计启示

> 分类组织：架构原则、正则化策略、常见陷阱。

### 架构原则

| 原则 | 建议 | 原因 |
|------|------|------|
| [原则名] | [具体做法] | [为什么] |

### ⚠️ 常见陷阱

| 常见做法 | 实验证据 |
|----------|----------|
| "[错误做法]" | [为什么是错的] |

## 5.4 物理解释（可选）

> 用 1-3 个要点解释**为什么**会有这样的结果，链接到领域知识。

## 5.5 关键数字速查

> 提取 3-5 个最重要的数字，便于快速回顾。

| 指标 | 值 |
|------|-----|
| 最佳性能 | [数值 + 配置] |
| 达到目标的最小条件 | [数值] |
| 性能天花板 | [数值] |

## 5.6 下一步工作

> 用表格列出 2-3 个具体方向。

| 方向 | 具体任务 |
|------|----------|
| [方向名] | [具体做什么] |

---

# 6. 📎 附录

## 6.1 数值结果表（Results）

> 请自动将我输入的结果整理成下表格式。

示例格式：

| 配置 | R² | MAE | RMSE | 备注 |
|------|-----|------|-------|------|
| PCA=5 |     |      |       |      |
| PCA=10 |    |      |       |      |
| Full |     |      |       |      |

如果有 Top-K / Patch / Noise Sweep，也整理成类似表格。

## 6.2 建议绘图（Plot Suggestions）

> 不写代码，只描述清晰的图像内容。

### 6.2.1 [图表标题]
- **目的**：展示什么
- **X 轴**：
- **Y 轴**：
- **图上标注**：

## 6.3 相关文件

| 类型 | 路径 |
|------|------|
| 图表 | `路径` |
| 结果 | `路径` |  

---------------------------------------------
（模板结束）
---------------------------------------------

请根据我输入的资料完整填写以上模板。
