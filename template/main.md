# 📘 主实验框架模板（Main Experiment Framework）

---
> **主题名称：** TODO  
> **作者：** Viska Wei  
> **创建日期：** TODO  
> **最后更新：** TODO  
> **状态：** 🔄 进行中 / ✅ 已完成 / ⏸️ 暂停

---

# 📑 目录

- [0. 📋 问题重述与意义澄清](#0--问题重述与意义澄清)
  - [0.1 核心研究问题](#01-核心研究问题)
  - [0.2 多维度分析](#02-多维度分析)
  - [0.3 实验定位](#03-实验定位)
- [1. 🎯 目标](#1--目标)
  - [1.1 背景与动机](#11-背景与动机)
  - [1.2 核心假设](#12-核心假设)
  - [1.3 验证问题](#13-验证问题)
  - [1.4 结论摘要](#14-结论摘要实验后填写)
- [2. 🗺️ MVP 实验路线图](#2-️-mvp-实验路线图)
- [3. 📋 子实验追踪](#3--子实验追踪)
- [4. 🔗 跨实验分析](#4--跨实验分析)
- [5. 📝 总结与展望](#5--总结与展望)
- [6. 📎 附录](#6--附录)

---

# 0. 📋 问题重述与意义澄清

> **本章是整个实验系列的"灵魂"**：在动手做任何实验之前，先厘清核心问题、分析其多维度意义、明确实验的价值与局限。

## 0.1 核心研究问题

> **[用一句话提出核心研究问题，使用引用格式]**

据此推断：

> **[从核心问题衍生出的设计/应用相关问题]**

### 0.1.1 统计学层面

> 用统计学语言重新表述问题，明确要度量的量。

[描述统计模型、目标函数、评价指标的统计学意义]

**示例**：
```
把 $\log g$ 看成随机变量 $Y$，把各种"全局 / meta / PCA"特征看成 $F$。
用某个模型拟合 $Y \approx f(F)$，得到 test $R^2$：

$$
R^2 \approx 1 - \frac{\mathbb{E}[(Y - \mathbb{E}[Y|F])^2]}{\operatorname{Var}(Y)}
$$

**$R^2$ 越高，说明「只看 $F$，就能消掉多少 $\log g$ 的不确定性」。**
```

### 0.1.2 物理/领域层面

> 从领域知识角度解释问题的物理/科学意义。

- [物理机制 1]
- [物理机制 2]

**可能的解释**：
- **(a)** [解释 A]
- **(b)** [解释 B]

### 0.1.3 意义与启示

> 用表格展示不同实验结果对设计/理解的启示。

| 结果情况 | 含义 | 对设计的启示 |
|---------|------|-------------|
| [情况 A：如 $R^2 > 0.9$] | [这意味着什么] | [应该怎么设计] |
| [情况 B：如 $R^2 < 0.7$] | [这意味着什么] | [应该怎么设计] |

---

## 0.2 多维度分析

> 从多个角度论证研究问题的价值，帮助读者（和未来的自己）理解"为什么要做这个实验"。

### 0.2.1 信息论角度

- [从信息论视角分析问题]
- [如何量化信息量/不确定性]

### 0.2.2 物理/领域知识角度

- [领域专家如何理解这个问题]
- [已有哪些先验知识]

### 0.2.3 模型设计角度

> 用表格展示不同场景下的设计策略。

| 场景 | 设计策略 A | 设计策略 B |
|------|-----------|-----------|
| [场景 1] | [策略] | [策略] |
| [场景 2] | [策略] | [策略] |

---

## 0.3 实验定位

> **明确说明本实验系列的价值与局限，管理预期。**

### 价值

- [价值 1：本实验能回答什么问题]
- [价值 2：对设计/理解的指导意义]
- [价值 3：为后续工作提供什么基础]

### 局限

- [局限 1：实验设定与真实场景的差距]
- [局限 2：结论的适用范围]
- [局限 3：需要注意的前提假设]

**定位声明**：
> **本实验系列是 [分析类型]，目的是 [具体目的]，而非 [不是什么]。结论应理解为 [如何理解结论]。**

---

# 1. 🎯 目标

## 1.1 背景与动机

**研究背景**：
- [领域现状/问题描述]
- [为什么这个问题重要]

**核心目标**（勾选适用项）：
- [ ] 指导神经网络架构设计
- [ ] 理解光谱中 $\log g$ / $T_{\text{eff}}$ / $[\text{M/H}]$ 的信息结构
- [ ] 分离线性 / 非线性成分
- [ ] 评估噪声、特征选择对天文参数估计的影响
- [ ] 量化某种特征/方法的信息上界
- [ ] 其他：TODO

**一句话概括**：
> 通过 [方法]，为 [目标参数] 的 [应用场景] 提供 [具体价值]。

---

## 1.2 核心假设

### 主假设

> **[核心假设的一句话陈述]**

**如果假设成立，意味着**：
- [含义 1：对理解的影响]
- [含义 2：对设计的影响]
- [含义 3：对后续研究的影响]

**如果假设不成立，则需要**：
- [替代理解 1]
- [替代方向 2]

### 子假设（可选）

| 编号 | 子假设 | 对应 MVP | 状态 |
|------|--------|---------|------|
| H1.1 | [子假设 1] | MVP-X | ⏳ 待验证 |
| H1.2 | [子假设 2] | MVP-X | ⏳ 待验证 |
| H1.3 | [子假设 3] | MVP-X | ⏳ 待验证 |

---

## 1.3 验证问题

> 用表格列出 3-7 个具体问题，每个问题对应一个验证目标，实验后填入结果。

| # | 问题 | 验证目标 | 预期结果 | 实际结果 |
|---|------|---------|---------|---------|
| Q1 | [具体、可量化的问题？] | [验证假设的哪个方面] | [预期数值范围] | ⏳ 待填写 |
| Q2 | [具体、可量化的问题？] | [验证假设的哪个方面] | [预期数值范围] | ⏳ 待填写 |
| Q3 | [具体、可量化的问题？] | [验证假设的哪个方面] | [预期数值范围] | ⏳ 待填写 |
| Q4 | [具体、可量化的问题？] | [验证假设的哪个方面] | [预期数值范围] | ⏳ 待填写 |
| Q5 | [具体、可量化的问题？] | [验证假设的哪个方面] | [预期数值范围] | ⏳ 待填写 |

**写作要点**：
- 问题必须**具体可量化**（如"能否达到 $R^2 \geq 0.98$"而非"效果好不好"）
- 验证目标说明该问题**链接到哪个假设/设计决策**
- **预期结果**：写出基于先验知识的预期范围，用于对照
- **实际结果**：用 ❌/✅ 开头，附上关键数值

---

## 1.4 结论摘要（实验后填写）

> 实验完成后在此给出结论预览，方便读者快速了解结果。随着 MVP 实验推进持续更新。

### 1.4.1 已验证结论

| 结论 | 说明 | 来源 |
|------|------|------|
| **[结论关键词 1]** | [一句话解释] | [MVP-X / exp_xxx.md](./exp_xxx.md) |
| **[结论关键词 2]** | [一句话解释] | [MVP-X / exp_xxx.md](./exp_xxx.md) |

### 1.4.2 设计启示（已确认）

| 设计原则 | 具体建议 | 证据来源 |
|---------|---------|----------|
| **[原则名 1]** | [具体做法] | MVP-X |
| **[原则名 2]** | [具体做法] | MVP-X |

### 1.4.3 关键数字速查

| 指标 | 值 | 备注 |
|------|-----|------|
| [指标 1] | [数值] | [配置/条件] |
| [指标 2] | [数值] | [配置/条件] |

> **一句话总结**：[用一句话概括当前已有的核心发现和启示]

---

# 2. 🗺️ MVP 实验路线图

> MVP（Minimum Viable Product）实验：最小可验证实验，快速验证假设的核心要素。

## 2.1 整体规划

### 实验分组

| Phase | 目的 | 包含 MVP | 状态 |
|-------|------|---------|------|
| **Phase 0: Sanity Check** | 确认基线正常 | MVP-0.x | ⏳ |
| **Phase 1: [主题]** | [目的描述] | MVP-1.x | ⏳ |
| **Phase 2: [主题]** | [目的描述] | MVP-2.x | ⏳ |
| **Phase 3: [主题]** | [目的描述] | MVP-3.x | ⏳ |

### 依赖关系图

```
┌─────────────────────────────────────────────────────────────┐
│                      MVP 实验依赖图                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   [MVP-0: Baseline]                                         │
│         │                                                   │
│         ├──────────────┬──────────────┐                     │
│         ▼              ▼              ▼                     │
│   [MVP-1.0]      [MVP-2.0]      [MVP-3.0]                   │
│         │              │              │                     │
│         ▼              ▼              ▼                     │
│   [MVP-1.1]      [MVP-2.1]      [MVP-3.1]                   │
│         │              │              │                     │
│         └──────────────┼──────────────┘                     │
│                        ▼                                    │
│              [MVP-Final: 综合验证]                           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 2.2 MVP 详细设计

> 每个 MVP 用标准化的表格描述，便于快速执行和追踪。

### Phase 0: Sanity Check

#### MVP-0.0: [Baseline 名称]

| 项目 | 配置 |
|------|------|
| **目标** | [一句话目标] |
| **数据** | [数据配置] |
| **模型** | [模型配置] |
| **验收标准** | [预期结果范围] |
| **早停条件** | [什么情况下停止并排查] |

**排查清单**（若未达验收标准）：
- [ ] [检查项 1]
- [ ] [检查项 2]
- [ ] [检查项 3]

---

### Phase 1: [Phase 名称]

#### MVP-1.0: [实验名称]

| 项目 | 配置 |
|------|------|
| **目标** | [回答什么问题？] |
| **数据** | [数据配置] |
| **模型** | [模型配置] |
| **特征** | [特征配置] |
| **验收标准** | [预期结果范围] |
| **异常处理** | [异常结果如何解读/处理] |

**→ 对假设的影响**：若结果为 [X]，则 [对假设/设计的启示]

---

#### MVP-1.1: [实验名称]

| 项目 | 配置 |
|------|------|
| **目标** | [一句话目标] |
| **依赖** | MVP-1.0 |
| **数据** | [数据配置] |
| **模型** | [模型配置] |
| **验收标准** | [预期结果范围] |

---

### Phase 2: [Phase 名称]

#### MVP-2.0: [实验名称]

（按照上述格式继续添加...）

---

## 2.3 实验配置总览

> 汇总所有 MVP 实验的关键配置，便于一览和对比。

| MVP | 数据规模 | 特征维度 | 模型 | 关键变量 | 验收标准 |
|-----|---------|---------|------|---------|---------|
| MVP-0.0 | [train/test] | [维度] | [模型] | [变量] | [标准] |
| MVP-1.0 | [train/test] | [维度] | [模型] | [变量] | [标准] |
| MVP-1.1 | [train/test] | [维度] | [模型] | [变量] | [标准] |
| MVP-2.0 | [train/test] | [维度] | [模型] | [变量] | [标准] |

---

# 3. 📋 子实验追踪

> 追踪每个子实验（exp.md）的进度、结果和关键发现。

## 3.1 实验总览

| MVP | 实验名称 | 状态 | 报告链接 | 核心结论（一句话） |
|-----|---------|------|---------|------------------|
| MVP-0.0 | [实验名称] | ⏳ 计划中 | - | - |
| MVP-1.0 | [实验名称] | 🔄 进行中 | [链接](./exp_xxx_YYYYMMDD.md) | - |
| MVP-1.1 | [实验名称] | ✅ 已完成 | [链接](./exp_xxx_YYYYMMDD.md) | [一句话结论] |
| MVP-2.0 | [实验名称] | ⏳ 计划中 | - | - |

**状态图例**：
- ⏳ 计划中（Planned）
- 🔄 进行中（In Progress）
- ✅ 已完成（Completed）
- ❌ 已取消（Cancelled）
- ⏸️ 暂停（Paused）

---

## 3.2 进度看板

```
┌──────────────┬──────────────┬──────────────┬──────────────┐
│   ⏳ 计划中   │   🔄 进行中   │   ✅ 已完成   │   ❌ 已取消   │
├──────────────┼──────────────┼──────────────┼──────────────┤
│ MVP-2.0      │ MVP-1.0      │ MVP-0.0      │              │
│ MVP-2.1      │              │ MVP-1.1      │              │
│ MVP-3.0      │              │              │              │
└──────────────┴──────────────┴──────────────┴──────────────┘
```

---

## 3.3 结论提取记录

> 从每个完成的 exp.md 提取核心结论到 main。

| 日期 | 来源实验 | 提取的核心结论 | 更新到 main 的位置 |
|------|---------|---------------|-------------------|
| YYYY-MM-DD | exp_xxx.md | [结论摘要] | §1.4.1, §4.1 |
| YYYY-MM-DD | exp_yyy.md | [结论摘要] | §1.4.2, §4.2 |

---

# 4. 🔗 跨实验分析

> 综合多个子实验的结果，进行跨实验对比和分析。

## 4.1 结果对比矩阵

| MVP | 最佳 $R^2$ | 最佳配置 | vs Baseline | 关键发现 |
|-----|-----------|---------|-------------|---------|
| MVP-1.0 | - | - | - | - |
| MVP-1.1 | - | - | - | - |
| MVP-2.0 | - | - | - | - |

## 4.2 假设验证进度

| 子假设 | 验证 MVP | 结果 | 结论 |
|--------|---------|------|------|
| H1.1 | MVP-1.0 | ❌ 否定 | [简要说明] |
| H1.2 | MVP-1.1 | ✅ 支持 | [简要说明] |
| H1.3 | MVP-2.0 | ⏳ 待验证 | - |

## 4.3 发现汇总

### 一致性发现（多个实验支持）

| 发现 | 支持实验 | 置信度 |
|------|---------|--------|
| [发现 1] | MVP-1.0, MVP-1.1 | ⭐⭐⭐ 高 |
| [发现 2] | MVP-1.0, MVP-2.0 | ⭐⭐ 中 |

### 冲突性发现（需要进一步验证）

| 发现 | 实验 A 结论 | 实验 B 结论 | 可能原因 |
|------|-----------|-----------|---------|
| [主题] | [结论 A] | [结论 B] | [差异原因分析] |

---

# 5. 📝 总结与展望

## 5.1 核心结论

> 用 3-5 点总结整个实验系列的核心发现。

1. **[结论 1 标题]**：[详细说明]
2. **[结论 2 标题]**：[详细说明]
3. **[结论 3 标题]**：[详细说明]

## 5.2 设计原则提炼

> 将实验发现转化为可操作的设计原则。

| 原则 | 建议 | 依据 |
|------|------|------|
| **[原则 1]** | [具体做法] | MVP-X 发现 [具体发现] |
| **[原则 2]** | [具体做法] | MVP-X 发现 [具体发现] |

## 5.3 遗留问题

| 问题 | 优先级 | 建议后续实验 |
|------|--------|-------------|
| [问题 1] | 🔴 高 | [实验设计思路] |
| [问题 2] | 🟡 中 | [实验设计思路] |
| [问题 3] | 🟢 低 | [实验设计思路] |

## 5.4 下一步计划

| 方向 | 具体任务 | 预计时间 | 优先级 |
|------|----------|---------|--------|
| [方向 1] | [任务描述] | [时间估计] | 🔴 高 |
| [方向 2] | [任务描述] | [时间估计] | 🟡 中 |

---

# 6. 📎 附录

## 6.1 决策树：不同实验结果的解读与应对

> 预先设计不同结果情况下的解读逻辑和应对策略。

### 情形 A: [结果描述]

**诊断**：[这个结果意味着什么]

**物理/领域含义**：
- [解释 1]
- [解释 2]

**设计启示**：
- [建议 1]
- [建议 2]

---

### 情形 B: [结果描述]

**诊断**：[这个结果意味着什么]

**应对策略**：
- [策略 1]
- [策略 2]

---

## 6.2 数值结果汇总表

> 汇总所有 MVP 实验的核心数值结果。

### 主要指标对比

| MVP | 配置 | $R^2$ | MAE | RMSE | 备注 |
|-----|------|-------|-----|------|------|
| MVP-0.0 | [配置] | - | - | - | baseline |
| MVP-1.0 | [配置] | - | - | - | |
| MVP-1.1 | [配置] | - | - | - | |

### [特定维度]扫描结果

| [维度] | $R^2$ | MAE | 备注 |
|--------|-------|-----|------|
| [值 1] | - | - | |
| [值 2] | - | - | |
| [值 3] | - | - | |

---

## 6.3 相关文件索引

| 类型 | 文件路径 | 说明 |
|------|---------|------|
| 主框架 | `logg/[topic]/exp_[topic]_main_YYYYMMDD.md` | 当前文件 |
| MVP-1.0 报告 | `logg/[topic]/exp_xxx_YYYYMMDD.md` | [实验名称] |
| MVP-1.1 报告 | `logg/[topic]/exp_yyy_YYYYMMDD.md` | [实验名称] |
| 图表目录 | `logg/[topic]/img/` | 实验图表 |
| 实验代码 | `scripts/[topic]/` | 实验脚本 |

---

## 6.4 变更日志

| 日期 | 变更内容 | 影响 |
|------|---------|------|
| YYYY-MM-DD | 创建主实验框架 | - |
| YYYY-MM-DD | 完成 MVP-1.0，更新结论 | §1.4, §4 |
| YYYY-MM-DD | 完成 MVP-1.1，修订假设 | §1.2, §4.2 |

---

> **模板使用说明**：
> 
> **工作流程**：
> 1. **有想法时**：先填写 main.md 的 §0（问题重述）、§1（目标）、§2（MVP路线图）
> 2. **执行 MVP**：按 §2 的设计执行实验
> 3. **记录结果**：在同一目录下创建 exp_xxx_YYYYMMDD.md（使用 exp.md 模板）
> 4. **提取结论**：将 exp.md 的核心结论同步到 main.md 的 §1.4、§3、§4
> 5. **推进下一个 MVP**：更新 §3 进度，开始下一个实验
> 
> **更新频率**：
> - §0, §1, §2：项目启动时填写，较少更新
> - §1.4, §3, §4：每完成一个 MVP 后更新
> - §5, §6：项目中后期持续完善

