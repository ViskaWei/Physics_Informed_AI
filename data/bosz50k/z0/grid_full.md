# BOSZ 规则网格数据集生成报告 (Fisher/CRLB 计算用)

## 概述

本数据集用于计算 Fisher 信息矩阵和 CRLB (Cramér-Rao Lower Bound)。与训练数据不同，此数据集在 **规则网格点** 上生成，不做插值，以便使用差分法精确计算偏导数 ∂μ/∂θ。

| 项目 | 值 |
|------|-----|
| **数据集名称** | grid_full |
| **生成日期** | 2025-12-24 |
| **总样本数** | 30,182 |
| **数据大小** | 2.8 GB |
| **唯一网格点** | 30,182 (0% 重复) |

---

## 1. 数据集结构



---

## 2. 物理参数 (规则网格)

### 2.1 网格结构

| 参数 | 符号 | 最小值 | 最大值 | 步长 | 网格点数 |
|------|------|--------|--------|------|----------|
| **有效温度** | T_eff | 3750 | 6000 | 250 | 10 |
| **表面重力** | log_g | 1.0 | 5.0 | 0.5 | 9 |
| **金属丰度** | [M/H] | -2.50 | 0.75 | 0.25 | 14 |
| **碳丰度** | [C/M] | -0.75 | 0.50 | 0.25 | 6 |
| **α元素丰度** | [α/M] | -0.25 | 0.50 | 0.25 | 4 |

### 2.2 网格点详情

**T_eff (K):** 

**log_g (dex):** 

**[M/H] (dex):** 

**[C/M] (dex):** 

**[α/M] (dex):** 

---

## 3. 观测参数 (固定值)

与训练数据不同，所有观测参数均固定为中间值，确保 error 仅取决于物理参数。

| 参数 | 值 | 说明 |
|------|-----|------|
| **星等** | 21.5 mag | 训练范围中值 (20.5-22.5) |
| **视宁度** | 1.0 arcsec | 训练范围中值 (0.5-1.5) |
| **目标天顶角** | 22.5° | 训练范围中值 (0-45) |
| **目标场角** | 0.325° | 训练范围中值 (0-0.65) |
| **月相** | 0.0 | 新月 |
| **曝光次数** | 12 | |
| **单次曝光时间** | 900 s | |

---

## 4. 数据统计

| 指标 | 值 | 说明 |
|------|-----|------|
| **波长范围** | 7100.2 - 8849.8 Å | MR 臂 |
| **波长点数** | 4096 | |
| **flux 中位数** | 0.5000 | median normalized |
| **error 中位数** | 0.0689 | |
| **SNR 中位数** | 7.30 | |
| **error/flux 中位数** | 0.1370 | |

---

## 5. 生成命令

INFO:pfsspec:2025-12-24 12:58:32,980:Running script on volta04.idies.jhu.edu
WARNING:root:2025-12-24 12:58:37,562:Incompatible Pytorch version found.
INFO:pfsspec:2025-12-24 12:58:38,349:Output directory is /datascope/subaru/user/swei20/data/bosz50000/grid/full

**关键参数:**
- : 系统遍历所有网格点 (非随机采样)
- : 使用精确网格点 (非插值)

---

## 6. 代码修改

为支持 ，修复了两处代码 bug:

### 6.1 modelgrid.py (第1030行)



### 6.2 modelgridsampler.py (第157行)



---

## 7. 用途

### Fisher 信息矩阵计算

规则网格允许使用差分法计算偏导数:

1632355
rac{\partial \mu}{\partial 	heta} pprox rac{\mu(	heta + \Delta	heta) - \mu(	heta - \Delta	heta)}{2\Delta	heta}
1632355

Fisher 信息矩阵:

1632355
I(	heta) = \left(rac{\partial \mu}{\partial 	heta}ight)^T \Sigma^{-1} \left(rac{\partial \mu}{\partial 	heta}ight)
1632355

其中 $\Sigma = 	ext{diag}(	ext{error}^2)$。

### CRLB 计算

Cramér-Rao Lower Bound 给出参数估计的理论下限:

1632355
	ext{Var}(\hat{	heta}) \geq I(	heta)^{-1}
1632355

---

## 8. 数据加载示例



---

## 9. 相关文件

| 文件 | 路径 |
|------|------|
| 数据文件 |  |
| 训练配置 |  |
| 仪器配置 |  |
| 代码仓库 |  |

---

*报告生成时间: 2025-12-24*
*生成工具: pfsspec simulation pipeline*
