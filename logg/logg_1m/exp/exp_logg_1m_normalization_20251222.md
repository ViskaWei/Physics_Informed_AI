# ğŸ“˜ Experiment Report: Normalization Comparison
> **Name:** TODO | **ID:** `VIT-20251222-logg_1m-normalization`  
> **Topic:** `VIT` | **MVP:** MVP-1.3 | **Project:** `VIT`  
> **Author:** Viska Wei | **Date:** 2025-12-22 | **Status:** ğŸ”„ In Progress
```
ğŸ’¡ å®éªŒç›®çš„  
å†³å®šï¼šå½±å“çš„å†³ç­–
```

---

---

## ğŸ”— Upstream Links

| Type | Link | Description |
|------|------|-------------|
| ğŸ§  Hub | [`logg_1m_hub_20251222.md`](../logg_1m_hub_20251222.md) | Hypothesis H1.3 |
| ğŸ—ºï¸ Roadmap | [`logg_1m_roadmap_20251222.md`](../logg_1m_roadmap_20251222.md) | MVP-1.3 |
| ğŸ“‹ Kanban | [`status/kanban.md`](../../../status/kanban.md) | Experiment queue |
| ğŸ“š Prerequisite | [`exp_logg_1m_foundation_protocol_20251222.md`](./exp_logg_1m_foundation_protocol_20251222.md) | MVP-0.A, 0.B |

---

# ğŸ“‘ Table of Contents

- [âš¡ Key Findings](#-key-findings-for-hub-extraction)
- [1. ğŸ¯ Objective](#1--objective)
- [2. ğŸ§ª Experiment Design](#2--experiment-design)
- [3. ğŸ“Š Figures & Results](#3--figures--results)
- [4. ğŸ’¡ Insights](#4--insights)
- [5. ğŸ“ Conclusions](#5--conclusions)
- [6. ğŸ“ Appendix](#6--appendix)

---

## âš¡ æ ¸å¿ƒç»“è®ºé€Ÿè§ˆï¼ˆä¾› hub æå–ï¼‰

> **æœ¬èŠ‚åœ¨å®éªŒå®Œæˆåç¬¬ä¸€æ—¶é—´å¡«å†™ã€‚**

### ä¸€å¥è¯æ€»ç»“

> **[å¾…å®éªŒå®Œæˆåå¡«å†™ï¼šå“ªç§å½’ä¸€åŒ–æ–¹å¼å¯¹ logg æœ€æœ‰æ•ˆï¼Ÿ]**

### å¯¹å‡è®¾çš„éªŒè¯

| éªŒè¯é—®é¢˜ | ç»“æœ | ç»“è®º |
|---------|------|------|
| H1.3.1: chunk z-score ä¼˜äº median normï¼Ÿ | â³ | - |
| H1.3.2: continuum-normalized ä¼˜äº median normï¼Ÿ | â³ | - |

### è®¾è®¡å¯ç¤ºï¼ˆ1-2 æ¡ï¼‰

| å¯ç¤º | å…·ä½“å»ºè®® |
|------|---------|
| [å¾…å¡«å†™] | [å¾…å¡«å†™] |

### å…³é”®æ•°å­—

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| Method A (median norm) logg RÂ² | [baseline] |
| Method B (chunk z-score) logg RÂ² | [å¾…å®éªŒ] |
| Method C (continuum-norm) logg RÂ² | [å¾…å®éªŒ] |

---

# 1. ğŸ¯ ç›®æ ‡

## 1.1 å®éªŒç›®çš„

> **æ ¸å¿ƒé—®é¢˜**ï¼šå½’ä¸€åŒ–æ–¹å¼æ˜¯å¦å‹æ‰äº† logg çº¿ç¿¼ä¿¡å·ï¼Ÿ

**å›ç­”çš„é—®é¢˜**ï¼š
- Q2.2: å½’ä¸€åŒ–æ–¹å¼æ˜¯å¦å‹æ‰äº† logg ä¿¡å·ï¼Ÿ
- chunk z-score æ˜¯å¦ä¿ç•™æ›´å¤šå±€éƒ¨å¯¹æ¯”ï¼Ÿ
- continuum normalization æ˜¯å¦æ›´ç¬¦åˆç‰©ç†ï¼Ÿ

**å¯¹åº” hub.md çš„**ï¼š
- éªŒè¯é—®é¢˜ï¼šQ2.2
- å­å‡è®¾ï¼šH1.3ï¼ˆmedian norm å‹æ‰å±€éƒ¨å¯¹æ¯”ï¼‰

**ç‰©ç†èƒŒæ™¯**ï¼š
- logg ä¿¡å·ä¸»è¦åœ¨ **çº¿ç¿¼å½¢çŠ¶/çº¿æ·±** ä¸å‘¨è¾¹è¿ç»­è°±çš„ç›¸å¯¹å…³ç³»
- median norm (å…¨è°±) å¯èƒ½å‹æ‰è¿™ç§å±€éƒ¨å¯¹æ¯”
- chunk normalization ä¿ç•™å±€éƒ¨å¯¹æ¯”
- continuum normalization æ›´ç¬¦åˆå¤©æ–‡æ•°æ®å¤„ç†æƒ¯ä¾‹

## 1.2 é¢„æœŸç»“æœ

| åœºæ™¯ | é¢„æœŸç»“æœ | åˆ¤æ–­æ ‡å‡† |
|------|---------|---------|
| æ­£å¸¸æƒ…å†µ | è‡³å°‘ä¸€ç§æ–¹å¼ä¼˜äº median norm | RÂ² æå‡æˆ– MAE ä¸‹é™ |
| chunk z-score æœ‰æ•ˆ | ç®€å•æœ‰æ•ˆ | æ¨èä½œä¸ºé»˜è®¤ |
| continuum-norm æœ‰æ•ˆ | ç‰©ç†æ›´åˆç† | æ¨èä½œä¸ºé»˜è®¤ |
| éƒ½å·®ä¸å¤š | ç“¶é¢ˆä¸åœ¨å½’ä¸€åŒ– | ä¿æŒ median norm |

---

# 2. ğŸ§ª å®éªŒè®¾è®¡

## 2.1 æ•°æ®

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **æ•°æ®æ¥æº** | mag205_225_lowT_1M | BOSZâ†’PFS MR æ¨¡æ‹Ÿ |
| **è®­ç»ƒæ ·æœ¬** | 50,000 - 200,000 | æ–¹å‘åˆ¤å®šç”¨ |
| **æµ‹è¯•é›†** | low-noise test (Top 20% SNR) | æ¥è‡ª MVP-0.A |
| **æ³¢é•¿èŒƒå›´** | 6500-9500 Ã… | PFS MR |
| **æ ‡ç­¾å‚æ•°** | log_g | ä¸»ç›®æ ‡ |

### ä¸‰ç§å½’ä¸€åŒ–æ–¹å¼

| Method | åç§° | å…¬å¼ | è¯´æ˜ |
|--------|------|------|------|
| **A** | å…¨è°± median norm | $F' = F / \text{median}(F)$ | ç°çŠ¶ baseline |
| **B** | åˆ†å— z-score | $F'_i = (F_i - \mu_{chunk}) / \sigma_{chunk}$ | æ¯ä¸ª chunk ç‹¬ç«‹æ ‡å‡†åŒ– |
| **C** | è¿ç»­è°±å½’ä¸€åŒ– | $F' = F / \text{continuum}(F)$ | é™¤ä»¥æ‹Ÿåˆçš„è¿ç»­è°± |

### Method B: Chunk Z-score ç»†èŠ‚

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| **chunk size** | 100-500 åƒç´  | éœ€è¦è°ƒå‚ |
| **overlap** | 0 æˆ– 50% | å¯é€‰ |

### Method C: Continuum Normalization ç»†èŠ‚

| æ–¹æ³• | è¯´æ˜ |
|------|------|
| **ä½é˜¶å¤šé¡¹å¼** | 3-5 é˜¶å¤šé¡¹å¼æ‹Ÿåˆ |
| **Robust spline** | è¿­ä»£ sigma-clip + spline |
| **Running median** | å¤§çª—å£ (200-500 pixel) æ»‘åŠ¨ä¸­ä½æ•° |

## 2.2 æ¨¡å‹ä¸ç®—æ³•

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **æ¶æ„** | å½“å‰æœ€ä½³ ViT | å›ºå®šï¼Œåªæ”¹æ•°æ®é¢„å¤„ç† |
| **è®­ç»ƒé…ç½®** | ä¸ baseline ä¸€è‡´ | å›ºå®š |

## 2.3 è¶…å‚æ•°é…ç½®

### æœ¬å®éªŒæ‰«æçš„å‚æ•°

| æ‰«æå‚æ•° | æ‰«æå€¼ | å›ºå®šå‚æ•° |
|---------|--------|---------|
| å½’ä¸€åŒ–æ–¹å¼ | A, B, C | æ¨¡å‹é…ç½®å…¨å›ºå®š |

### Method B å‚æ•°

| å‚æ•° | æ‰«æå€¼ |
|------|--------|
| chunk_size | 100, 200, 500 |

### Method C å‚æ•°

| å‚æ•° | æ‰«æå€¼ |
|------|--------|
| æ‹Ÿåˆæ–¹æ³• | polynomial(3), polynomial(5), running_median |

## 2.4 è¯„ä»·æŒ‡æ ‡

| æŒ‡æ ‡ | å…¬å¼ | ç”¨é€” |
|------|------|------|
| $R^2$ (logg) | $1 - \frac{SS_{res}}{SS_{tot}}$ | ä¸»è¦æ¯”è¾ƒæŒ‡æ ‡ |
| MAE (logg) | $\frac{1}{n}\sum\|y - \hat{y}\|$ | è¾…åŠ©æŒ‡æ ‡ |

**æˆåŠŸæ ‡å‡†**ï¼šRÂ² æå‡ â‰¥ 0.01 æˆ– MAE ä¸‹é™ â‰¥ 3%

**å¯é€‰è§£é‡Šæ€§éªŒè¯**ï¼š
- å¯è§†åŒ–æ¨¡å‹å¯¹çº¿åŒº vs è¿ç»­è°±åŒºçš„å…³æ³¨å·®å¼‚
- å¯¹æ¯”ä¸åŒå½’ä¸€åŒ–ä¸‹çš„ç‰¹å¾åˆ†å¸ƒ

---

# 3. ğŸ“Š å®éªŒå›¾è¡¨

> [å¾…å®éªŒå®Œæˆåå¡«å……]

### å›¾ 1ï¼šä¸‰ç§å½’ä¸€åŒ–æ–¹å¼çš„ logg æŒ‡æ ‡å¯¹æ¯”

![å›¾ç‰‡](../img/normalization_comparison.png)

**Figure 1. Method A/B/C çš„ logg RÂ² å¯¹æ¯”**

**å…³é”®è§‚å¯Ÿ**ï¼š
- [å¾…å¡«å†™]

---

### å›¾ 2ï¼šå½’ä¸€åŒ–åçš„å…‰è°±ç¤ºä¾‹

![å›¾ç‰‡](../img/normalization_examples.png)

**Figure 2. åŒä¸€æ¡å…‰è°±ç»è¿‡ä¸‰ç§å½’ä¸€åŒ–åçš„å¯¹æ¯”**

**å…³é”®è§‚å¯Ÿ**ï¼š
- [å¾…å¡«å†™ï¼šçº¿ç¿¼/è¿ç»­è°±å¯¹æ¯”çš„ä¿ç•™ç¨‹åº¦]

---

# 4. ğŸ’¡ å…³é”®æ´è§

> [å¾…å®éªŒå®Œæˆåå¡«å……]

## 4.1 å®è§‚å±‚æ´è§

> [å¾…å¡«å†™]

## 4.2 æ¨¡å‹å±‚æ´è§

> [å¾…å¡«å†™]

## 4.3 å®éªŒå±‚ç»†èŠ‚æ´è§

> [å¾…å¡«å†™]

---

# 5. ğŸ“ ç»“è®º

## 5.1 æ ¸å¿ƒå‘ç°

> [å¾…å®éªŒå®Œæˆåå¡«å†™]

## 5.2 å…³é”®ç»“è®ºï¼ˆ2-4 æ¡ï¼‰

| # | ç»“è®º | è¯æ® |
|---|------|------|
| 1 | [å¾…å¡«å†™] | [å¾…å¡«å†™] |
| 2 | [å¾…å¡«å†™] | [å¾…å¡«å†™] |

## 5.3 è®¾è®¡å¯ç¤º

| åŸåˆ™ | å»ºè®® | åŸå›  |
|------|------|------|
| [å¾…å¡«å†™] | [å¾…å¡«å†™] | [å¾…å¡«å†™] |

## 5.4 ç‰©ç†è§£é‡Š

> [å¾…å¡«å†™ï¼šä¸ºä»€ä¹ˆæŸç§å½’ä¸€åŒ–æ›´æœ‰æ•ˆ]

## 5.5 å…³é”®æ•°å­—é€ŸæŸ¥

| æŒ‡æ ‡ | å€¼ | é…ç½®/æ¡ä»¶ |
|------|-----|----------|
| Method A RÂ² | [baseline] | median norm |
| Method B RÂ² | [å¾…å®éªŒ] | chunk z-score |
| Method C RÂ² | [å¾…å®éªŒ] | continuum-norm |
| æœ€ä½³å½’ä¸€åŒ– | [å¾…ç¡®å®š] | |

## 5.6 ä¸‹ä¸€æ­¥å·¥ä½œ

| æ–¹å‘ | å…·ä½“ä»»åŠ¡ | ä¼˜å…ˆçº§ | å¯¹åº” MVP |
|------|----------|--------|---------|
| [å–å†³äºç»“æœ] | [å¾…å¡«å†™] | [å¾…å®š] | [å¾…å®š] |

---

# 6. ğŸ“ é™„å½•

## 6.1 æ•°å€¼ç»“æœè¡¨

> [å¾…å®éªŒå®Œæˆåå¡«å……]

### ä¸»è¦ç»“æœ

| Method | å½’ä¸€åŒ– | logg RÂ² | logg MAE | å¤‡æ³¨ |
|--------|--------|---------|----------|------|
| A | median norm | [baseline] | [baseline] | ç°çŠ¶ |
| B | chunk z-score (100) | [å¾…å®éªŒ] | [å¾…å®éªŒ] | |
| B | chunk z-score (200) | [å¾…å®éªŒ] | [å¾…å®éªŒ] | |
| B | chunk z-score (500) | [å¾…å®éªŒ] | [å¾…å®éªŒ] | |
| C | polynomial(3) | [å¾…å®éªŒ] | [å¾…å®éªŒ] | |
| C | polynomial(5) | [å¾…å®éªŒ] | [å¾…å®éªŒ] | |
| C | running_median | [å¾…å®éªŒ] | [å¾…å®éªŒ] | |

---

## 6.2 å®éªŒæµç¨‹è®°å½•

### 6.2.1 æ‰§è¡Œå‘½ä»¤

```bash
# Step 1: å®ç°ä¸‰ç§å½’ä¸€åŒ–é¢„å¤„ç†
# TODO

# Step 2: è®­ç»ƒ Method A (baseline)
# TODO

# Step 3: è®­ç»ƒ Method B (chunk z-score)
# TODO

# Step 4: è®­ç»ƒ Method C (continuum-norm)
# TODO

# Step 5: åœ¨ low-noise test ä¸Šè¯„ä¼°
# TODO
```

---

## 6.3 ç›¸å…³æ–‡ä»¶

| ç±»å‹ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| Hub | `logg/logg_1m/logg_1m_hub_20251222.md` | H1.3 å‡è®¾ |
| å‰ç½®å®éªŒ | `exp_logg_1m_foundation_protocol_20251222.md` | MVP-0.A, 0.B |

---

## 6.4 å®éªŒæ—¥å¿—

| æ—¶é—´ | äº‹ä»¶ | å¤„ç† |
|------|------|------|
| 2025-12-22 | åˆ›å»ºå®éªŒæ¡†æ¶ | - |

