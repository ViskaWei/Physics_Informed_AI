# ğŸ“˜ Experiment Report: Baseline Scaling (Ridge + LightGBM @ noise=1.0)
> **Name:** TODO | **ID:** `VIT-20251222-logg_1m-baseline-scaling-01`  
> **Topic:** `VIT` | **MVP:** MVP-0.B | **Project:** `VIT`  
> **Author:** Viska Wei | **Date:** 2025-12-22 | **Status:** ğŸ”„ In Progress
```
ğŸ’¡ å®éªŒç›®çš„  
å†³å®šï¼šå½±å“çš„å†³ç­–
```

---

---

## ğŸ”— Upstream Links

| Type | Link | Description |
|------|------|-------------|
| ğŸ§  Hub | [`logg_1m_hub_20251222.md`](../logg_1m_hub_20251222.md) | Hypothesis pyramid |
| ğŸ—ºï¸ Roadmap | [`logg_1m_roadmap_20251222.md`](../logg_1m_roadmap_20251222.md) | MVP-0.B |
| ğŸ“‹ Kanban | [`status/kanban.md`](../../../status/kanban.md) | Experiment queue |
| ğŸ“š ç›¸å…³å®éªŒ | [`logg/scaling/`](../../scaling/) | Scaling Law ç³»åˆ— |

---

# ğŸ“‘ Table of Contents

- [âš¡ Key Findings](#-key-findings-for-hub-extraction)
- [1. ğŸ¯ Objective](#1--objective)
- [2. ğŸ§ª Experiment Design](#2--experiment-design)
- [3. ğŸ“Š Figures & Results](#3--figures--results)
- [4. ğŸ’¡ Insights](#4--insights)
- [5. ğŸ“ Conclusions](#5--conclusions)
- [6. ğŸ“ Appendix](#6--appendix)

---

## âš¡ æ ¸å¿ƒç»“è®ºé€Ÿè§ˆï¼ˆä¾› hub æå–ï¼‰

> **æœ¬èŠ‚åœ¨å®éªŒå®Œæˆåç¬¬ä¸€æ—¶é—´å¡«å†™ã€‚**

### ä¸€å¥è¯æ€»ç»“

> **[å¾…å®éªŒå®Œæˆåå¡«å†™ï¼šRidge/LightGBM åœ¨ noise=1.0 ä¸‹éšæ•°æ®è§„æ¨¡çš„ scaling è§„å¾‹]**

### å¯¹å‡è®¾çš„éªŒè¯

| éªŒè¯é—®é¢˜ | ç»“æœ | ç»“è®º |
|---------|------|------|
| Q0.2: ä¼ ç»Ÿ ML åœ¨ noise=1.0 ä¸‹æœ‰ scaling ç“¶é¢ˆå—ï¼Ÿ | â³ | - |
| æ•°æ®ä» 10kâ†’100kâ†’500kâ†’1M æ€§èƒ½å¦‚ä½•å˜åŒ–ï¼Ÿ | â³ | - |

### è®¾è®¡å¯ç¤ºï¼ˆ1-2 æ¡ï¼‰

| å¯ç¤º | å…·ä½“å»ºè®® |
|------|---------|
| [å¾…å¡«å†™] | [å¾…å¡«å†™] |

### å…³é”®æ•°å­—

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| Ridge 10k logg RÂ² | [å¾…å®éªŒ] |
| Ridge 100k logg RÂ² | [å¾…å®éªŒ] |
| Ridge 500k logg RÂ² | [å¾…å®éªŒ] |
| Ridge 1M logg RÂ² | [å¾…å®éªŒ] |
| LightGBM 10k logg RÂ² | [å¾…å®éªŒ] |
| LightGBM 100k logg RÂ² | [å¾…å®éªŒ] |
| LightGBM 500k logg RÂ² | [å¾…å®éªŒ] |
| LightGBM 1M logg RÂ² | [å¾…å®éªŒ] |

---

# 1. ğŸ¯ ç›®æ ‡

## 1.1 å®éªŒç›®çš„

> **æ ¸å¿ƒé—®é¢˜**ï¼šåœ¨é«˜å™ªå£° (noise=1.0) æ¡ä»¶ä¸‹ï¼Œä¼ ç»Ÿ ML æ¨¡å‹éšæ•°æ®è§„æ¨¡æ‰©å±•çš„æ€§èƒ½ç“¶é¢ˆåœ¨å“ªé‡Œï¼Ÿ

**å›ç­”çš„é—®é¢˜**ï¼š
- Q0.2: å½“å‰æ¨¡å‹è·ç¦»ä¸Šä¸‹é™æœ‰å¤šè¿œï¼Ÿ
- Ridge/LightGBM åœ¨ noise=1.0 ä¸‹æ˜¯å¦å­˜åœ¨ scaling å¤©èŠ±æ¿ï¼Ÿ
- æ•°æ®é‡å¢åŠ èƒ½å¦æŒç»­æå‡æ€§èƒ½ï¼Ÿè¿˜æ˜¯ä¼šé¥±å’Œï¼Ÿ
- ä¸ºåç»­ NN å¯¹æ¯”å®éªŒå»ºç«‹ baseline

**å¯¹åº” hub.md çš„**ï¼š
- éªŒè¯é—®é¢˜ï¼šQ0.2
- å­å‡è®¾ï¼šH1ï¼ˆä¿¡æ¯åˆ©ç”¨ç“¶é¢ˆï¼‰çš„å‰æéªŒè¯

**å®éªŒåŠ¨æœº**ï¼š
- 1M æ•°æ®æ˜¯å‰æ‰€æœªæœ‰çš„è§„æ¨¡ï¼Œéœ€è¦éªŒè¯ä¼ ç»Ÿ ML èƒ½å¦å……åˆ†åˆ©ç”¨
- noise=1.0 æ˜¯é«˜å™ªå£°æç«¯æ¡ä»¶ï¼ŒæŒ‘æˆ˜æ€§æœ€å¤§
- å¦‚æœä¼ ç»Ÿ ML åœ¨ 1M ä¸‹ä»æœ‰ç“¶é¢ˆï¼Œè¯´æ˜éœ€è¦ NN çªç ´

## 1.2 é¢„æœŸç»“æœ

| åœºæ™¯ | é¢„æœŸç»“æœ | åˆ¤æ–­æ ‡å‡† |
|------|---------|---------|
| æ­£å¸¸æƒ…å†µ | æ€§èƒ½éšæ•°æ®å¢åŠ è€Œæå‡ï¼Œä½†å¢é€Ÿæ”¾ç¼“ | è§‚å¯Ÿ scaling curve |
| ML æœ‰å¤©èŠ±æ¿ | 100kâ†’1M æå‡ < 5% | NN æœ‰çªç ´ç©ºé—´ |
| ML æŒç»­æå‡ | 1M æ˜¾è‘—ä¼˜äº 100k (>10%) | ML åœ¨æ­¤å™ªå£°ä¸‹è¶³å¤Ÿ |
| é¥±å’Œç‚¹ | æŸä¸ªæ•°æ®é‡åæ€§èƒ½ä¸å†æå‡ | ç¡®å®šæœ€å°å¿…è¦æ•°æ®é‡ |

---

# 2. ğŸ§ª å®éªŒè®¾è®¡

## 2.1 æ•°æ®

### æ•°æ®æ¥æºä¸è§„æ¨¡

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **æ•°æ®æ¥æº** | mag205_225_lowT_1M | BOSZâ†’PFS MR æ¨¡æ‹Ÿ |
| **æ€»æ ·æœ¬æ•°** | 1,000,000 | 93GB |
| **ç‰¹å¾ç»´åº¦** | å…¨è°±åƒç´ æ•° | çº¦ 3000-4000 åƒç´  |
| **æ³¢é•¿èŒƒå›´** | 6500-9500 Ã… | PFS MR |
| **æ ‡ç­¾å‚æ•°** | log_g | ä¸»ç›®æ ‡ |
| **Teff èŒƒå›´** | 3750-6000 K | BOSZ |
| **logg èŒƒå›´** | 1-5 dex | BOSZ |
| **Fe/H èŒƒå›´** | -1 ~ 0 dex | BOSZ |

### æ•°æ®è§„æ¨¡æ‰«æ

| è§„æ¨¡ | è®­ç»ƒæ ·æœ¬æ•° | æµ‹è¯•æ ·æœ¬æ•° | è¯´æ˜ |
|------|-----------|-----------|------|
| **10k** | 8,000 | 2,000 | å¿«é€ŸéªŒè¯ |
| **32k** | 25,600 | 6,400 | ä¹‹å‰å®éªŒè§„æ¨¡ |
| **100k** | 80,000 | 20,000 | ä¸­ç­‰è§„æ¨¡ |
| **500k** | 400,000 | 100,000 | å¤§è§„æ¨¡ |
| **1M** | 800,000 | 200,000 | å…¨é‡ |

### å™ªå£°é…ç½®

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **å™ªå£°ç±»å‹** | Gaussian | é«˜æ–¯å™ªå£° |
| **noise_level** | **1.0** | é«˜å™ªå£°æ¡ä»¶ï¼ˆä¸»å®éªŒï¼‰ |
| **åº”ç”¨èŒƒå›´** | train + test | å…¨æ•°æ®åŠ å™ª |

**å™ªå£°æ·»åŠ å…¬å¼**ï¼š

$$
\text{noisy\_flux} = \text{flux} + \mathcal{N}(0, \sigma^2), \quad \sigma = 1.0
$$

### æ•°æ®é¢„å¤„ç†

| æ­¥éª¤ | é…ç½® |
|------|------|
| **å½’ä¸€åŒ–** | StandardScaler (fit on train) |
| **ç‰¹å¾é€‰æ‹©** | å…¨è°± / PCA é™ç»´ |

## 2.2 æ¨¡å‹ä¸ç®—æ³•

### Model 1: Ridge Regression

$$
\hat{w} = \arg\min_w \|Xw - y\|^2 + \alpha \|w\|^2
$$

**è¶…å‚æ•°**ï¼š
- alpha: ç½‘æ ¼æœç´¢ [0.1, 1.0, 10.0, 100.0]
- ç‰¹å¾: å…¨è°± æˆ– PCA (dim=100, 200, 500)

### Model 2: LightGBM

**è¶…å‚æ•°**ï¼ˆåŸºäºä¹‹å‰ 100k å®éªŒçš„æœ€ä¼˜é…ç½®ï¼‰ï¼š
- n_estimators: 2500 (åŸºäºä¹‹å‰å®éªŒ)
- learning_rate: 0.05
- num_leaves: 31
- max_depth: -1
- reg_alpha: 0.1
- reg_lambda: 0.1

## 2.3 è¶…å‚æ•°é…ç½®

### Ridge é…ç½®

| å‚æ•° | æ‰«æå€¼ | è¯´æ˜ |
|------|--------|------|
| **alpha** | 0.1, 1.0, 10.0, 100.0 | æ­£åˆ™åŒ–å¼ºåº¦ |
| **ç‰¹å¾** | å…¨è°±, PCA-100, PCA-200, PCA-500 | ç‰¹å¾å¤„ç† |

### LightGBM é…ç½®

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| **n_estimators** | 2500 | æ ‘æ•°é‡ |
| **learning_rate** | 0.05 | å­¦ä¹ ç‡ |
| **num_leaves** | 31 | å¶å­æ•° |
| **feature_fraction** | 0.8 | ç‰¹å¾é‡‡æ · |
| **bagging_fraction** | 0.8 | æ ·æœ¬é‡‡æ · |
| **bagging_freq** | 5 | é‡‡æ ·é¢‘ç‡ |
| **early_stopping_rounds** | 100 | æ—©åœ |

### æœ¬å®éªŒæ‰«æçš„å‚æ•°

| æ‰«æå‚æ•° | æ‰«æå€¼ | å›ºå®šå‚æ•° |
|---------|--------|---------|
| **æ•°æ®è§„æ¨¡** | 10k, 32k, 100k, 500k, 1M | noise=1.0 |
| **æ¨¡å‹** | Ridge, LightGBM | - |

## 2.4 è¯„ä»·æŒ‡æ ‡

| æŒ‡æ ‡ | å…¬å¼ | ç”¨é€” |
|------|------|------|
| $R^2$ (logg) | $1 - \frac{\sum(y - \hat{y})^2}{\sum(y - \bar{y})^2}$ | ä¸»è¦è¯„ä»·æŒ‡æ ‡ |
| MAE (logg) | $\frac{1}{n}\sum\|y - \hat{y}\|$ | ç»å¯¹è¯¯å·®å‚è€ƒ |
| RMSE (logg) | $\sqrt{\frac{1}{n}\sum(y - \hat{y})^2}$ | ä¸ç‰©ç†é‡çº²ä¸€è‡´ |

**æˆåŠŸæ ‡å‡†**ï¼š
- å¾—åˆ°å®Œæ•´çš„ scaling curve
- è¯†åˆ«æ˜¯å¦å­˜åœ¨æ€§èƒ½å¤©èŠ±æ¿
- ä¸º NN å¯¹æ¯”å®éªŒå»ºç«‹ baseline

---

# 3. ğŸ“Š å®éªŒå›¾è¡¨

> [å¾…å®éªŒå®Œæˆåå¡«å……]

### å›¾ 1ï¼šData Scaling Curve (Ridge vs LightGBM)

![å›¾ç‰‡](../img/baseline_scaling_curve.png)

**Figure 1. logg RÂ² vs æ•°æ®è§„æ¨¡ (noise=1.0)**

**å…³é”®è§‚å¯Ÿ**ï¼š
- [å¾…å¡«å†™ï¼šscaling è¶‹åŠ¿]
- [å¾…å¡«å†™ï¼šæ˜¯å¦å­˜åœ¨é¥±å’Œç‚¹]
- [å¾…å¡«å†™ï¼šRidge vs LightGBM å¯¹æ¯”]

---

### å›¾ 2ï¼šæ€§èƒ½æå‡ç‡

![å›¾ç‰‡](../img/baseline_scaling_improvement.png)

**Figure 2. ç›¸é‚»è§„æ¨¡é—´çš„ RÂ² æå‡ç‡**

**å…³é”®è§‚å¯Ÿ**ï¼š
- [å¾…å¡«å†™ï¼šæå‡ç‡éšè§„æ¨¡çš„å˜åŒ–]

---

# 4. ğŸ’¡ å…³é”®æ´è§

> [å¾…å®éªŒå®Œæˆåå¡«å……]

## 4.1 å®è§‚å±‚æ´è§

> [å¾…å¡«å†™ï¼šå…³äºä¼ ç»Ÿ ML scaling è§„å¾‹çš„è®¤è¯†]

## 4.2 æ¨¡å‹å±‚æ´è§

> [å¾…å¡«å†™ï¼šRidge vs LightGBM çš„å¯¹æ¯”]

## 4.3 å®éªŒå±‚ç»†èŠ‚æ´è§

> [å¾…å¡«å†™ï¼šæŠ€æœ¯ç»†èŠ‚]

---

# 5. ğŸ“ ç»“è®º

## 5.1 æ ¸å¿ƒå‘ç°

> [å¾…å®éªŒå®Œæˆåå¡«å†™]

## 5.2 å…³é”®ç»“è®ºï¼ˆ2-4 æ¡ï¼‰

| # | ç»“è®º | è¯æ® |
|---|------|------|
| 1 | [å¾…å¡«å†™] | [å¾…å¡«å†™] |
| 2 | [å¾…å¡«å†™] | [å¾…å¡«å†™] |

## 5.3 è®¾è®¡å¯ç¤º

| åŸåˆ™ | å»ºè®® | åŸå›  |
|------|------|------|
| [å¾…å¡«å†™] | [å¾…å¡«å†™] | [å¾…å¡«å†™] |

## 5.4 ç‰©ç†è§£é‡Š

> [å¾…å¡«å†™]

## 5.5 å…³é”®æ•°å­—é€ŸæŸ¥

| æŒ‡æ ‡ | å€¼ | é…ç½®/æ¡ä»¶ |
|------|-----|----------|
| Ridge æœ€ä½³ RÂ² | [å¾…å®éªŒ] | [æœ€ä½³è§„æ¨¡+é…ç½®] |
| LightGBM æœ€ä½³ RÂ² | [å¾…å®éªŒ] | [æœ€ä½³è§„æ¨¡+é…ç½®] |
| Scaling é¥±å’Œç‚¹ | [å¾…ç¡®å®š] | |
| 100kâ†’1M æå‡ | [å¾…è®¡ç®—] | |

## 5.6 ä¸‹ä¸€æ­¥å·¥ä½œ

| æ–¹å‘ | å…·ä½“ä»»åŠ¡ | ä¼˜å…ˆçº§ | å¯¹åº” MVP |
|------|----------|--------|---------|
| NN Baseline | ç”¨ MLP/ViT å¯¹æ¯” | ğŸ”´ P0 | MVP-0.B ç»­ |
| Fisher åˆ†æ | ä¼°ç®—ç†è®ºä¸Šé™ | ğŸ”´ P0 | MVP-1.1 |

---

# 6. ğŸ“ é™„å½•

## 6.1 æ•°å€¼ç»“æœè¡¨

> [å¾…å®éªŒå®Œæˆåå¡«å……]

### Ridge Scaling Results (noise=1.0)

| æ•°æ®è§„æ¨¡ | æœ€ä½³ alpha | PCA dim | logg RÂ² | logg MAE | logg RMSE | è®­ç»ƒæ—¶é—´ |
|---------|-----------|---------|---------|----------|-----------|---------|
| 10k | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…è®°å½•] |
| 32k | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…è®°å½•] |
| 100k | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…è®°å½•] |
| 500k | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…è®°å½•] |
| 1M | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…è®°å½•] |

### LightGBM Scaling Results (noise=1.0)

| æ•°æ®è§„æ¨¡ | best_iter | logg RÂ² | logg MAE | logg RMSE | è®­ç»ƒæ—¶é—´ |
|---------|-----------|---------|----------|-----------|---------|
| 10k | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…è®°å½•] |
| 32k | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…è®°å½•] |
| 100k | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…è®°å½•] |
| 500k | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…è®°å½•] |
| 1M | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…å®éªŒ] | [å¾…è®°å½•] |

### Scaling Improvement

| è§„æ¨¡è·¨åº¦ | Ridge Î”RÂ² | LightGBM Î”RÂ² |
|---------|-----------|--------------|
| 10k â†’ 32k | [å¾…è®¡ç®—] | [å¾…è®¡ç®—] |
| 32k â†’ 100k | [å¾…è®¡ç®—] | [å¾…è®¡ç®—] |
| 100k â†’ 500k | [å¾…è®¡ç®—] | [å¾…è®¡ç®—] |
| 500k â†’ 1M | [å¾…è®¡ç®—] | [å¾…è®¡ç®—] |

---

## 6.2 å®éªŒæµç¨‹è®°å½•

### 6.2.1 ç¯å¢ƒä¸é…ç½®

| é¡¹ç›® | å€¼ |
|------|-----|
| **ä»“åº“** | `~/VIT` |
| **æ•°æ®è·¯å¾„** | `data/mag205_225_lowT_1M/` |
| **è¾“å‡ºè·¯å¾„** | `results/logg_1m_baseline_scaling/` |

### 6.2.2 æ‰§è¡Œå‘½ä»¤

```bash
# Step 1: æ•°æ®å‡†å¤‡ - é‡‡æ ·ä¸åŒè§„æ¨¡
python scripts/sample_data.py \
    --input data/mag205_225_lowT_1M/ \
    --sizes 10000 32000 100000 500000 1000000 \
    --output data/logg_1m_samples/

# Step 2: æ·»åŠ å™ªå£°
python scripts/add_noise.py \
    --input data/logg_1m_samples/ \
    --noise_level 1.0 \
    --output data/logg_1m_samples_noise1/

# Step 3: Ridge Scaling
for size in 10k 32k 100k 500k 1M; do
    python scripts/train_ridge.py \
        --data data/logg_1m_samples_noise1/${size}/ \
        --alpha 0.1 1.0 10.0 100.0 \
        --pca 100 200 500 \
        --output results/logg_1m_baseline_scaling/ridge_${size}/
done

# Step 4: LightGBM Scaling
for size in 10k 32k 100k 500k 1M; do
    python scripts/train_lightgbm.py \
        --data data/logg_1m_samples_noise1/${size}/ \
        --n_estimators 2500 \
        --learning_rate 0.05 \
        --output results/logg_1m_baseline_scaling/lgbm_${size}/
done

# Step 5: ç”Ÿæˆ Scaling Curve å›¾
python scripts/plot_scaling_curve.py \
    --results results/logg_1m_baseline_scaling/ \
    --output logg/logg_1m/img/baseline_scaling_curve.png
```

---

## 6.3 ç›¸å…³æ–‡ä»¶

| ç±»å‹ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| Hub | `logg/logg_1m/logg_1m_hub_20251222.md` | çŸ¥è¯†å¯¼èˆª |
| Roadmap | `logg/logg_1m/logg_1m_roadmap_20251222.md` | å®éªŒè¿½è¸ª |
| æœ¬æŠ¥å‘Š | `logg/logg_1m/exp/exp_logg_1m_baseline_scaling_20251222.md` | å½“å‰æ–‡ä»¶ |
| ç›¸å…³å®éªŒ | `logg/scaling/` | Scaling Law ç³»åˆ— |

---

## 6.4 å®éªŒæ—¥å¿—

| æ—¶é—´ | äº‹ä»¶ | å¤„ç† |
|------|------|------|
| 2025-12-22 | åˆ›å»ºå®éªŒæ¡†æ¶ | - |

