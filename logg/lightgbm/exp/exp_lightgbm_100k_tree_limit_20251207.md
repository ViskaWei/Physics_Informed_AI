# ğŸ“˜ Experiment Report: LightGBM 100k Tree ä¸Šé™ç¡®è®¤

---
> **Name:** LightGBM 100k Tree ä¸Šé™ç¡®è®¤  
> **ID:** `VIT-20251207-lgb-100k-tree-01`  
> **MVP:** MVP-2.2  
> **Author:** Viska Wei  
> **Date:** 2025-12-07  
> **Status:** âœ… Completed

---

## âš¡ æ ¸å¿ƒç»“è®ºé€Ÿè§ˆ

| é¡¹ç›® | å†…å®¹ |
|------|------|
| **ä¸€å¥è¯æ€»ç»“** | 100k çš„ tree ä¸Šé™çº¦ä¸º **2179**ï¼ˆä¸­ä½æ•°ï¼‰ï¼Œ**ç¡®å®è¢« E03 çš„ n=500 ä¸¥é‡å¡ä½** |
| **å‡è®¾éªŒè¯** | âœ… H3.3 (100k éœ€è¦æ›´å¤šæ ‘) |
| **å…³é”®æ•°å­—** | best_iter èŒƒå›´: 1117~5000, æ¨è n_estimators: **2500** |
| **è®¾è®¡å¯ç¤º** | 100k å®éªŒåº”ä½¿ç”¨ n=2500+ï¼Œè€Œé n=500 |

### æ ¸å¿ƒé—®é¢˜å›ç­”

| é—®é¢˜ | ç­”æ¡ˆ | è¯æ® |
|------|------|------|
| Q1: 100k è¢« n=500 å¡ä½ï¼Ÿ | âœ… **æ˜¯** | best_iter ä¸­ä½æ•° **2179** >> 500 |
| Q2: 100k n=5000 èƒ½åè¶… 32kï¼Ÿ | âœ… **æ˜¯** | Ïƒ=0.5: +0.0180, Ïƒ=1.0: +0.0221 |
| Q3: 100k çš„ tree ä¸Šé™æ˜¯å¤šå°‘ï¼Ÿ | **2179** (ä¸­ä½æ•°) | æ¨èä½¿ç”¨ n=2500 |

## 1. ğŸ¯ ç›®æ ‡

1. ç¡®å®š 100k æ•°æ®ä¸‹çš„ tree ä¸Šé™
2. è§£ç­”ã€ŒE03 ä¸­ 100k é«˜å™ªå£°åè€Œä¸å¦‚ 32kã€æ˜¯å¦å› ä¸ºè¢« n=500 å¡ä½
3. è¡¥é½ 100k çš„ Ïƒ=0 å’Œ Ïƒ=0.4

## 2. ğŸ§ª å®éªŒè®¾è®¡

### æ•°æ®é…ç½®
| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| train_size | 100,000 |
| val_size | 512 |
| test_size | 512 |
| noise_levels | {0, 0.1, 0.2, 0.4, 0.5, 1.0} |

### æ¨¡å‹é…ç½®
| å‚æ•° | å€¼ |
|------|-----|
| n_estimators | 5000 (max) |
| early_stopping_rounds | 100 |
| num_leaves | 31 |
| max_depth | 7 |
| learning_rate | {0.05, 0.1} |

## 3. ğŸ“Š å®éªŒå›¾è¡¨

### å›¾ 1: â­ æ ¸å¿ƒå›¾ - best_iteration vs Noise
![fig1](../img/lgb_100k_best_iter_vs_noise.png)

**å…³é”®è§‚å¯Ÿ**:
- **æ‰€æœ‰ noise level çš„ best_iter éƒ½è¿œè¶… 500**ï¼ˆE03 ä¸Šé™ï¼‰
- lr=0.05 æ—¶éœ€è¦æ›´å¤šæ ‘ï¼ˆ2000-5000ï¼‰
- lr=0.1 æ—¶æ—©åœè¾ƒæ—©ï¼ˆ1100-1800ï¼‰
- Ïƒ=0 æ—¶è¾¾åˆ° 5000 ä¸Šé™ï¼Œè¯´æ˜ä½å™ªå£°ä¸‹æ¨¡å‹è¿˜èƒ½ç»§ç»­å­¦ä¹ 

### å›¾ 2: RÂ² å¯¹æ¯” (ç»¼åˆå›¾)
![fig2](../img/lgb_100k_tree_limit_summary.png)

### å›¾ 3: RÂ² Comparison
![fig3](../img/lgb_100k_r2_comparison.png)

**å…³é”®è§‚å¯Ÿ**:
- 100k n=5000 åœ¨æ‰€æœ‰ noise level éƒ½ä¼˜äº 100k n=500 (E03)
- 100k n=5000 åœ¨é«˜å™ªå£°ï¼ˆÏƒâ‰¥0.5ï¼‰ä¸‹åè¶… 32k

### å›¾ 4: Î”RÂ² (100k - 32k)
![fig4](../img/lgb_100k_vs_32k_delta.png)

## 4. ğŸ’¡ å…³é”®æ´è§

### 4.1 Tree ä¸Šé™å‘ç°
| noise Ïƒ | lr=0.05 best_iter | lr=0.1 best_iter | ç‰¹ç‚¹ |
|---------|-------------------|------------------|------|
| 0.0 | **5000** (ä¸Šé™) | **5000** (ä¸Šé™) | ä½å™ªå£°å¯æŒç»­å­¦ä¹  |
| 0.1 | 2218 | 1259 | ä¸­ç­‰ |
| 0.2 | 3608 | 1826 | è¾ƒé«˜ |
| 0.4 | **4995** (â‰ˆä¸Šé™) | 1548 | lr=0.05 æ¥è¿‘ä¸Šé™ |
| 0.5 | 3855 | 1309 | ä¸­ç­‰ |
| 1.0 | 2140 | 1117 | é«˜å™ªå£°æ”¶æ•›æ›´å¿« |

**ç»“è®º**: 
- lr=0.05 éœ€è¦æ›´å¤šæ ‘ï¼ˆå¹³å‡ 3636ï¼‰ï¼Œlr=0.1 æ”¶æ•›æ›´å¿«ï¼ˆå¹³å‡ 2003ï¼‰
- æ¨è 100k å®éªŒä½¿ç”¨ **n=2500** ä»¥ç¡®ä¿å……åˆ†å­¦ä¹ 

### 4.2 æ•°æ®é‡å¢ç›Š
| noise Ïƒ | 100k n=5000 RÂ² | 100k n=500 RÂ² (E03) | 32k n=1000 RÂ² | Î”(5000-500) | Î”(100k-32k) |
|---------|----------------|---------------------|---------------|-------------|-------------|
| 0.0 | 0.9991 | - | 0.9981 | - | **+0.0010** |
| 0.1 | 0.9720 | 0.9641 | 0.9616 | **+0.0079** | **+0.0104** |
| 0.2 | 0.9318 | 0.9129 | 0.9045 | **+0.0189** | **+0.0273** |
| 0.4 | 0.8183 | - | 0.8159 | - | **+0.0024** |
| 0.5 | 0.7573 | 0.7370 | 0.7393 | **+0.0203** | **+0.0180** |
| 1.0 | 0.5582 | 0.5310 | 0.5361 | **+0.0272** | **+0.0221** |

**ç»“è®º**:
- å¢åŠ  n_estimators åï¼Œ100k åœ¨**æ‰€æœ‰ noise level éƒ½åè¶… 32k**
- E03 ä¸­ Ïƒ=0.5/1.0 æ—¶ 100k ä¸å¦‚ 32k çš„é—®é¢˜**å®Œå…¨è§£å†³**

### 4.3 lr å½±å“
- **lr=0.05**: æ”¶æ•›æ…¢ï¼Œéœ€è¦æ›´å¤šæ ‘ï¼Œæœ€ç»ˆ RÂ² ç•¥ä¼˜
- **lr=0.1**: æ”¶æ•›å¿«ï¼Œæ ‘æ•°çº¦ä¸º lr=0.05 çš„ä¸€åŠ
- æ¨è: ä½¿ç”¨ **lr=0.05 + n=2500** è·å¾—æœ€ä½³æ€§èƒ½

## 5. ğŸ“ ç»“è®º

### 5.1 æ ¸å¿ƒå‘ç°
1. âœ… **100k ç¡®å®è¢« n=500 ä¸¥é‡é™åˆ¶** - best_iter ä¸­ä½æ•° 2179 >> 500
2. âœ… **å¢åŠ æ ‘å 100k å…¨é¢åè¶… 32k** - åŒ…æ‹¬ä¹‹å‰è½åçš„é«˜å™ªå£°åœºæ™¯
3. âœ… **100k æ¨è n=2500** - è¿™æ˜¯ best_iter ä¸­ä½æ•°å‘ä¸Šå–æ•´åˆ° 500

### 5.2 è®¾è®¡å¯ç¤º
| åŸåˆ™ | å»ºè®® |
|------|------|
| 100k æ¨è n_estimators | **2500** (ä¸­ä½æ•° 2179 å‘ä¸Šå–æ•´) |
| 100k æ¨è lr | **0.05** (RÂ² æ›´ä¼˜) |
| 100k è®­ç»ƒæ—¶é—´ | çº¦ 5-10 min/run (ä¸å« Ïƒ=0) |

### 5.3 E03 é—®é¢˜è§£ç­”
> E03 ä¸­ã€Œ100k é«˜å™ªå£°åè€Œä¸å¦‚ 32kã€çš„åŸå› ï¼š
> - **n=500 ä¸¥é‡é™åˆ¶äº† 100k çš„å­¦ä¹ èƒ½åŠ›**
> - 100k æ•°æ®éœ€è¦æ›´å¤šæ ‘æ¥å……åˆ†åˆ©ç”¨æ•°æ®é‡ä¼˜åŠ¿
> - ä½¿ç”¨ n=2500 åé—®é¢˜å®Œå…¨è§£å†³

## 6. ğŸ“ é™„å½•

### 6.1 å®Œæ•´æ•°å€¼ç»“æœè¡¨

| noise | lr | Test RÂ² | Test MAE | Test RMSE | best_iter | Time (s) |
|-------|-----|---------|----------|-----------|-----------|----------|
| 0.0 | 0.05 | 0.9991 | 0.0060 | 0.0087 | 5000 | 65659 |
| 0.0 | 0.10 | 0.9987 | 0.0067 | 0.0105 | 5000 | 11900 |
| 0.1 | 0.05 | 0.9720 | 0.0336 | 0.0489 | 2218 | 192 |
| 0.1 | 0.10 | 0.9676 | 0.0362 | 0.0526 | 1259 | 124 |
| 0.2 | 0.05 | 0.9318 | 0.0523 | 0.0762 | 3608 | 249 |
| 0.2 | 0.10 | 0.9184 | 0.0567 | 0.0834 | 1826 | 160 |
| 0.4 | 0.05 | 0.8183 | 0.0880 | 0.1245 | 4995 | 355 |
| 0.4 | 0.10 | 0.8147 | 0.0905 | 0.1257 | 1548 | 164 |
| 0.5 | 0.05 | 0.7573 | 0.1034 | 0.1438 | 3855 | 317 |
| 0.5 | 0.10 | 0.7423 | 0.1093 | 0.1482 | 1309 | 103 |
| 1.0 | 0.05 | 0.5582 | 0.1517 | 0.1941 | 2140 | 222 |
| 1.0 | 0.10 | 0.5508 | 0.1514 | 0.1957 | 1117 | 137 |

### 6.2 best_iteration ç»Ÿè®¡
| ç»Ÿè®¡é‡ | å€¼ |
|--------|-----|
| min | 1117 |
| max | 5000 |
| mean | 2819 |
| median | **2179** |
| std | 1564 |

### 6.3 ä¸å‚ç…§æ•°æ®å¯¹æ¯”

| Source | noise Ïƒ | RÂ² | best_iter | n_max |
|--------|---------|-----|-----------|-------|
| **æœ¬å®éªŒ 100k** | 0 | **0.9991** | 5000 | 5000 |
| **æœ¬å®éªŒ 100k** | 0.1 | **0.9720** | 2218 | 5000 |
| **æœ¬å®éªŒ 100k** | 0.2 | **0.9318** | 3608 | 5000 |
| **æœ¬å®éªŒ 100k** | 0.4 | **0.8183** | 4995 | 5000 |
| **æœ¬å®éªŒ 100k** | 0.5 | **0.7573** | 3855 | 5000 |
| **æœ¬å®éªŒ 100k** | 1.0 | **0.5582** | 2140 | 5000 |
| E03 100k n=500 | 0.1 | 0.9641 | ? | 500 |
| E03 100k n=500 | 0.2 | 0.9129 | ? | 500 |
| E03 100k n=500 | 0.5 | 0.7370 âš ï¸ | ? | 500 |
| E03 100k n=500 | 1.0 | 0.5310 âš ï¸ | ? | 500 |
| 32k Summary | 0 | 0.9981 | 1000 | 1000 |
| 32k Summary | 0.1 | 0.9616 | 822 | 1000 |
| 32k Summary | 0.2 | 0.9045 | 993 | 1000 |
| 32k Summary | 0.5 | 0.7393 | 846 | 1000 |
| 32k Summary | 1.0 | 0.5361 | 603 | 1000 |

---
*Generated: 2025-12-07*
