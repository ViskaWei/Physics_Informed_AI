# LightGBM Â· log_g å®éªŒä¸»ç¬”è®°ï¼ˆæˆªè‡³ 2025-11-30ï¼‰

- æœ¬ç›®å½•ï¼š`logg/lightgbm/`
- æœ€è¿‘æ›´æ–°æ—¶é—´ï¼š2025-11-30
- å†™ä½œé£æ ¼å‚è€ƒï¼š`/home/swei20/VIT/docs`
- è¯´æ˜ï¼šæ­¤æ–‡ä»¶æ˜¯è¯¥å­ç›®å½•æ‰€æœ‰å®éªŒçš„ä¸»ç´¢å¼•ã€æ ¸å¿ƒç»“è®ºä¸æœªæ¥è®¡åˆ’ã€‚

---

# ç›®å½•

0. [é—®é¢˜é‡è¿°](#0-é—®é¢˜é‡è¿°)
1. [ç ”ç©¶ç›®æ ‡](#1-ç ”ç©¶ç›®æ ‡)
2. [å®éªŒåœ°å›¾ï¼ˆå«è¶…é“¾æ¥ï¼‰](#2-å®éªŒåœ°å›¾å«è¶…é“¾æ¥)
3. [æ ¸å¿ƒå‘ç°ï¼ˆä¸­æ–‡Â·ä¸“ä¸šÂ·å‹ç¼©ï¼‰](#3-æ ¸å¿ƒå‘ç°ä¸­æ–‡ä¸“ä¸šå‹ç¼©)
4. [å…³é”®å›¾è¡¨](#4-å…³é”®å›¾è¡¨)
5. [ä¸‹ä¸€æ­¥å®éªŒè®¡åˆ’](#5-ä¸‹ä¸€æ­¥å®éªŒè®¡åˆ’)
6. [é™„å½•ï¼šæ‰€æœ‰å­å®éªŒç´¢å¼•](#6-é™„å½•æ‰€æœ‰å­å®éªŒç´¢å¼•)

---

# 0. é—®é¢˜é‡è¿°

## 0.1 æ ¸å¿ƒç ”ç©¶é—®é¢˜

> **LightGBM ä½œä¸ºéçº¿æ€§ baselineï¼Œèƒ½å¦ä¸º $\log g$ é¢„æµ‹è®¾å®šä¸€ä¸ª"é»„é‡‘æ ‡å‡†"ï¼Ÿå…¶æœ€ä¼˜é…ç½®æ˜¯ä»€ä¹ˆï¼Ÿ**

LightGBM åœ¨ $\log g$ é¢„æµ‹ä¸­çš„å®šä½ï¼š
- **noise=0 æ—¶çš„æ€§èƒ½ä¸Šç•Œ**ï¼š$R^2 = 0.998$ï¼Œè¯æ˜éçº¿æ€§æ¨¡å‹èƒ½å®Œç¾å­¦ä¹ 
- **noise=1.0 æ—¶çš„ 32k SOTA**ï¼š$R^2 = 0.536$ï¼Œæ˜¯æ‰€æœ‰ NN å¿…é¡»è¶…è¶Šçš„ç›®æ ‡

## 0.2 å¯¹ NN è®¾è®¡çš„ç›´æ¥å½±å“

| å¦‚æœ NN... | åˆ™è¯´æ˜... |
|-----------|----------|
| åœ¨ 32k æ•°æ®ä¸‹è¶…è¿‡ LightGBM | NN æœ‰æ˜ç¡®ä¼˜åŠ¿ï¼Œå¯ç»§ç»­æ·±å…¥ |
| åœ¨ 32k æ•°æ®ä¸‹ä½äº LightGBM | éœ€è¦æ›´å¤šæ•°æ®æˆ–æ›´å¥½çš„æ¶æ„ |
| ä¸ LightGBM æŒå¹³ | å¯ä»¥è€ƒè™‘é›†æˆæˆ–çŸ¥è¯†è’¸é¦ |

## 0.3 è¶…å‚æ•°ä¼˜åŒ–çš„ä»·å€¼

ç†è§£ LightGBM çš„æœ€ä¼˜é…ç½®ï¼Œå¯ä»¥ï¼š
- ä¸º NN çš„ **learning rate schedule** æä¾›å‚è€ƒ
- æ­ç¤º **æ¨¡å‹å¤æ‚åº¦** ä¸æ€§èƒ½çš„å…³ç³»
- è¯†åˆ« **Pareto æœ€ä¼˜** çš„æ•ˆç‡-æ€§èƒ½æƒè¡¡ç‚¹

---

# 1. ç ”ç©¶ç›®æ ‡

æœ¬ç›®å½•èšç„¦äº **LightGBMï¼ˆæ¢¯åº¦æå‡æ ‘ï¼‰åœ¨ $\log g$ å›å½’ä»»åŠ¡ä¸Šçš„è¶…å‚æ•°ä¼˜åŒ–**ï¼Œä¸»è¦å›ç­”ï¼š

- LightGBM çš„æœ€ä¼˜è¶…å‚æ•°é…ç½®æ˜¯ä»€ä¹ˆï¼Ÿ
- `learning_rate`ã€`num_leaves`ã€`max_depth`ã€`n_estimators` å„è‡ªå¯¹æ€§èƒ½çš„å½±å“æœ‰å¤šå¤§ï¼Ÿ
- æ˜¯å¦å­˜åœ¨æ˜ç¡®çš„æ•ˆç‡-æ€§èƒ½ Pareto æœ€ä¼˜å‰æ²¿ï¼Ÿ
- LightGBM èƒ½å¦ä½œä¸º NN çš„å¼º baselineï¼Ÿ

ä¸ $\log g$ æ€»ç›®æ ‡çš„å…³ç³»ï¼šLightGBM åœ¨æ‰€æœ‰å™ªå£°æ°´å¹³ä¸‹è¡¨ç°æœ€ä¼˜ï¼ˆ$R^2=0.998$ @ noise=0ï¼‰ï¼Œæ˜¯ NN å¿…é¡»è¶…è¶Šçš„**é»„é‡‘ baseline**ã€‚

---

# 2. å®éªŒåœ°å›¾ï¼ˆå«è¶…é“¾æ¥ï¼‰

| å®éªŒID | æ–‡ä»¶/ç›®å½• | ç±»å‹ | å…³é”®é…ç½® | ä¸»è¦æŒ‡æ ‡ | é“¾æ¥ |
|-------|-----------|------|----------|----------|------|
| E01 | exp_lightgbm_hyperparam_sweep_20251129.md | è¶…å‚æ•°ç½‘æ ¼æœç´¢ | 180 é…ç½®ç»„åˆ, 32k æ•°æ® | $R^2_{\text{max}}=0.9982$ | [è¯¦æƒ…](exp_lightgbm_hyperparam_sweep_20251129.md) |
| img/ | img/ | å›¾è¡¨ç›®å½• | 6 å¼ æ ¸å¿ƒå›¾è¡¨ | - | [ç›®å½•](img/) |

> è¡¨æ ¼æŒ‰é‡è¦æ€§æ’åºã€‚

---

# 3. æ ¸å¿ƒå‘ç°ï¼ˆä¸­æ–‡Â·ä¸“ä¸šÂ·å‹ç¼©ï¼‰

## 3.1 å®è§‚ç»“è®º

| ç»“è®º | æ•°å€¼è¯æ® | è®¾è®¡å¯ç¤º |
|------|---------|---------|
| **`learning_rate` æœ€å…³é”®** | ä¸ $R^2$ ç›¸å…³ç³»æ•° +0.491 | å¿…é¡»ä½¿ç”¨ 0.05 æˆ– 0.1 |
| **å­˜åœ¨æœ€ä¼˜å¤æ‚åº¦åŒºé—´** | `num_leaves=31`, `depth=7` æœ€ä½³ | è¶…è¿‡ 128 å¶å­ä¼šè¿‡æ‹Ÿåˆ |
| **æ”¶ç›Šé€’å‡æ˜æ˜¾** | è¶…è¿‡ 60K æ€»å¶å­æ•°åæå‡æœ‰é™ | ä¸å¿…è¿½æ±‚æè‡´å¤æ‚åº¦ |
| **`n_estimators` å½±å“æœ€å°** | 1000â†’2000 ä»… +0.11%ï¼Œæ—¶é—´ +43% | 1000 æ£µæ ‘è¶³å¤Ÿ |

## 3.2 æ¨èé…ç½®

| åœºæ™¯ | é…ç½® | é¢„æœŸ $R^2$ | è®­ç»ƒæ—¶é—´ |
|------|------|-----------|----------|
| **é»˜è®¤æ¨è** | n=1000, leaves=31, depth=7, lr=0.05 | 0.9976 | 37s |
| **æœ€ä¼˜æ€§èƒ½** | n=2000, leaves=31, depth=7, lr=0.05 | 0.9982 | 68s |
| **å¿«é€ŸåŸå‹** | n=500, leaves=31, depth=5, lr=0.1 | 0.9970 | 15s |
| **æé€Ÿé…ç½®** | n=1000, leaves=128, depth=3, lr=0.1 | 0.9955 | 11s |

## 3.3 è¶…å‚æ•°é‡è¦æ€§æ’åº

| æ’å | è¶…å‚æ•° | ä¸ $R^2$ ç›¸å…³ç³»æ•° | å½±å“ç¨‹åº¦ |
|:----:|--------|:-----------------:|:--------:|
| 1 | `learning_rate` | **+0.491** | æœ€å…³é”® |
| 2 | `num_leaves` | +0.141 | ä¸­ç­‰ |
| 3 | `max_depth` | +0.124 | ä¸­ç­‰ |
| 4 | `n_estimators` | +0.080 | è¾ƒä½ |

## 3.4 å…³é”®æ•°å­—é€ŸæŸ¥

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| æœ€ä¼˜ $R^2$ | **0.9982** |
| æœ€ä¼˜ MAE | **0.0075** |
| æ€§ä»·æ¯”æœ€ä¼˜é…ç½® $R^2$ | 0.9976 @ 37s |
| æœ€å¿«é…ç½® $R^2$ | 0.9955 @ 11s |
| æœç´¢ç©ºé—´ | 180 é…ç½® |
| æ•°æ®é‡ | 32k |

---

# 4. å…³é”®å›¾è¡¨

> æ‰€æœ‰å›¾è¡¨ä½äº `img/` å­ç›®å½•ï¼š

| å›¾è¡¨ | æè¿° | æ–‡ä»¶ |
|------|------|------|
| è¯¯å·® vs æ¨¡å‹å¤§å° | æ€»å¶å­æ•°ä¸æµ‹è¯•è¯¯å·®å…³ç³» | [1_error_vs_model_size.png](img/1_error_vs_model_size.png) |
| è¯¯å·® vs è¶…å‚æ•° | å„è¶…å‚æ•°çš„ç®±çº¿å›¾ | [2_error_vs_hyperparams.png](img/2_error_vs_hyperparams.png) |
| è¶…å‚æ•°çƒ­åŠ›å›¾ | ç»„åˆé…ç½®çš„ $R^2$ çƒ­åŠ›å›¾ | [3_hyperparameter_heatmap.png](img/3_hyperparameter_heatmap.png) |
| æ•ˆç‡ vs æ€§èƒ½ | Pareto å‰æ²¿åˆ†æ | [4_efficiency_vs_performance.png](img/4_efficiency_vs_performance.png) |
| æ¨¡å‹å¤§å° vs æ—¶é—´ | å¤æ‚åº¦ä¸è®­ç»ƒæ—¶é—´å…³ç³» | [5_model_size_vs_time.png](img/5_model_size_vs_time.png) |
| æ”¶ç›Šé€’å‡æ›²çº¿ | æ—¶é—´æŠ•å…¥çš„è¾¹é™…æ”¶ç›Š | [6_time_vs_r2_diminishing_returns.png](img/6_time_vs_r2_diminishing_returns.png) |

---

# 5. ä¸‹ä¸€æ­¥å®éªŒè®¡åˆ’

| ä¼˜å…ˆçº§ | æ–¹å‘ | å…·ä½“ä»»åŠ¡ | é¢„æœŸæ”¶ç›Š | çŠ¶æ€ |
|--------|------|----------|----------|------|
| **P0** | ğŸ”„ **Noise Sweep (lr ä¸»è½´)** | åœ¨ noise=0.1/0.2/0.5/1.0 ä¸‹ï¼Œä»¥ lr ä¸ºä¸»è½´æ‰«å‚ | é‡åŒ– RÂ² ä¸Šé™ + lr æ¼‚ç§»è¶‹åŠ¿ | ğŸ”„ [ç«‹é¡¹ä¸­](./exp_lightgbm_noise_sweep_lr_20251204.md) |
| **P0** | 100k å…¬å¹³æ¯”è¾ƒ | ç”¨ 100k æ•°æ®é‡æ–°è®­ç»ƒ | ä¸ NN å…¬å¹³å¯¹æ¯” | â³ |
| **P1** | ç‰¹å¾é€‰æ‹© | ç»“åˆ Top-K æµ‹è¯•æ˜¯å¦èƒ½å‡å°‘è¿‡æ‹Ÿåˆ | å¯èƒ½æå‡é«˜å™ªå£°æ€§èƒ½ | â³ |
| **P1** | Early Stopping | ä½¿ç”¨éªŒè¯é›†æ—©åœ | è¿›ä¸€æ­¥å‡å°‘è®­ç»ƒæ—¶é—´ | â³ |

## 5.1 å½“å‰è¿›è¡Œä¸­å®éªŒ

### [VIT-20251204-lightgbm-noise-sweep-01](./exp_lightgbm_noise_sweep_lr_20251204.md)

**æ ¸å¿ƒé—®é¢˜**ï¼š
1. å„ noise level ä¸‹ LightGBM RÂ² ä¸Šé™æ˜¯å¤šå°‘ï¼Ÿ
2. æœ€ä¼˜ lr éšå™ªå£°å˜åŒ–è¶‹åŠ¿ï¼ˆå˜å¤§ = å¿«é€Ÿå¹³å‡ï¼Ÿå˜å° = ä¿å®ˆæ‹Ÿåˆï¼Ÿï¼‰
3. å°æ¨¡å‹çº¦æŸä¸‹ (n_estimators â‰¤ 100) LightGBM vs Ridge å·®å¤šå°‘ï¼Ÿ

**é…ç½®**ï¼š
- `learning_rate âˆˆ {0.02, 0.05, 0.1}` (ä¸»è½´)
- `num_leaves âˆˆ {15, 31, 63}`
- `n_estimators âˆˆ {50, 100}`
- æ¯ä¸ª noise level 18 ä¸ªç»„åˆï¼Œå…± 72 ä¸ªå®éªŒ

---

# 6. é™„å½•ï¼šæ‰€æœ‰å­å®éªŒç´¢å¼•

## 6.1 å®Œæ•´å®éªŒåˆ—è¡¨

| æ–‡ä»¶ | æ—¥æœŸ | ä¸»é¢˜ | é…ç½®æ•° | çŠ¶æ€ |
|------|------|------|--------|------|
| [exp_lightgbm_hyperparam_sweep_20251129.md](exp_lightgbm_hyperparam_sweep_20251129.md) | 2025-11-29 | è¶…å‚æ•°ç½‘æ ¼æœç´¢ | 180 | âœ… å®Œæˆ |
| [exp_lightgbm_noise_sweep_lr_20251204.md](./exp_lightgbm_noise_sweep_lr_20251204.md) | 2025-12-04 | Noise Sweep (lr ä¸»è½´) | 72 | ğŸ”„ ç«‹é¡¹ä¸­ |

## 6.2 ç›¸å…³å¤–éƒ¨æ–‡ä»¶

| ç±»å‹ | è·¯å¾„ |
|------|------|
| åŸå§‹æ•°æ® | `/home/swei20/VIT/results/lightgbm_sweep/sweep_results.csv` |
| å¯è§†åŒ–å›¾ | `/home/swei20/VIT/results/lightgbm_sweep/professional_viz/` |
| Sweet Spot åˆ†æ | `/home/swei20/VIT/results/lightgbm_sweep/sweetspot_config.csv` |

## 6.3 ä¸å…¶ä»–ç›®å½•çš„å…³è”

| ç›®å½• | å…³è”ä¸»é¢˜ | é“¾æ¥ |
|------|----------|------|
| `ridge/` | çº¿æ€§ baseline å¯¹æ¯” | [ridge_main](../ridge/ridge_main_20251130.md) |
| `NN/` | NN vs LightGBM å¯¹æ¯” | [NN_main](../NN/NN_main_20251130.md) |
| `noise/` | TopK ç‰¹å¾é€‰æ‹© + LightGBM | [noise_main](../noise/noise_main_20251130.md) |

## 6.4 æ¨èä»£ç é…ç½®

```python
# â­ æ¨èé»˜è®¤é…ç½®
LIGHTGBM_DEFAULT = {
    'n_estimators': 1000,
    'num_leaves': 31,
    'max_depth': 7,
    'learning_rate': 0.05,
    'boosting_type': 'gbdt',
    'objective': 'regression',
    'metric': 'mae',
    'verbose': -1,
    'n_jobs': -1,
    'random_state': 42
}
# é¢„æœŸ: RÂ² â‰ˆ 0.9976, MAE â‰ˆ 0.0099, Time â‰ˆ 37s
```

---

*æœ€åæ›´æ–°: 2025-11-30*  
*æ€»é…ç½®æ•°: 180 ä¸ªè¶…å‚æ•°ç»„åˆ*  
*æ ¸å¿ƒå‘ç°: learning_rate æ˜¯æœ€å…³é”®è¶…å‚æ•°ï¼Œæœ€ä¼˜é…ç½®å¯è¾¾ $R^2=0.9982$*

