# ğŸ“˜ LightGBM è¶…å‚æ•°æœç´¢å®éªŒæŠ¥å‘Š

---
> **å®éªŒåç§°ï¼š** LightGBM è¶…å‚æ•°ç½‘æ ¼æœç´¢ ($\log g$ é¢„æµ‹)  
> **å¯¹åº” MVPï¼š** LightGBM Baselineï¼ˆæ ‘æ¨¡å‹åŸºå‡†ï¼‰  
> **ä½œè€…ï¼š** Viska Wei  
> **æ—¥æœŸï¼š** 2025-11-29  
> **æ•°æ®ç‰ˆæœ¬ï¼š** 32K æ’æ˜Ÿå…‰è°± (4096 æ³¢é•¿é€šé“)  
> **æ¨¡å‹ç‰ˆæœ¬ï¼š** LightGBM v3.x  
> **çŠ¶æ€ï¼š** âœ… å·²å®Œæˆ

---

# âš¡ æ ¸å¿ƒç»“è®ºé€Ÿè§ˆï¼ˆä¾› main æå–ï¼‰

### ä¸€å¥è¯æ€»ç»“

> **LightGBM åœ¨ $\log g$ é¢„æµ‹ä¸­ï¼Œ`learning_rate` æ˜¯æœ€å…³é”®è¶…å‚æ•°ï¼ˆç›¸å…³ç³»æ•° +0.491ï¼‰ï¼Œæœ€ä¼˜é…ç½®å¯åœ¨ 37s å†…è¾¾åˆ° $R^2=0.9976$ï¼Œæè‡´é…ç½®è¾¾ $R^2=0.9982$ã€‚**

### å¯¹å‡è®¾çš„éªŒè¯

| éªŒè¯é—®é¢˜ | ç»“æœ | ç»“è®º |
|---------|------|------|
| `learning_rate` æ˜¯å¦æœ€å…³é”®ï¼Ÿ | âœ… ç›¸å…³ç³»æ•° +0.491 | æ˜¯ï¼Œè¿œé«˜äºå…¶ä»–å‚æ•° |
| `num_leaves` æ˜¯å¦å­˜åœ¨æœ€ä¼˜åŒºé—´ï¼Ÿ | âœ… 31-128 æœ€ä¼˜ï¼Œ256 ä¸‹é™ | è¿‡æ‹Ÿåˆå­˜åœ¨ |
| èƒ½å¦è¾¾åˆ° $R^2 \geq 0.998$ï¼Ÿ | âœ… æœ€ä¼˜ $R^2 = 0.9982$ | éªŒè¯æˆåŠŸ |

### è®¾è®¡å¯ç¤ºï¼ˆ1-2 æ¡ï¼‰

| å¯ç¤º | å…·ä½“å»ºè®® |
|------|---------|
| **é»˜è®¤é…ç½®** | `n_est=1000, leaves=31, depth=7, lr=0.05` |
| **é¿å…è¿‡æ‹Ÿåˆ** | ä¸è¦ä½¿ç”¨ `num_leaves > 128` |

### å…³é”®æ•°å­—

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| æœ€ä¼˜ $R^2$ | **0.9982** (n=2000, leaves=31, depth=7, lr=0.05) |
| æ€§ä»·æ¯”æœ€ä¼˜ | **0.9975** in 25s |
| æ¨èé»˜è®¤ | **0.9976** in 37s |
| `lr` ä¸ $R^2$ ç›¸å…³ç³»æ•° | **+0.491** |

---

# ğŸ“‘ ç›®å½•

- [1. ğŸ¯ ç›®æ ‡](#1--ç›®æ ‡)
- [2. ğŸ§ª å®éªŒè®¾è®¡](#2--å®éªŒè®¾è®¡experiment-design)
- [3. ğŸ“Š å®éªŒå›¾è¡¨](#3--å®éªŒå›¾è¡¨)
- [4. ğŸ’¡ å…³é”®æ´è§](#4--å…³é”®æ´è§key-insights)
- [5. ğŸ“ ç»“è®º](#5--ç»“è®ºconclusion)
- [6. ğŸ“ é™„å½•](#6--é™„å½•)

---

# 1. ğŸ¯ ç›®æ ‡

## 1.1 èƒŒæ™¯ä¸åŠ¨æœº

LightGBM ä½œä¸ºæ¢¯åº¦æå‡æ ‘æ¨¡å‹ï¼Œåœ¨ $\log g$ é¢„æµ‹ä»»åŠ¡ä¸­è¡¨ç°ä¼˜å¼‚ã€‚ç„¶è€Œï¼Œå…¶æ€§èƒ½é«˜åº¦ä¾èµ–è¶…å‚æ•°é…ç½®ã€‚æœ¬å®éªŒæ—¨åœ¨ï¼š

- **ç³»ç»Ÿæ€§æ¢ç´¢è¶…å‚æ•°ç©ºé—´**ï¼šç¡®å®šå„è¶…å‚æ•°å¯¹æ¨¡å‹æ€§èƒ½çš„å½±å“ç¨‹åº¦
- **æ‰¾åˆ°æœ€ä¼˜é…ç½®**ï¼šä¸ºç”Ÿäº§ç¯å¢ƒæä¾›å¯é çš„é»˜è®¤å‚æ•°
- **ç†è§£æ€§èƒ½-æ•ˆç‡æƒè¡¡**ï¼šåœ¨è®­ç»ƒæ—¶é—´çº¦æŸä¸‹æ‰¾åˆ° Pareto æœ€ä¼˜é…ç½®
- **æŒ‡å¯¼åç»­å®éªŒè®¾è®¡**ï¼šä¸ºå™ªå£°é²æ£’æ€§ã€ç‰¹å¾é€‰æ‹©ç­‰å®éªŒæä¾›åŸºçº¿

## 1.2 æ ¸å¿ƒå‡è®¾

> **LightGBM çš„æ€§èƒ½ä¸»è¦ç”± `learning_rate` å†³å®šï¼Œè€Œæ¨¡å‹å¤æ‚åº¦å‚æ•° (`num_leaves`, `max_depth`) å­˜åœ¨æœ€ä¼˜åŒºé—´ï¼Œè¶…è¿‡åä¼šå‡ºç°è¿‡æ‹Ÿåˆã€‚**

å¦‚æœå‡è®¾æˆç«‹ï¼Œæ„å‘³ç€ï¼š
- å¯ä»¥ç”¨è¾ƒå°çš„æ¨¡å‹å¤æ‚åº¦è¾¾åˆ°æ¥è¿‘æœ€ä¼˜çš„æ€§èƒ½
- è®­ç»ƒæ—¶é—´å¯ä»¥æ˜¾è‘—ç¼©çŸ­è€Œä¸ç‰ºç‰²å¤ªå¤šç²¾åº¦
- å­˜åœ¨æ˜ç¡®çš„è¶…å‚æ•°æ¨èé…ç½®

å¦‚æœå‡è®¾ä¸æˆç«‹ï¼Œåˆ™éœ€è¦ï¼š
- æ›´ç²¾ç»†çš„è¶…å‚æ•°æœç´¢ï¼ˆå¦‚è´å¶æ–¯ä¼˜åŒ–ï¼‰
- è€ƒè™‘è¶…å‚æ•°ä¹‹é—´çš„äº¤äº’æ•ˆåº”

## 1.3 éªŒè¯é—®é¢˜

| # | é—®é¢˜ | éªŒè¯ç›®æ ‡ | ç»“æœ |
|---|------|---------|------|
| Q1 | `learning_rate` ä¸ $R^2$ çš„ç›¸å…³æ€§æ˜¯å¦æœ€é«˜ï¼Ÿ | ç¡®å®šæœ€å…³é”®è¶…å‚æ•° | âœ… ç›¸å…³ç³»æ•° +0.491ï¼Œæœ€é«˜ |
| Q2 | `num_leaves` æ˜¯å¦å­˜åœ¨æœ€ä¼˜åŒºé—´ï¼Ÿ | éªŒè¯è¿‡æ‹Ÿåˆå‡è®¾ | âœ… 31-128 æœ€ä¼˜ï¼Œ256 ä¸‹é™ |
| Q3 | `n_estimators` ä» 1000â†’2000 æå‡å¤šå°‘ï¼Ÿ | è¯„ä¼°è¾¹é™…æ”¶ç›Š | âœ… ä»… +0.11%ï¼Œæ€§ä»·æ¯”ä½ |
| Q4 | æœ€ä¼˜é…ç½®èƒ½å¦è¾¾åˆ° $R^2 \geq 0.998$ï¼Ÿ | ç¡®å®šæ€§èƒ½ä¸Šé™ | âœ… æœ€ä¼˜ $R^2 = 0.9982$ |
| Q5 | æ˜¯å¦å­˜åœ¨ <30s ä¸” $R^2 > 0.995$ çš„é…ç½®ï¼Ÿ | å¿«é€Ÿæ¨æ–­å¯è¡Œæ€§ | âœ… 25s è¾¾åˆ° $R^2 = 0.9975$ |

## 1.4 ç»“è®ºæ‘˜è¦ï¼ˆå®éªŒåå¡«å†™ï¼‰

### 1.4.1 å®éªŒç»“è®º

| ç»“è®º | è¯´æ˜ |
|------|------|
| **`learning_rate` æœ€å…³é”®** | ä¸ $R^2$ ç›¸å…³ç³»æ•° +0.491ï¼Œå¿…é¡»ä½¿ç”¨ 0.05 æˆ– 0.1 |
| **å­˜åœ¨æœ€ä¼˜å¤æ‚åº¦åŒºé—´** | `num_leaves=31`, `max_depth=7` æ˜¯æœ€ä½³å¹³è¡¡ç‚¹ |
| **æ”¶ç›Šé€’å‡æ˜æ˜¾** | è¶…è¿‡ 60K æ€»å¶å­æ•°åæ€§èƒ½æå‡æœ‰é™ |
| **`n_estimators` å½±å“æœ€å°** | 1000 æ£µæ ‘é€šå¸¸è¶³å¤Ÿï¼ŒåŠ å€ä»…æå‡ 0.11% |

### 1.4.2 è®¾è®¡å¯ç¤º

| è®¾è®¡åŸåˆ™ | å…·ä½“å»ºè®® |
|---------|---------|
| **é»˜è®¤é…ç½®** | `n_est=1000, leaves=31, depth=7, lr=0.05` |
| **å¿«é€ŸåŸå‹** | `n_est=500, leaves=31, depth=5, lr=0.1` |
| **é¿å…è¿‡æ‹Ÿåˆ** | ä¸è¦ä½¿ç”¨ `num_leaves > 128` |
| **é¿å…æ¬ æ‹Ÿåˆ** | ä¸è¦ä½¿ç”¨ `learning_rate = 0.01` |

> **ä¸€å¥è¯æ€»ç»“**ï¼šLightGBM åœ¨ $\log g$ é¢„æµ‹ä¸­ï¼Œä½¿ç”¨ `learning_rate=0.05, num_leaves=31, max_depth=7` å¯åœ¨ 37 ç§’å†…è¾¾åˆ° $R^2=0.9976$ï¼Œè€Œè¿½æ±‚æè‡´æ€§èƒ½çš„é…ç½®å¯è¾¾ $R^2=0.9982$ã€‚

---

# 2. ğŸ§ª å®éªŒè®¾è®¡ï¼ˆExperiment Designï¼‰

## 2.1 æ•°æ®ï¼ˆDataï¼‰

- **è®­ç»ƒæ ·æœ¬æ•°**ï¼š~25,600 (80% of 32K)
- **éªŒè¯æ ·æœ¬æ•°**ï¼š~3,200 (10%)
- **æµ‹è¯•æ ·æœ¬æ•°**ï¼š~3,200 (10%)
- **ç‰¹å¾ç»´åº¦**ï¼š4096 (å…¨å…‰è°±)
- **æ ‡ç­¾å‚æ•°**ï¼š$\log g$ (è¡¨é¢é‡åŠ›)
- **å™ªå£°æ¨¡å‹**ï¼šæ— å™ªå£° ($\sigma = 0$)

## 2.2 ä½¿ç”¨çš„ç‰¹å¾ç±»å‹

- **Input**: åŸå§‹å…‰è°± flux (4096 ç»´)
- **æ— ç‰¹å¾é€‰æ‹©**: ä½¿ç”¨å…¨éƒ¨æ³¢é•¿é€šé“
- **æ— é¢„å¤„ç†**: ç›´æ¥è¾“å…¥ LightGBM

## 2.3 æ¨¡å‹ä¸ç®—æ³•ï¼ˆModel & Algorithmï¼‰

### LightGBM (Gradient Boosting Decision Tree)

$$
\hat{y} = \sum_{m=1}^{M} f_m(x), \quad f_m \in \mathcal{F}
$$

å…¶ä¸­ $M$ ä¸ºæ ‘çš„æ•°é‡ (`n_estimators`)ï¼Œ$\mathcal{F}$ ä¸ºå›å½’æ ‘ç©ºé—´ã€‚

**å…³é”®è¶…å‚æ•°**:
- `n_estimators`: æ ‘çš„æ•°é‡
- `num_leaves`: æ¯æ£µæ ‘çš„æœ€å¤§å¶å­æ•°
- `max_depth`: æ ‘çš„æœ€å¤§æ·±åº¦ (-1 è¡¨ç¤ºæ— é™åˆ¶)
- `learning_rate`: å­¦ä¹ ç‡ï¼ˆæ”¶ç¼©å› å­ï¼‰

## 2.4 è¶…å‚æ•°ï¼ˆHyperparametersï¼‰

### æœç´¢ç©ºé—´

| è¶…å‚æ•° | æœç´¢èŒƒå›´ | å€™é€‰å€¼æ•°é‡ |
|--------|----------|------------|
| `n_estimators` | [1000, 2000] | 2 |
| `num_leaves` | [8, 16, 31, 64, 128, 256] | 6 |
| `max_depth` | [3, 5, 7, 10, -1] | 5 |
| `learning_rate` | [0.01, 0.05, 0.1] | 3 |
| **æ€»ç»„åˆæ•°** | $2 \times 6 \times 5 \times 3$ | **180** |

### å›ºå®šå‚æ•°

```python
{
    'boosting_type': 'gbdt',
    'objective': 'regression',
    'metric': 'mae',
    'verbose': -1,
    'n_jobs': -1,
    'random_state': 42
}
```

---

# 3. ğŸ“Š å®éªŒå›¾è¡¨

### å›¾ 1ï¼šè¯¯å·® vs æ¨¡å‹å¤§å°
![å›¾ç‰‡](img/1_error_vs_model_size.png)

**Figure 1. æ¨¡å‹å¤§å°ï¼ˆæ€»å¶å­æ•°ï¼‰ä¸æµ‹è¯•è¯¯å·®çš„å…³ç³»**

**å…³é”®è§‚å¯Ÿ**ï¼š
- æ€»å¶å­æ•°åœ¨ 30K-100K åŒºé—´æ€§èƒ½æœ€ä¼˜
- è¶…è¿‡ 100K åè¾¹é™…æ”¶ç›Šé€’å‡
- å°äº 10K æ—¶æ¨¡å‹å®¹é‡ä¸è¶³

---

### å›¾ 2ï¼šè¯¯å·® vs è¶…å‚æ•°
![å›¾ç‰‡](img/2_error_vs_hyperparams.png)

**Figure 2. å„è¶…å‚æ•°å¯¹æµ‹è¯•è¯¯å·®çš„å½±å“ï¼ˆç®±çº¿å›¾ï¼‰**

**å…³é”®è§‚å¯Ÿ**ï¼š
- `learning_rate=0.01` çš„è¯¯å·®æ˜¾è‘—é«˜äºå…¶ä»–å€¼
- `num_leaves=256` å‡ºç°æ€§èƒ½ä¸‹é™
- `max_depth` å½±å“ç›¸å¯¹è¾ƒå°

---

### å›¾ 3ï¼šè¶…å‚æ•°çƒ­åŠ›å›¾
![å›¾ç‰‡](img/3_hyperparameter_heatmap.png)

**Figure 3. è¶…å‚æ•°ç»„åˆçš„ $R^2$ çƒ­åŠ›å›¾**

**å…³é”®è§‚å¯Ÿ**ï¼š
- é»„è‰²åŒºåŸŸï¼ˆé«˜ $R^2$ï¼‰é›†ä¸­åœ¨ `lr=0.05/0.1` è¡Œ
- `num_leaves=31-64` åˆ—é¢œè‰²æœ€æ·±
- å­˜åœ¨æ˜ç¡®çš„æœ€ä¼˜åŒºåŸŸ

---

### å›¾ 4ï¼šæ•ˆç‡ vs æ€§èƒ½
![å›¾ç‰‡](img/4_efficiency_vs_performance.png)

**Figure 4. æ•ˆç‡-æ€§èƒ½æƒè¡¡ï¼ˆPareto å‰æ²¿ï¼‰**

**å…³é”®è§‚å¯Ÿ**ï¼š
- Pareto æœ€ä¼˜é…ç½®å½¢æˆæ¸…æ™°çš„å‰æ²¿çº¿
- 50-70 ç§’æ˜¯ sweet spot
- è¶…è¿‡ 100 ç§’åæ”¶ç›Šæä½

---

### å›¾ 5ï¼šæ¨¡å‹å¤§å° vs è®­ç»ƒæ—¶é—´
![å›¾ç‰‡](img/5_model_size_vs_time.png)

**Figure 5. æ¨¡å‹å¤æ‚åº¦ä¸è®­ç»ƒæ—¶é—´çš„å…³ç³»**

**å…³é”®è§‚å¯Ÿ**ï¼š
- è®­ç»ƒæ—¶é—´ä¸æ€»å¶å­æ•°è¿‘ä¼¼çº¿æ€§å…³ç³»
- `num_leaves=256` å¯¼è‡´è®­ç»ƒæ—¶é—´æ€¥å‰§å¢åŠ 

---

### å›¾ 6ï¼šæ”¶ç›Šé€’å‡æ›²çº¿
![å›¾ç‰‡](img/6_time_vs_r2_diminishing_returns.png)

**Figure 6. æ—¶é—´æŠ•å…¥çš„æ”¶ç›Šé€’å‡æ›²çº¿**

**å…³é”®è§‚å¯Ÿ**ï¼š
- æ‹ç‚¹å‡ºç°åœ¨çº¦ 50-70 ç§’
- è¶…è¿‡ 100 ç§’åæ›²çº¿è¶‹äºå¹³å¦
- å­˜åœ¨æ˜ç¡®çš„ sweet spot

---

# 4. ğŸ’¡ å…³é”®æ´è§ï¼ˆKey Insightsï¼‰

### 4.1 å®è§‚å±‚æ´è§ï¼ˆç”¨äºæŒ‡å¯¼ Neural Network æ¶æ„è®¾è®¡ï¼‰

1. **$\log g$ é¢„æµ‹çš„éçº¿æ€§æˆåˆ†æœ‰é™**: LightGBM è¾¾åˆ° $R^2=0.9982$ï¼Œä¸çº¿æ€§æ¨¡å‹çš„ $R^2 \approx 0.97$ å·®è·ä¸å¤§ï¼Œè¯´æ˜ä¸»è¦ä¿¡æ¯åœ¨çº¿æ€§å­ç©ºé—´
2. **æ¨¡å‹å¤æ‚åº¦å­˜åœ¨ä¸Šé™**: è¶…è¿‡æŸä¸ªå¤æ‚åº¦ååè€Œè¿‡æ‹Ÿåˆï¼ŒNN è®¾è®¡æ—¶éœ€è¦è€ƒè™‘æ­£åˆ™åŒ–
3. **ç‰¹å¾ç©ºé—´å†—ä½™åº¦é«˜**: å³ä½¿ä½¿ç”¨ç®€å•çš„æ ‘æ¨¡å‹ä¹Ÿèƒ½è¾¾åˆ°æé«˜ç²¾åº¦

### 4.2 æ¨¡å‹å±‚æ´è§ï¼ˆç”¨äºä¼˜åŒ–æ¨¡å‹ï¼‰

1. **`learning_rate` æ˜¯æœ€æ•æ„Ÿå‚æ•°**: 
   - `lr=0.01` å¯¼è‡´æ¬ æ‹Ÿåˆï¼ˆ$R^2$ ä¸‹é™ 0.7%ï¼‰
   - `lr=0.05` å’Œ `lr=0.1` æ€§èƒ½æ¥è¿‘ï¼Œä½† 0.05 æ›´ç¨³å®š

2. **`num_leaves` å­˜åœ¨æœ€ä¼˜åŒºé—´**:
   - å¤ªå° (â‰¤8): æ¨¡å‹å®¹é‡ä¸è¶³
   - å¤ªå¤§ (256): è¿‡æ‹Ÿåˆï¼Œæ€§èƒ½åè€Œä¸‹é™
   - æœ€ä¼˜: 31-128

3. **`n_estimators` è¾¹é™…æ•ˆç›Šä½**:
   - 1000â†’2000: $R^2$ ä»…æå‡ 0.11%ï¼Œæ—¶é—´å¢åŠ  43%
   - å»ºè®®ä½¿ç”¨ Early Stopping è€Œéå›ºå®šå¤§æ•°å€¼

### 4.3 å®éªŒå±‚ç»†èŠ‚æ´è§

1. **æœ€ä¼˜é…ç½®**: `n_est=2000, leaves=31, depth=7, lr=0.05` â†’ $R^2=0.9982$
2. **æ€§ä»·æ¯”æœ€ä¼˜**: `n_est=1000, leaves=31, depth=5, lr=0.1` â†’ $R^2=0.9975$, 25s
3. **è¿‡æ‹Ÿåˆä¿¡å·**: `num_leaves=256, depth=-1` ç»„åˆå‡ºç°æ€§èƒ½ä¸‹é™
4. **è®­ç»ƒç¨³å®šæ€§**: `lr=0.05` çš„ $R^2$ æ ‡å‡†å·®æœ€ä½ (0.0013)

---

# 5. ğŸ“ ç»“è®ºï¼ˆConclusionï¼‰

## 5.1 æ ¸å¿ƒå‘ç°

> **LightGBM åœ¨ $\log g$ é¢„æµ‹ä¸­ï¼Œ`learning_rate` æ˜¯æœ€å…³é”®è¶…å‚æ•°ï¼Œè€Œæ¨¡å‹å¤æ‚åº¦å­˜åœ¨æ˜ç¡®çš„æœ€ä¼˜åŒºé—´ï¼ˆ`num_leaves=31-128`ï¼‰ï¼Œè¶…è¿‡åå‡ºç°è¿‡æ‹Ÿåˆã€‚**

- âŒ åŸå‡è®¾: å¢åŠ æ¨¡å‹å¤æ‚åº¦æ€»èƒ½æå‡æ€§èƒ½
- âœ… å®éªŒç»“æœ: å­˜åœ¨æœ€ä¼˜å¤æ‚åº¦åŒºé—´ï¼Œ`num_leaves=256` åè€Œä¸‹é™

## 5.2 å…³é”®ç»“è®ºï¼ˆ2-4 æ¡ï¼‰

| # | ç»“è®º | è¯æ® |
|---|------|------|
| 1 | **`learning_rate` æœ€å…³é”®** | ä¸ $R^2$ ç›¸å…³ç³»æ•° +0.491ï¼Œè¿œé«˜äºå…¶ä»–å‚æ•° |
| 2 | **æœ€ä¼˜å¤æ‚åº¦åŒºé—´å­˜åœ¨** | `num_leaves=31` è¾¾ $R^2=0.9982$ï¼Œ256 é™è‡³ 0.9969 |
| 3 | **æ”¶ç›Šé€’å‡æ˜æ˜¾** | è®­ç»ƒæ—¶é—´ 25sâ†’68sï¼Œ$R^2$ ä»… 0.9975â†’0.9982 |
| 4 | **1000 æ£µæ ‘è¶³å¤Ÿ** | åŠ å€ä»…æå‡ 0.11%ï¼Œä¸å€¼å¾— 43% çš„æ—¶é—´å¼€é”€ |

## 5.3 è®¾è®¡å¯ç¤º

### æ¶æ„åŸåˆ™

| åŸåˆ™ | å»ºè®® | åŸå›  |
|------|------|------|
| é»˜è®¤å­¦ä¹ ç‡ | `lr=0.05` | æ€§èƒ½æœ€ä¼˜ä¸”ç¨³å®šæ€§æœ€å¥½ |
| å¶å­æ•°é‡ | `num_leaves=31` | æ€§ä»·æ¯”æœ€é«˜çš„å¹³è¡¡ç‚¹ |
| æ ‘æ·±åº¦ | `max_depth=7` | è¶…è¿‡ 7 æ— æ˜¾è‘—æ”¶ç›Š |
| æ ‘æ•°é‡ | `n_estimators=1000` | é…åˆ Early Stopping ä½¿ç”¨ |

### âš ï¸ å¸¸è§é™·é˜±

| å¸¸è§åšæ³• | å®éªŒè¯æ® |
|----------|----------|
| "ç”¨å¾ˆå°çš„ learning\_rate æ›´ç¨³å®š" | `lr=0.01` å¯¼è‡´æ¬ æ‹Ÿåˆï¼Œ$R^2$ ä¸‹é™ 0.7% |
| "num\_leaves è¶Šå¤§è¶Šå¥½" | 256 å¶å­å‡ºç°è¿‡æ‹Ÿåˆï¼Œæ€§èƒ½åè€Œä¸‹é™ |
| "å¤šåŠ æ ‘æ€»æ²¡é”™" | 1000â†’2000 ä»…æå‡ 0.11%ï¼Œæ—¶é—´å¢åŠ  43% |

## 5.4 ç‰©ç†è§£é‡Šï¼ˆå¯é€‰ï¼‰

- **$\log g$ ä¿¡æ¯ä¸»è¦åœ¨ä½é¢‘æˆåˆ†**: è§£é‡Šäº†ä¸ºä»€ä¹ˆä¸­ç­‰å¤æ‚åº¦çš„æ¨¡å‹å°±è¶³å¤Ÿ
- **å…‰è°±ç‰¹å¾å­˜åœ¨å†—ä½™**: å¤šä¸ªæ³¢é•¿æºå¸¦ç›¸ä¼¼ä¿¡æ¯ï¼Œè¿‡å¤šå¶å­å¯¼è‡´è¿‡æ‹Ÿåˆå™ªå£°
- **Boosting çš„æ”¶ç¼©æ•ˆåº”**: å°å­¦ä¹ ç‡éœ€è¦æ›´å¤šæ ‘æ‰èƒ½è¾¾åˆ°åŒç­‰æ€§èƒ½

## 5.5 å…³é”®æ•°å­—é€ŸæŸ¥

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| æœ€ä¼˜ $R^2$ | **0.9982** (`n=2000, leaves=31, depth=7, lr=0.05`) |
| æ€§ä»·æ¯”æœ€ä¼˜ | **0.9975** in 25s (`n=1000, leaves=31, depth=5, lr=0.1`) |
| æœ€å¿«é…ç½® | **0.9955** in 11s (`n=1000, leaves=128, depth=3, lr=0.1`) |
| æœ€ä½ MAE | **0.0075** (`n=1000, leaves=128, depth=-1, lr=0.05`) |
| æ¨èé»˜è®¤ | **0.9976** in 37s (`n=1000, leaves=31, depth=7, lr=0.05`) |

## 5.6 ä¸‹ä¸€æ­¥å·¥ä½œ

| æ–¹å‘ | å…·ä½“ä»»åŠ¡ |
|------|----------|
| **å™ªå£°é²æ£’æ€§** | æµ‹è¯•æœ€ä¼˜é…ç½®åœ¨ $\sigma=0.5, 1.0, 2.0$ ä¸‹çš„æ€§èƒ½è¡°å‡ |
| **ç‰¹å¾é€‰æ‹©** | ç»“åˆ Top-K ç‰¹å¾é€‰æ‹©ï¼Œæµ‹è¯•æ˜¯å¦èƒ½å‡å°‘è¿‡æ‹Ÿåˆ |
| **Early Stopping** | ä½¿ç”¨éªŒè¯é›†æ—©åœï¼Œå¯èƒ½è¿›ä¸€æ­¥å‡å°‘è®­ç»ƒæ—¶é—´ |

---

# 6. ğŸ“ é™„å½•

## 6.1 æ•°å€¼ç»“æœè¡¨ï¼ˆResultsï¼‰

### 6.1.1 æ•´ä½“æ€§èƒ½ç»Ÿè®¡

| æŒ‡æ ‡ | å‡å€¼ | æ ‡å‡†å·® | æœ€å°å€¼ | æœ€å¤§å€¼ |
|------|------|--------|--------|--------|
| Test $R^2$ | 0.9941 | 0.0058 | 0.9760 | 0.9982 |
| Test MAE | 0.0116 | 0.0046 | 0.0070 | 0.0346 |
| Test RMSE | 0.0166 | 0.0060 | 0.0127 | 0.0453 |
| Train Time (s) | 73.9 | 131.4 | 11.0 | 629.2 |

### 6.1.2 Top 10 æœ€ä½³é…ç½®

| Rank | n\_est | leaves | depth | lr | Test $R^2$ | Test MAE | Test RMSE | Time(s) | Total Leaves |
|:----:|:------:|:------:|:-----:|:----:|:----------:|:--------:|:---------:|:-------:|:------------:|
| 1 | 2000 | 31 | 7 | 0.05 | **0.9982** | 0.0085 | 0.0126 | 67.8 | 61,110 |
| 2 | 1000 | 128 | -1 | 0.05 | 0.9981 | 0.0075 | 0.0127 | 160.6 | 127,360 |
| 3 | 2000 | 31 | 10 | 0.05 | 0.9980 | 0.0089 | 0.0131 | 78.3 | 61,993 |
| 4 | 2000 | 128 | 10 | 0.05 | 0.9980 | 0.0075 | 0.0131 | 180.0 | 184,070 |
| 5 | 2000 | 128 | -1 | 0.05 | 0.9979 | 0.0075 | 0.0132 | 279.8 | 234,624 |
| 6 | 1000 | 128 | 10 | 0.05 | 0.9979 | 0.0078 | 0.0134 | 96.4 | 93,937 |
| 7 | 2000 | 16 | 5 | 0.05 | 0.9979 | 0.0097 | 0.0134 | 36.7 | 31,817 |
| 8 | 2000 | 31 | 5 | 0.1 | 0.9978 | 0.0099 | 0.0137 | 43.3 | 45,843 |
| 9 | 2000 | 16 | 7 | 0.05 | 0.9978 | 0.0097 | 0.0136 | 42.9 | 31,950 |
| 10 | 2000 | 16 | 10 | 0.05 | 0.9978 | 0.0096 | 0.0136 | 45.3 | 32,000 |

### 6.1.3 Learning Rate å½±å“åˆ†æ

| learning\_rate | å¹³å‡ $R^2$ | $R^2$ æ ‡å‡†å·® | å¹³å‡ MAE | å¹³å‡ Time(s) | è¯„ä»· |
|:--------------:|:----------:|:------------:|:--------:|:------------:|:----:|
| 0.01 | 0.9894 | 0.0053 | 0.0175 | 97.1 | æ¬ æ‹Ÿåˆ |
| **0.05** | **0.9962** | **0.0013** | **0.0101** | 75.7 | **æœ€ä¼˜** |
| 0.1 | 0.9967 | 0.0007 | 0.0111 | 48.8 | æ¬¡ä¼˜ |

### 6.1.4 num\_leaves å½±å“åˆ†æ (lr=0.05, depth=-1)

| num\_leaves | n\_est=1000 $R^2$ | n\_est=2000 $R^2$ | å¹³å‡ Time(s) |
|:-----------:|:-----------------:|:-----------------:|:------------:|
| 8 | 0.9953 | 0.9971 | 28.6 |
| 16 | 0.9971 | 0.9978 | 35.5 |
| **31** | 0.9975 | **0.9979** | 62.4 |
| 64 | 0.9976 | 0.9978 | 115.0 |
| 128 | 0.9981 | 0.9979 | 220.2 |
| 256 | 0.9967 | 0.9969 | 281.9 |

### 6.1.5 max\_depth å½±å“åˆ†æ (lr=0.05, leaves=31)

| max\_depth | n\_est=1000 $R^2$ | n\_est=2000 $R^2$ | è¯´æ˜ |
|:----------:|:-----------------:|:-----------------:|:----:|
| 3 | 0.9938 | 0.9962 | æ¬ æ‹Ÿåˆ |
| 5 | 0.9970 | 0.9975 | è¾ƒå¥½ |
| **7** | 0.9976 | **0.9982** | **æœ€ä½³** |
| 10 | 0.9975 | 0.9980 | æ¥è¿‘æœ€ä½³ |
| -1 | 0.9975 | 0.9979 | æ— é™åˆ¶ |

### 6.1.6 n\_estimators å½±å“åˆ†æ

| n\_estimators | å¹³å‡ $R^2$ | å¹³å‡ Time(s) | ç›¸å¯¹æå‡ | æ—¶é—´å¢åŠ  |
|:-------------:|:----------:|:------------:|:--------:|:--------:|
| 1000 | 0.9935 | 60.7 | baseline | baseline |
| 2000 | 0.9946 | 87.0 | +0.11% | +43% |

### 6.1.7 æ¨¡å‹å¤æ‚åº¦ vs æ€§èƒ½

| æ€»å¶å­æ•°èŒƒå›´ | å¹³å‡ $R^2$ | æœ€ä½³ $R^2$ | å…¸å‹é…ç½® | å»ºè®® |
|:------------:|:----------:|:----------:|:--------:|:----:|
| <10K | 0.9918 | 0.9973 | leavesâ‰¤8 | æ¬ æ‹Ÿåˆ |
| 10K-50K | 0.9963 | 0.9982 | leaves=16~31 | âœ… æ¨è |
| 50K-100K | 0.9974 | 0.9982 | leaves=31~64 | âœ… æ¨è |
| 100K-200K | 0.9974 | 0.9981 | leaves=64~128 | è¾¹é™…æ”¶ç›Šä½ |
| >200K | 0.9971 | 0.9979 | leaves=128~256 | âš ï¸ è¿‡æ‹Ÿåˆé£é™© |

### 6.1.8 Pareto æœ€ä¼˜é…ç½® (æ—¶é—´é¢„ç®—)

| æ—¶é—´é¢„ç®— | æœ€ä½³é…ç½® (n, leaves, depth, lr) | $R^2$ | å®é™…æ—¶é—´ |
|:--------:|:-------------------------------:|:-----:|:--------:|
| â‰¤15s | (1000, 128, 3, 0.1) | 0.9955 | 11.0s |
| â‰¤30s | (1000, 31, 5, 0.1) | 0.9975 | 25.4s |
| â‰¤50s | (2000, 16, 5, 0.05) | 0.9979 | 36.7s |
| â‰¤100s | (2000, 31, 7, 0.05) | **0.9982** | 67.8s |

### 6.1.9 è¯¦ç»†ç»“æœè¡¨: n\_estimators = 1000, learning\_rate = 0.05

| leaves | depth=3 | depth=5 | depth=7 | depth=10 | depth=-1 |
|:------:|:-------:|:-------:|:-------:|:--------:|:--------:|
| 8 | 0.9939 | 0.9953 | 0.9954 | 0.9953 | 0.9953 |
| 16 | 0.9938 | 0.9970 | 0.9970 | 0.9971 | 0.9971 |
| 31 | 0.9938 | 0.9970 | 0.9976 | 0.9975 | 0.9975 |
| 64 | 0.9937 | 0.9973 | 0.9974 | 0.9977 | 0.9976 |
| 128 | 0.9938 | 0.9971 | 0.9977 | 0.9979 | 0.9981 |
| 256 | 0.9937 | 0.9972 | 0.9975 | 0.9977 | 0.9967 |

### 6.1.10 è¯¦ç»†ç»“æœè¡¨: n\_estimators = 2000, learning\_rate = 0.05

| leaves | depth=3 | depth=5 | depth=7 | depth=10 | depth=-1 |
|:------:|:-------:|:-------:|:-------:|:--------:|:--------:|
| 8 | 0.9962 | 0.9971 | 0.9971 | 0.9971 | 0.9971 |
| 16 | 0.9962 | 0.9979 | 0.9978 | 0.9978 | 0.9978 |
| 31 | 0.9962 | 0.9975 | **0.9982** | 0.9980 | 0.9979 |
| 64 | 0.9963 | 0.9977 | 0.9977 | 0.9978 | 0.9978 |
| 128 | 0.9961 | 0.9977 | 0.9977 | 0.9980 | 0.9979 |
| 256 | 0.9961 | 0.9978 | 0.9978 | 0.9976 | 0.9969 |

### 6.1.11 è¯¦ç»†ç»“æœè¡¨: n\_estimators = 1000, learning\_rate = 0.1

| leaves | depth=3 | depth=5 | depth=7 | depth=10 | depth=-1 |
|:------:|:-------:|:-------:|:-------:|:--------:|:--------:|
| 8 | 0.9954 | 0.9964 | 0.9961 | 0.9961 | 0.9962 |
| 16 | 0.9955 | 0.9973 | 0.9970 | 0.9971 | 0.9971 |
| 31 | 0.9954 | 0.9975 | 0.9972 | 0.9972 | 0.9973 |
| 64 | 0.9955 | 0.9970 | 0.9974 | 0.9968 | 0.9972 |
| 128 | 0.9955 | 0.9973 | 0.9972 | 0.9973 | 0.9966 |
| 256 | 0.9953 | 0.9970 | 0.9971 | 0.9967 | 0.9963 |

### 6.1.12 è¯¦ç»†ç»“æœè¡¨: n\_estimators = 1000, learning\_rate = 0.01

| leaves | depth=3 | depth=5 | depth=7 | depth=10 | depth=-1 |
|:------:|:-------:|:-------:|:-------:|:--------:|:--------:|
| 8 | 0.9760 | 0.9823 | 0.9830 | 0.9830 | 0.9830 |
| 16 | 0.9764 | 0.9903 | 0.9912 | 0.9917 | 0.9917 |
| 31 | 0.9762 | 0.9937 | 0.9946 | 0.9949 | 0.9951 |
| 64 | 0.9760 | 0.9935 | 0.9964 | 0.9966 | 0.9966 |
| 128 | 0.9763 | 0.9935 | 0.9968 | 0.9969 | 0.9972 |
| 256 | 0.9760 | 0.9935 | 0.9967 | 0.9971 | 0.9970 |

### 6.1.13 è¶…å‚æ•°é‡è¦æ€§æ’åº

| æ’å | è¶…å‚æ•° | ä¸ $R^2$ ç›¸å…³ç³»æ•° | å½±å“ç¨‹åº¦ |
|:----:|--------|:-----------------:|:--------:|
| 1 | `learning_rate` | **+0.491** | æœ€å…³é”® |
| 2 | `num_leaves` | +0.141 | ä¸­ç­‰ |
| 3 | `max_depth` | +0.124 | ä¸­ç­‰ |
| 4 | `n_estimators` | +0.080 | è¾ƒä½ |

### 6.1.14 æ¨èé…ç½®ä»£ç 

```python
# â­ æ¨èé»˜è®¤é…ç½®
LIGHTGBM_DEFAULT = {
    'n_estimators': 1000,
    'num_leaves': 31,
    'max_depth': 7,
    'learning_rate': 0.05,
    'boosting_type': 'gbdt',
    'objective': 'regression',
    'metric': 'mae',
    'verbose': -1,
    'n_jobs': -1,
    'random_state': 42
}
# é¢„æœŸ: RÂ² â‰ˆ 0.9976, MAE â‰ˆ 0.0099, Time â‰ˆ 37s

# ğŸ¯ æœ€ä¼˜æ€§èƒ½é…ç½®
LIGHTGBM_OPTIMAL = {
    'n_estimators': 2000,
    'num_leaves': 31,
    'max_depth': 7,
    'learning_rate': 0.05,
    'verbose': -1
}
# é¢„æœŸ: RÂ² â‰ˆ 0.9982, MAE â‰ˆ 0.0085, Time â‰ˆ 68s

# âš¡ å¿«é€ŸåŸå‹é…ç½®
LIGHTGBM_QUICK = {
    'n_estimators': 500,
    'num_leaves': 31,
    'max_depth': 5,
    'learning_rate': 0.1,
    'verbose': -1
}
# é¢„æœŸ: RÂ² â‰ˆ 0.9970, Time â‰ˆ 15s
```

## 6.2 å»ºè®®ç»˜å›¾ï¼ˆPlot Suggestionsï¼‰

### 6.2.1 è¶…å‚æ•°æ•æ„Ÿæ€§çƒ­åŠ›å›¾
- **ç›®çš„**ï¼šå±•ç¤ºå„è¶…å‚æ•°ç»„åˆçš„æ€§èƒ½åˆ†å¸ƒ
- **X è½´**ï¼š`num_leaves` (8, 16, 31, 64, 128, 256)
- **Y è½´**ï¼š`max_depth` (3, 5, 7, 10, -1)
- **å›¾ä¸Šæ ‡æ³¨**ï¼šåˆ† `learning_rate` å­å›¾ï¼Œé¢œè‰²è¡¨ç¤º Test $R^2$

### 6.2.2 Pareto å‰æ²¿å›¾
- **ç›®çš„**ï¼šå±•ç¤ºè®­ç»ƒæ—¶é—´ä¸æ€§èƒ½çš„æƒè¡¡
- **X è½´**ï¼šTraining Time (s)
- **Y è½´**ï¼šTest $R^2$
- **å›¾ä¸Šæ ‡æ³¨**ï¼šæ ‡æ³¨ Pareto æœ€ä¼˜ç‚¹åŠå…¶é…ç½®

### 6.2.3 æ”¶ç›Šé€’å‡æ›²çº¿
- **ç›®çš„**ï¼šå±•ç¤ºå¢åŠ å¤æ‚åº¦çš„è¾¹é™…æ”¶ç›Š
- **X è½´**ï¼šæ€»å¶å­æ•° (log scale)
- **Y è½´**ï¼šTest $R^2$
- **å›¾ä¸Šæ ‡æ³¨**ï¼šæ ‡æ³¨ sweet spot åŒºåŸŸ

## 6.3 ç›¸å…³æ–‡ä»¶

| ç±»å‹ | è·¯å¾„ |
|------|------|
| æœ¬åœ°å›¾è¡¨ | `img/` |
| åŸå§‹æ•°æ® | `/home/swei20/VIT/results/lightgbm_sweep/sweep_results.csv` |
| å¯è§†åŒ–å›¾ (åŸå§‹) | `/home/swei20/VIT/results/lightgbm_sweep/professional_viz/` |
| æ‘˜è¦æ–‡ä»¶ | `/home/swei20/VIT/results/lightgbm_sweep/summary.md` |
| Sweet spot åˆ†æ | `/home/swei20/VIT/results/lightgbm_sweep/sweetspot_config.csv` |

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: 2025-11-29*
