# ğŸ’¬ GPT è®¾è®¡ä¼šè¯å½’æ¡£ - Distill Encoder + NN

---
> **ä¼šè¯ IDï¼š** `session-20251201-distill-encoder-nn`  
> **æ—¥æœŸï¼š** 2025-12-01  
> **å‚ä¸ï¼š** Viska + GPT/Claude  
> **å…³è” mainï¼š** [distill_main_20251130.md](../distill_main_20251130.md)  
> **çŠ¶æ€ï¼š** âœ… å·²å½’æ¡£åˆ° kanban

---

# 1. ğŸ¯ èµ·ç‚¹ï¼šé—®é¢˜ & åŠ¨æœº

## 1.1 åŸå§‹åŠ¨æœº

> **ä¸ºä»€ä¹ˆä»Šå¤©åœ¨æƒ³è¿™ä¸ªé—®é¢˜ï¼Ÿ**

- **èƒŒæ™¯**ï¼šMVP 1.4 è¯æ˜äº† `enc_pre_latent + seg_mean_K8` å¯ä»¥æŠŠ $\log g$ çš„ $R^2$ ä» 0.22 æå‡åˆ° 0.55
- **é—®é¢˜**ï¼šRidge æ˜¯çº¿æ€§æ¨¡å‹ï¼Œèƒ½å¦ç”¨ MLP æ•æ‰æ›´å¤šéçº¿æ€§å…³ç³»ï¼Ÿ
- **ç›®æ ‡**ï¼šå®ç° Encoder + MLP Head ç«¯åˆ°ç«¯è®­ç»ƒï¼Œæµ‹è¯•æ˜¯å¦è¶…è¶Š Ridge baseline

## 1.2 GPT å¯¹è¯ä¸­çš„å…³é”®æ‘˜å½•

### ğŸ’ å…³é”®æ´è§ 1

> "BlindSpot encoder å·²ç»å­¦åˆ°äº†è¶³å¤Ÿå¥½çš„ç‰¹å¾è¡¨ç¤ºï¼Œåç»­åªéœ€è¦ä¸€ä¸ª MLP head æ¥è§£ç  $\log g$ï¼Œæ— éœ€ fine-tune encoderã€‚"

**å¯å‘**ï¼šå†»ç»“ encoder å¯ä»¥ç®€åŒ–è®­ç»ƒï¼Œå…ˆéªŒè¯ MLP æ˜¯å¦æœ‰æ•ˆ

### ğŸ’ å…³é”®æ´è§ 2

> "ç‰¹å¾ä¸ $\log g$ ä¹‹é—´å­˜åœ¨éçº¿æ€§å…³ç³»ï¼ŒRidge çš„çº¿æ€§å‡è®¾é™åˆ¶äº†é¢„æµ‹æ€§èƒ½ã€‚"

**å¯å‘**ï¼šMLP åº”è¯¥èƒ½è¶…è¶Š Ridge baseline

---

# 2. ğŸ’¡ MVP å€™é€‰åˆ—è¡¨

| MVP ID | ä¸€å¥è¯ç›®æ ‡ | è¦éªŒè¯çš„å‡è®¾/é—®é¢˜ | ç²—ç•¥å®éªŒæƒ³æ³• | é¢„ä¼°å¤æ‚åº¦ |
|--------|------------|-------------------|--------------|-----------|
| MVP-2.2a | å†»ç»“ encoder + MLP head | MLP èƒ½è¶…è¶Š Ridgeï¼Ÿ | å›ºå®š encoderï¼Œåªè®­ç»ƒ MLP | ğŸŸ¢ ç®€å• |
| MVP-2.2b | Fine-tune encoder + MLP | å¼€æ”¾ encoder èƒ½æå‡å¤šå°‘ï¼Ÿ | ç«¯åˆ°ç«¯è®­ç»ƒ | ğŸŸ¡ ä¸­ç­‰ |
| MVP-2.3 | Student è’¸é¦ | åªç”¨ flux èƒ½å¦å­¦åˆ° latentï¼Ÿ | è®­ç»ƒ fluxâ†’latent æ˜ å°„ | ğŸ”´ å¤æ‚ |

---

# 3. âœ… é€‰æ‹©è¦æ‰§è¡Œçš„å®éªŒ

## 3.1 æœ¬è½®å†³ç­–

| å†³ç­– | MVP | ç†ç”± |
|------|-----|------|
| âœ… **ç«‹åˆ»æ‰§è¡Œ** | MVP-2.2a | æœ€ç®€å•çš„éªŒè¯ï¼Œå…ˆçœ‹ MLP æ•ˆæœ |
| ğŸ•’ **ä¸‹ä¸€æ­¥** | MVP-2.2b | ç­‰å†»ç»“ç‰ˆæœ¬ç¡®è®¤æœ‰æ•ˆåå†å°è¯• |
| ğŸ•’ **ä»¥åå†è¯´** | MVP-2.3 | è’¸é¦éœ€è¦æ›´å¤šå‡†å¤‡å·¥ä½œ |

## 3.2 ç”Ÿæˆ experiment_id

| experiment_id | MVP | ä¼˜å…ˆçº§ | é¢„ä¼°æ—¶é—´ | å¤‡æ³¨ |
|---------------|-----|--------|---------|------|
| `BS-20251201-encoder-logg-01` | MVP-2.2a | ğŸ”´ P0 | ~3h | å†»ç»“ encoder + MLP |

---

# 4. ğŸ“ Prompt è‰ç¨¿åŒº

## 4.1 é’ˆå¯¹ `BS-20251201-encoder-logg-01` çš„ Prompt

```text
å®éªŒ ID: BS-20251201-encoder-logg-01
MVP: å†»ç»“ BlindSpot Encoder + MLP Head é¢„æµ‹ log_g
ä»“åº“: ~/BlindSpotDenoiser

ç›®æ ‡ï¼šå®ç° Encoder + MLP ç«¯åˆ°ç«¯è®­ç»ƒ
- åŠ è½½å·²è®­ç»ƒçš„ BlindSpot encoder (m215l9e48k25s1bn1d1ep5000)
- å†»ç»“ encoder å‚æ•°
- ä½¿ç”¨ enc_pre_latent + seg_mean_K8 æå–ç‰¹å¾ (384 ç»´)
- MLP head: 384 â†’ 256 â†’ 64 â†’ 1
- è®­ç»ƒ 100k samplesï¼ŒéªŒè¯ 1k samples

è¯·ï¼š
1. åˆ›å»º src/logg_from_encoder.py æ¨¡å‹å®šä¹‰
2. åˆ›å»º experiments/train_logg_from_encoder.py è®­ç»ƒè„šæœ¬
3. è®­ç»ƒå¹¶è¾“å‡ºï¼š
   - Train/Val Loss æ›²çº¿
   - Test RÂ², MAE, RMSE
   - ä¸ Ridge baseline (0.5516) å¯¹æ¯”
```

---

# 5. ğŸ“‹ ä¼šè¯å TODO

## 5.1 ç«‹å³æ‰§è¡Œ

- [x] æŠŠ experiment_id å¡«å…¥ kanban.md
- [x] å®ç°è®­ç»ƒä»£ç 
- [x] è¿è¡Œå®éªŒ

## 5.2 å®éªŒç»“æœ

**å®ŒæˆçŠ¶æ€**ï¼šâœ… å·²å®Œæˆ

**ç»“æœæ‘˜è¦**ï¼š
- Test RÂ² = **0.6117** (+10.9% vs Ridge 0.5516)
- éªŒè¯äº† MLP èƒ½æ•æ‰éçº¿æ€§å…³ç³»
- å†»ç»“ encoder æœ‰æ•ˆï¼Œæ— éœ€ fine-tune

**è¯¦ç»†æŠ¥å‘Š**ï¼š[exp_encoder_nn_logg_20251201.md](../exp_encoder_nn_logg_20251201.md)

---

# ğŸ“ ä¼šè¯å…ƒæ•°æ®

| å­—æ®µ | å€¼ |
|------|-----|
| **GPT æ¨¡å‹** | GPT-4o / Claude |
| **ä¼šè¯ä¸»é¢˜æ ‡ç­¾** | `#distill` `#encoder` `#mlp` |

---

*åˆ›å»ºæ—¶é—´: 2025-12-01*

