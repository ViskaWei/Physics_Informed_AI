# Train · log_g 实验主笔记（截至 2025-11-30）

- 本目录：`logg/train/`
- 最近更新时间：2025-11-30
- 写作风格参考：`/home/swei20/VIT/docs`
- 说明：此文件是该子目录所有实验的主索引、核心结论与未来计划。

---

# 目录

0. [问题重述](#0-问题重述)
1. [研究目标](#1-研究目标)
2. [实验地图（含超链接）](#2-实验地图含超链接)
3. [核心发现（中文·专业·压缩）](#3-核心发现中文专业压缩)
4. [关键图表](#4-关键图表)
5. [下一步实验计划](#5-下一步实验计划)
6. [附录：所有子实验索引](#6-附录所有子实验索引)

---

# 0. 问题重述

## 0.1 核心研究问题

> **训练超参数（验证集大小、batch size、learning rate schedule）如何影响 $\log g$ 预测模型的最终性能？**

这个问题决定了：
- **标准化训练配置**：为所有 NN 实验提供可复现的基础
- **资源分配策略**：如何在训练时间和性能之间权衡
- **噪声适应策略**：不同噪声水平是否需要不同的训练策略

## 0.2 对实验的直接影响

| 如果... | 则... |
|---------|-------|
| val_size 对性能影响很大 | 需要按噪声水平选择最优 val_size |
| 噪声水平影响最优配置 | 不同噪声实验需要不同的训练策略 |
| 时间成本可忽略 | 可以使用更大的验证集提高稳定性 |

---

# 1. 研究目标

本目录聚焦于 **训练策略与超参数优化**，核心问题是：

- 验证集大小对 Early Stopping 和模型选择有多大影响？
- 不同噪声水平下，最优验证集大小是否不同？
- 训练时间与模型性能的 trade-off 如何？

与 $\log g$ 总目标的关系：为所有 NN 实验提供**标准化的训练配置**建议。

---

# 2. 实验地图（含超链接）

| 实验ID | 文件/目录 | 类型 | 关键配置 | 主要指标 | 链接 |
|-------|-----------|------|----------|----------|------|
| E01 | exp_val_size_sweep_20251130.md | 验证集大小扫描 | val_size∈[128,10000], noise∈[0,1] | 最优 val_size 因噪声而异 | [详情](exp_val_size_sweep_20251130.md) |

> 表格按重要性排序。

---

# 3. 核心发现（中文·专业·压缩）

## 3.1 宏观结论

| 结论 | 数值证据 | 设计启示 |
|------|---------|---------|
| **噪声水平决定 val_size 策略** | noise=0 用小，noise>0 用大 | 按噪声配置 |
| **并非越大越好** | noise=1.0 时 val=4096 反而下降 | 存在最优点 |
| **时间成本可控** | 最大差异仅 3.5 分钟 | 可忽略 |

## 3.2 最优验证集大小推荐

| 噪声水平 | 最优 val_size | 最优 $R^2$ | 备注 |
|----------|---------------|-----------|------|
| 0.0 | **128** | 0.7951 | 干净数据无需大验证集 |
| 0.1 | **10000** | 0.7756 | 噪声数据需更多样本 |
| 1.0 | **512** | 0.5120 | 过大反而引入方差 |

## 3.3 设计建议

| 场景 | 推荐配置 | 原因 |
|------|----------|------|
| **单噪声实验** | 按上表选择 | 最优性能 |
| **多噪声实验** | val=4096 统一 | 折中方案 |
| **快速原型** | val=512 | 时间优先 |

## 3.4 关键数字速查

| 指标 | 值 |
|------|-----|
| 验证集大小范围 | 128 - 10000 |
| 时间差异 | 最大 ~3.5 分钟 |
| noise=0 最优 val_size | 128 |
| noise=0.1 最优 val_size | 10000 |
| noise=1.0 最优 val_size | 512 |

---

# 4. 关键图表

> 以下图表建议绘制：

| 图表 | 描述 | 状态 |
|------|------|------|
| val_size vs $R^2$ (by noise) | 不同噪声下验证集大小的影响 | TODO |
| 训练时间 vs val_size | 验证集大小与训练时间关系 | TODO |

---

# 5. 下一步实验计划

| 优先级 | 方向 | 具体任务 | 预期收益 |
|--------|------|----------|----------|
| **P1** | Batch Size 扫描 | batch_size ∈ [256, 512, 1024, 2048, 4096] | 找到最优训练效率 |
| **P1** | Learning Rate Schedule | 比较不同 LR scheduler | 提升收敛质量 |
| **P2** | Epoch 数分析 | 分析 early stopping 触发时机 | 优化训练时间 |

---

# 6. 附录：所有子实验索引

## 6.1 完整实验列表

| 文件 | 日期 | 主题 | 状态 |
|------|------|------|------|
| [exp_val_size_sweep_20251130.md](exp_val_size_sweep_20251130.md) | 2025-11-30 | 验证集大小扫描 | ✅ 完成 |

## 6.2 与其他目录的关联

| 目录 | 关联主题 | 链接 |
|------|----------|------|
| `NN/` | MLP 训练配置 | [NN_main](../NN/NN_main_20251130.md) |

---

*最后更新: 2025-11-30*  
*核心发现: 验证集大小的最优选择取决于噪声水平——干净数据用小验证集，有噪声数据需要更大验证集*

