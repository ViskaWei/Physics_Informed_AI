# ğŸ“˜ ğŸ“— å®éªŒæŠ¥å‘Šï¼šCoverage++ (Full Coverage)
> **Name:** TODO | **ID:** `VIT-20251205-moe-01`  
> **Topic:** `moe` | **MVP:** MVP-12B | **Project:** `VIT`  
> **Author:** Viska Wei | **Date:** 2025-12-05 | **Status:** ğŸ”„
```
ğŸ’¡ å®éªŒç›®çš„  
å†³å®šï¼šå½±å“çš„å†³ç­–
```

---


## ğŸ”— Upstream Links
| Type | Link |
|------|------|
| ğŸ§  Hub | `logg/moe/moe_hub.md` |
| ğŸ—ºï¸ Roadmap | `logg/moe/moe_roadmap.md` |

---

---

## ğŸ”— ä¸Šæ¸¸è¿½æº¯é“¾æ¥

| ç±»å‹ | é“¾æ¥ | è¯´æ˜ |
|------|------|------|
| ğŸ“ Roadmap | [`moe_roadmap.md`](./moe_roadmap_20251203.md) | Phase 12 |
| ğŸ§  Hub | [`moe_hub.md`](./moe_hub_20251203.md) | Q9.2, H-12B |
| ğŸ“‹ Kanban | [`kanban.md`](../../status/kanban.md) | VIT-20251205-moe-coverage-plus-01 |
| ğŸ“— å‰åºå®éªŒ | [`exp_moe_full_coverage`](./exp_moe_full_coverage_20251204.md) | MVP-Next-B RÂ²_full=0.8957 |

---

## âš¡ æ ¸å¿ƒç»“è®ºé€Ÿè§ˆ

> **ä¸€å¥è¯æ€»ç»“**ï¼šâ³ å®éªŒè¿›è¡Œä¸­
>
> **å‡è®¾éªŒè¯**ï¼š
> - H-12B: ç¬¬ 10 ä¸ª out-of-range expert èƒ½æŠŠ full-test RÂ² æ‹‰å› >0.91 â†’ â³
>
> **å…³é”®æ•°å­—**ï¼š
> - full-test RÂ²: â³
> - covered-test RÂ²: â³
> - out-of-range RÂ²: â³

---

# 1. ğŸ¯ ç›®æ ‡

## 1.1 å®éªŒç›®çš„

è®© full-test RÂ² æ¥è¿‘ covered-testï¼Œä½¿ MoE å¯äº¤ä»˜ã€‚

**ä¸ºä»€ä¹ˆåš**ï¼š
- å½“å‰æœ€å¤§çŸ­æ¿ä¸æ˜¯ 0.93ï¼Œè€Œæ˜¯ **full coverage ç‰ˆæœ¬æ‹‰èƒ¯**
- MVP-Next-B çš„ Edge-Clamp ç­–ç•¥åªè¾¾åˆ° RÂ²_full=0.8957
- è¿™ä¼šç›´æ¥è¾“ç»™ LGBM=0.91 baseline
- éœ€è¦æ›´å¥½çš„ out-of-range å¤„ç†ç­–ç•¥

**åšå®Œèƒ½ä¸èƒ½åœ**ï¼š
- âœ… å¦‚æœ full-test RÂ² > 0.91 ä¸” > LGBM â†’ å¯äº¤ä»˜ç‰ˆæœ¬è¾¾æˆ
- âš ï¸ å¦‚æœ full RÂ² < 0.88 â†’ éœ€è¦åˆ†æ out-of-range æ ·æœ¬ç‰¹æ€§

## 1.2 é¢„æœŸç»“æœ

| æŒ‡æ ‡ | é¢„æœŸå€¼ | æœ€ä½å¯æ¥å— |
|------|--------|----------|
| full-test RÂ² | â‰¥ 0.91 | â‰¥ max(LGBM, global+0.05) |
| covered-test RÂ² | â‰¥ 0.93 | ä¿æŒä¸ä¸‹é™ |
| out-of-range RÂ² | â‰¥ 0.85 | â‰¥ global |

---

# 2. ğŸ§ª å®éªŒè®¾è®¡

## 2.1 æ•°æ®é…ç½®

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **è¦†ç›–èŒƒå›´** | full-1000 | åŒ…å« out-of-range |
| **covered æ ·æœ¬** | ~816 | 9 bins å†… |
| **out-of-range æ ·æœ¬** | ~184 | 9 bins å¤– |
| **å™ªå£°æ°´å¹³** | 0.2 | ä¸ Next-A ä¸€è‡´ |

## 2.2 æ¨¡å‹ä¸ç®—æ³•

### ç­–ç•¥ 1: ç¬¬ 10 ä¸ª Out-of-Range Expert
- **è®­ç»ƒæ•°æ®**ï¼šä¸“é—¨ç”¨ out-of-range çš„ train æ ·æœ¬è®­ç»ƒ
- **æ¨¡å‹**ï¼šRidge æˆ– LGBM-lite
- **ç‰¹ç‚¹**ï¼šæ¯” global fallback é€šå¸¸æ›´å¼º

### ç­–ç•¥ 2: Conditional Ridge Fallback
- **è§¦å‘æ¡ä»¶**ï¼šmax(p) < é˜ˆå€¼ï¼ˆå¦‚ 0.4ï¼‰
- **Fallback æ¨¡å‹**ï¼šConditional Ridgeï¼ˆ[M/H] æ¡ä»¶åŒ–ï¼‰
- **ç‰¹ç‚¹**ï¼šåˆ©ç”¨ [M/H] proxy ä¿¡æ¯

### ç­–ç•¥ 3: LightGBM-lite Fallback
- **è§¦å‘æ¡ä»¶**ï¼šåŒä¸Š
- **Fallback æ¨¡å‹**ï¼šå° LightGBM
- **è¾“å…¥ç‰¹å¾**ï¼šgate features + å°‘é‡ summary

## 2.3 è¶…å‚æ•°é…ç½®

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| OOR Expert Î± | CV é€‰æ‹© | Ridge |
| Fallback é˜ˆå€¼ | 0.4 | max(p) |
| LGBM n_estimators | 100 | lite ç‰ˆæœ¬ |

## 2.4 è¯„ä»·æŒ‡æ ‡

| æŒ‡æ ‡ | å…¬å¼ | è¯´æ˜ |
|------|------|------|
| **full-test RÂ²** | ä¸»æŒ‡æ ‡ | å¯äº¤ä»˜æ€§ |
| **covered-test RÂ²** | å­æŒ‡æ ‡ | ä¿æŒå†å²å¯æ¯” |
| **out-of-range RÂ²** | å­æŒ‡æ ‡ | ç­–ç•¥æ•ˆæœ |

---

# 3. ğŸ“Š å®éªŒå›¾è¡¨

> â³ å®éªŒè¿›è¡Œä¸­ï¼Œå¾…å¡«å……

---

# 4. ğŸ’¡ å…³é”®æ´è§

> â³ å®éªŒè¿›è¡Œä¸­ï¼Œå¾…å¡«å……

---

# 5. ğŸ“ ç»“è®º

> â³ å®éªŒè¿›è¡Œä¸­ï¼Œå¾…å¡«å……

---

# 6. ğŸ“ é™„å½•

## 6.1 æ•°å€¼ç»“æœè¡¨

> â³ å®éªŒè¿›è¡Œä¸­ï¼Œå¾…å¡«å……

## 6.2 å®éªŒæµç¨‹è®°å½•

### æ‰§è¡Œå‘½ä»¤

```bash
# TBD
```

### å…³é”®æ—¥å¿—

> â³ å®éªŒè¿›è¡Œä¸­ï¼Œå¾…å¡«å……

## 6.3 ç›¸å…³æ–‡ä»¶

| æ–‡ä»¶ç±»å‹ | è·¯å¾„ | è¯´æ˜ |
|---------|------|------|
| è®­ç»ƒè„šæœ¬ | `~/VIT/scripts/moe_coverage_plus.py` | TBD |
| ç»“æœç›®å½• | `~/VIT/results/moe/coverage_plus/` | TBD |
| å›¾è¡¨ç›®å½• | `logg/moe/img/` | TBD |

---

*å®éªŒ ID: VIT-20251205-moe-coverage-plus-01*

