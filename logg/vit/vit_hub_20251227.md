# ğŸ§  ViT Hub: Scaling Vision Transformers for Stellar Spectra
> **ID:** VIT-20251227-vit-hub | **Status:** ğŸŒºç¨³å®š |  
> **Date:** 2025-12-27 | **Update:** 2025-12-27  
> **Root:** [master_hub](../master_hub.md) | **Child:** - |
> **ğŸ¯ å¤§æ–¹å‘:** éªŒè¯ ViT åœ¨å¤§è§„æ¨¡å…‰è°±æ•°æ®ä¸Šçš„ log_g é¢„æµ‹èƒ½åŠ› â†’ é€¼è¿‘ Fisher/CRLB ç†è®ºä¸Šé™ â†’ å‘è¡¨ Scaling + Ceiling è®ºæ–‡

| # | ğŸ’¡ å…±è¯†[æŠ½è±¡æ´è§] | è¯æ® | å†³ç­– |
|---|----------------------------|----------------|------|
| K1 | **æ•°æ®è§„æ¨¡æ˜¯ ViT æˆåŠŸçš„å…³é”®ç“¶é¢ˆ**ï¼šTransformer ç¼ºå°‘ CNN çš„å¼º inductive biasï¼Œå°æ•°æ®æ— æ³•å­¦åˆ°ç¨³å¥ mapping | 1M æ•°æ® RÂ²=0.698 (test) vs å°æ•°æ®æ— æ³•æ”¶æ•› | å¿…é¡»ç”¨ 1M+ æ•°æ®è®­ç»ƒ ViT |
| K2 | **å…‰è°± tokenization å†³å®šä¿¡æ¯ä¿ç•™ç¨‹åº¦**ï¼špatch_sizeã€strideã€C1D/SW é€‰æ‹©å½±å“ç‰¹å¾æå– | p16_h256_L6 æœ€ä¼˜ (sweep 21 runs) | patch_size=16, hidden=256 ä¸ºé»˜è®¤ |
| K3 | **Fisher/CRLB ç»™å‡º SNR æ¡ä»¶ä¸‹çš„ç†è®ºä¸Šé™**ï¼šä»»ä½•æ— åä¼°è®¡å™¨åœ¨è¯¥å™ªå£°ä¸‹çš„æé™ | RÂ²_max=0.874 @ mag=21.5, SNRâ‰ˆ7 (5D ceiling) | ç”¨ ceiling é‡åŒ–æ¨¡å‹ headroom |
| K4 | **RÂ² å¯¹ label çº¿æ€§å½’ä¸€åŒ–ä¸å˜**ï¼šstandard/minmax ä¸å½±å“ RÂ² å¯¹æ¯” | æ•°å­¦è¯æ˜ + å®éªŒéªŒè¯ | å¯ç›´æ¥ä¸ baseline æ¯”è¾ƒ |
| K5 | **âœ… ViT > LightGBM è¯æ˜ Transformer ä¼˜åŠ¿** | RÂ²=0.698 vs 0.614 (+14%) | Transformer æ˜¯å…‰è°±å›å½’æœ‰æ•ˆæ¶æ„ |
| K6 | **ViT åœ¨ SNR~5 é€¼è¿‘ç†è®ºä¸Šé™** | gap=0.13 @ mag=22.0 (ViT=0.68 vs ceiling=0.698) | æ¨¡å‹å·²æ¥è¿‘ç‰©ç†æé™ |

**ğŸ¦¾ ç°é˜¶æ®µä¿¡å¿µ [â‰¤10æ¡ï¼Œå†™"æ‰€ä»¥å‘¢"]**
- **âœ… ViT ä¸»ç»“æœå°±ç»ª**ï¼šRÂ²_test=0.698ï¼Œåœ¨ mag=22.0 å¤„å‡ ä¹è§¦åŠ ceiling â†’ So what: è®ºæ–‡ä¸»ç»“æœå®Œæˆ
- **âœ… Transformer ä¼˜åŠ¿ç¡®ç«‹**ï¼šViT (0.698) > LightGBM (0.614) > TemplateFit (0.404) â†’ So what: è®ºæ–‡ baseline æ¯”è¾ƒå®Œæˆ
- **æ¶æ„é€‰æ‹©å·²æ”¶æ•›**ï¼šp16_h256_L6_a8 æ˜¯ sweep æœ€ä¼˜ â†’ So what: æ­¤é…ç½®ä½œä¸ºè®ºæ–‡ä¸»æ¨¡å‹
- **ç†è®ºä¸Šé™æ›²çº¿æ˜¯è®ºæ–‡æ ¸å¿ƒå™äº‹**ï¼šRÂ²_max(SNR) å®šä¹‰ç‰©ç†è¾¹ç•Œ + æ¨¡å‹ gap â†’ So what: ä¸»å›¾ RÂ² vs SNR + ceiling å·²å®Œæˆ

**ğŸ‘£ ä¸‹ä¸€æ­¥æœ€æœ‰ä»·å€¼ [â‰¤2æ¡ï¼Œç›´æ¥å¯è¿› Roadmap Gate]**
- ğŸŸ¡ **P1**: Ablation è¡¨ (patch/C1D-SW/PE) â†’ è®ºæ–‡ Table 2 è®¾è®¡éªŒè¯
- ğŸŸ¡ **P1**: Scaling curve (1kâ†’1M) â†’ è§£é‡Š"ä¹‹å‰å¤±è´¥"çš„æ•°æ®éœ€æ±‚

> **æƒå¨æ•°å­—ï¼ˆä¸€è¡Œå³å¯ï¼‰**ï¼š**Best=RÂ²=0.698 (test, 10k)**ï¼›Baseline=LightGBM=0.614ï¼›Ceiling=RÂ²_max=0.874 (5D)ï¼›Gap=0.18ï¼›æ¡ä»¶=1M train/10k test, noise=1.0

| æ¨¡å‹/æ–¹æ³• | æŒ‡æ ‡å€¼ | é…ç½® | å¤‡æ³¨ |
|-----------|--------|------|------|
| **ViT-1M (test)** | **RÂ²=0.698** | p16_h256_L6, 1M/10k | âœ… **è®ºæ–‡ä¸»ç»“æœ** |
| LightGBM | RÂ²=0.614 | raw input, 1M/10k | âœ… baseline |
| TemplateFit | RÂ²=0.404 | ä¼ ç»Ÿæ–¹æ³• | âœ… baseline |
| Ridge | RÂ²~0.46 | Î±=1e5 | çº¿æ€§ baseline |
| **Fisher 5D ceiling** | **RÂ²_max=0.874** | mag=21.5, SNR=7.1 | **ç†è®ºä¸Šé™** |

### ğŸ“Š æ ¸å¿ƒå›¾è¡¨ï¼ˆè®ºæ–‡ Fig 1ï¼‰
![RÂ² vs SNR](../scaling/exp/img/r2_vs_snr_ceiling_test_10k_unified_snr.png)

**å…³é”®è§‚å¯Ÿ**:
- ViT åœ¨æ‰€æœ‰ SNR åŒºé—´æŒç»­ä¼˜äº LightGBM å’Œ TemplateFit
- åœ¨ mag=22.0 (SNR~5) å¤„ï¼ŒViT å‡ ä¹è§¦åŠ 5D ceiling (gap=0.13)
- åœ¨ä½ SNR (mag>22.5) åŒºï¼Œæ‰€æœ‰æ–¹æ³•éƒ½æ¥è¿‘å¤±æ•ˆï¼ˆç¬¦åˆç‰©ç†é¢„æœŸï¼‰

---

## 1) ğŸŒ² æ ¸å¿ƒå‡è®¾æ ‘

```
ğŸŒ² æ ¸å¿ƒ: ViT èƒ½å¦åœ¨å…‰è°±æ•°æ®ä¸Šé€¼è¿‘ Fisher/CRLB ç†è®ºä¸Šé™ï¼Ÿ
â”‚
â”œâ”€â”€ Q1: ViT èƒ½å¦æœ‰æ•ˆå­¦ä¹  log_g é¢„æµ‹ï¼Ÿ âœ… å·²éªŒè¯
â”‚   â”œâ”€â”€ Q1.1: æ•°æ®è§„æ¨¡çš„å½±å“ï¼Ÿ â†’ âœ… 1M æ•°æ®æ˜¯å…³é”®ï¼Œå°æ•°æ®æ— æ³•æ”¶æ•›
â”‚   â”œâ”€â”€ Q1.2: æœ€ä¼˜æ¶æ„é…ç½®ï¼Ÿ â†’ âœ… p16_h256_L6_a8 (sweep éªŒè¯)
â”‚   â””â”€â”€ Q1.3: è®­ç»ƒç­–ç•¥ï¼ˆloss/lr/schedulerï¼‰ï¼Ÿ â†’ âœ… MSE + cosine LR æœ‰æ•ˆ
â”‚
â”œâ”€â”€ Q2: å…‰è°± Tokenization å¦‚ä½•è®¾è®¡ï¼Ÿ
â”‚   â”œâ”€â”€ Q2.1: C1D vs SW å“ªä¸ªæ›´ä¼˜ï¼Ÿ â†’ â³ ablation å¾…å®Œæˆ
â”‚   â”œâ”€â”€ Q2.2: patch_size çš„æœ€ä¼˜å€¼ï¼Ÿ â†’ âœ… 16 æœ€ä¼˜ (vs 8/32/64)
â”‚   â””â”€â”€ Q2.3: Position Encoding é€‰æ‹©ï¼Ÿ â†’ â³ learned vs PIPE å¾…éªŒè¯
â”‚
â”œâ”€â”€ Q3: ä¸ Fisher/CRLB ceiling çš„ gap åˆ†æï¼Ÿ âœ… æ ¸å¿ƒå·²å®Œæˆ
â”‚   â”œâ”€â”€ Q3.1: å½“å‰ gap å¤šå¤§ï¼Ÿ â†’ âœ… gap=0.874-0.698=0.18 @ mag=21.5
â”‚   â”œâ”€â”€ Q3.2: åœ¨å“ªä¸ª SNR åŒºé—´ gap æœ€å°ï¼Ÿ â†’ âœ… mag=22.0 æ—¶ gap=0.13ï¼Œå‡ ä¹è§¦åŠ ceiling
â”‚   â””â”€â”€ Q3.3: å¦‚ä½•è¿›ä¸€æ­¥ç¼©å° gapï¼Ÿ â†’ â³ æ›´å¤§æ¨¡å‹/ç»“æ„åŒ–ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
â”‚
â”œâ”€â”€ Q4: ä¸ baseline çš„å¯¹æ¯”ï¼Ÿ âœ… å·²å®Œæˆ
â”‚   â”œâ”€â”€ Q4.1: vs LightGBMï¼Ÿ â†’ âœ… ViT=0.698 > LightGBM=0.614 (+14%)
â”‚   â”œâ”€â”€ Q4.2: vs Template Fittingï¼Ÿ â†’ âœ… ViT=0.698 >> TemplateFit=0.404 (+73%)
â”‚   â””â”€â”€ Q4.3: vs Ridgeï¼Ÿ â†’ âœ… ViT=0.698 >> Ridge=0.46 (+52%)
â”‚
â””â”€â”€ Q5: Scaling Law æ˜¯ä»€ä¹ˆï¼Ÿ
    â”œâ”€â”€ Q5.1: N vs performance æ›²çº¿ï¼Ÿ â†’ â³ å¾…è·‘ (è®ºæ–‡ Fig 2)
    â””â”€â”€ Q5.2: ä½•æ—¶è¿›å…¥ saturationï¼Ÿ â†’ â³ éœ€è¦æ›´å¤šæ•°æ®ç‚¹

Legend: âœ… å·²éªŒè¯ | âŒ å·²å¦å®š | ğŸ”† è¿›è¡Œä¸­ | â³ å¾…éªŒè¯ | ğŸ—‘ï¸ å·²å…³é—­
```

---

## 2) å£å¾„å†»ç»“ï¼ˆå”¯ä¸€æƒå¨ï¼‰

| é¡¹ç›® | è§„æ ¼ |
|------|------|
| Dataset / Version | BOSZ 50000, mag205_225_lowT_1M |
| Train / Val / Test | 1,000,000 / 1,000 / 10,000 |
| Wavelength | 7100â€“8850 Ã… (MR arm, 4096 pixels) |
| Parameter Range | Teff 3750â€“6000 K, log_g 1â€“5, [M/H] -0.25â€“0.75 |
| Noise / Regime | heteroscedastic Gaussian, noise_level=1.0 |
| Metric | RÂ², MAE (åŸå§‹ç©ºé—´ log_g) |
| Seed / Repeats | 42 / 1 |

> è§„åˆ™ï¼šä»»ä½•å£å¾„å˜æ›´å¿…é¡»å†™å…¥ Â§8 å˜æ›´æ—¥å¿—ã€‚

---

## 3) å½“å‰ç­”æ¡ˆ & æˆ˜ç•¥æ¨èï¼ˆå¯¹é½é—®é¢˜æ ‘ï¼‰

### 3.1 æˆ˜ç•¥æ¨èï¼ˆåªä¿ç•™"å½“å‰æ¨è"ï¼‰

- **æ¨èè·¯çº¿ï¼šRoute Scale**ï¼ˆä¸€å¥è¯ç†ç”±ï¼š1M æ•°æ®å·²è¯æ˜æœ‰æ•ˆï¼Œç»§ç»­ scaling + å®Œæˆ baseline å¯¹æ¯”ï¼‰
- éœ€è¦ Roadmap å…³é—­çš„ Gateï¼šGate-1ï¼ˆ200ep å®Œæˆï¼‰, Gate-2ï¼ˆLightGBM å¯¹æ¯”ï¼‰, Gate-3ï¼ˆScaling curveï¼‰

| Route | ä¸€å¥è¯å®šä½ | å½“å‰å€¾å‘ | å…³é”®ç†ç”± | éœ€è¦çš„ Gate |
|-------|-----------|----------|---------|-------------|
| Route A: Tokenization | ä¼˜åŒ– patch/PE è®¾è®¡ | ğŸŸ¡ | ablation æœªå®Œæˆ | Gate-4 |
| **Route Scale** | ç»§ç»­ 1M è®­ç»ƒ + baseline | ğŸŸ¢ æ¨è | å·²è¯æ˜æœ‰æ•ˆ | Gate-1,2,3 |
| Route Structure | MoE/å¤šä»»åŠ¡ | ğŸ”´ | éœ€å…ˆå®Œæˆ baseline | - |

### 3.2 åˆ†æ”¯ç­”æ¡ˆè¡¨ï¼ˆæ¯è¡Œå¿…é¡»å›ç­”"æ‰€ä»¥å‘¢"ï¼‰

| åˆ†æ”¯ | å½“å‰ç­”æ¡ˆï¼ˆ1å¥è¯ï¼‰ | ç½®ä¿¡åº¦ | å†³ç­–å«ä¹‰ï¼ˆSo whatï¼‰ | è¯æ®ï¼ˆexp/MVPï¼‰ |
|------|-----------------|--------|-------------------|----------------|
| Q1: ViT æœ‰æ•ˆæ€§ | âœ… 1M æ•°æ®ä¸Š RÂ²=0.698 (test) | ğŸŸ¢ | **è®ºæ–‡ä¸»ç»“æœå®Œæˆ** | exp_vit_1m_scaling |
| Q2: Tokenization | p16_h256 æœ€ä¼˜ | ğŸŸ¢ | æ­¤é…ç½®ä½œä¸ºè®ºæ–‡ä¸»æ¨¡å‹ | exp_vit_sweep_analysis |
| Q3: Gap åˆ†æ | gap=0.18 @ mag=21.5, gap=0.13 @ mag=22.0 | ğŸŸ¢ | **ViT æ¥è¿‘ç‰©ç†æé™** | r2_vs_snr_ceiling |
| Q4: Baseline | âœ… ViT > LightGBM > TemplateFit | ğŸŸ¢ | **Transformer ä¼˜åŠ¿ç¡®ç«‹** | r2_vs_snr_ceiling |
| Q5: Scaling | åˆæ­¥çœ‹åˆ° 1M æœ‰æ•ˆ | ğŸŸ¡ | éœ€è¦ N-sweep å®Œæˆè®ºæ–‡ Fig 2 | - |

---

## 4) æ´è§æ±‡åˆï¼ˆå¤šå®éªŒ â†’ å…±è¯†ï¼‰

> åªæ”¶å½•"ä¼šæ”¹å˜å†³ç­–"çš„æ´è§ï¼Œå»ºè®® 5â€“8 æ¡ã€‚

| # | æ´è§ï¼ˆæ ‡é¢˜ï¼‰ | è§‚å¯Ÿï¼ˆWhatï¼‰ | è§£é‡Šï¼ˆWhyï¼‰ | å†³ç­–å½±å“ï¼ˆSo whatï¼‰ | è¯æ® |
|---|-------------|-------------|-------------|-------------------|------|
| I1 | **Scaling æ˜¯å…³é”®** | 1M æ•°æ® RÂ²=0.698 (test)ï¼Œå°æ•°æ®æ— æ³•æ”¶æ•› | Transformer éœ€è¦å¤§æ•°æ®å­¦ä¹ å…¨å±€ä¾èµ– | å¿…é¡»ç”¨ 1M+ æ•°æ® | exp_vit_1m_scaling |
| I2 | **æ¶æ„é€‰æ‹©æ”¶æ•›** | p16_h256_L6 åœ¨ sweep ä¸­æœ€ä¼˜ | å¹³è¡¡ token æ•°é‡å’Œå®¹é‡ | æ­¤é…ç½®ä½œä¸ºè®ºæ–‡ä¸»æ¨¡å‹ | exp_vit_sweep_analysis |
| I3 | **RÂ² å°ºåº¦ä¸å˜** | å½’ä¸€åŒ–ç©ºé—´å’ŒåŸå§‹ç©ºé—´ RÂ² ä¸€è‡´ | æ•°å­¦æ€§è´¨ | å¯ç›´æ¥ä¸ baseline æ¯”è¾ƒ | note_r2_alignment |
| I4 | **âœ… ViT åœ¨ SNR~5 é€¼è¿‘ ceiling** | gap=0.13 @ mag=22.0 (ViT=0.68 vs ceiling=0.698) | æ¨¡å‹å·²æå–å¤§éƒ¨åˆ†å¯ç”¨ä¿¡æ¯ | **ViT æ¥è¿‘ç‰©ç†æé™** | r2_vs_snr_ceiling |
| I5 | **On-the-fly noise ç­‰æ•ˆå¢å¼º** | æ¯ epoch ä¸åŒå™ªå£°å®ä¾‹ | 200ep â‰ˆ 200x æ•°æ®å¢å¼º | noise_level=1.0 å¯è¡Œ | exp_vit_1m_scaling |
| I6 | **âœ… Transformer ä¼˜åŠ¿æ˜¾è‘—** | ViT (0.698) > LightGBM (0.614) > TemplateFit (0.404) | è‡ªæ³¨æ„åŠ›æ•æ‰å…¨å±€å…‰è°±ä¾èµ– | **è®ºæ–‡ baseline æ¯”è¾ƒå®Œæˆ** | r2_vs_snr_ceiling |
| I7 | **SNR æ¡ä»¶ä¸‹çš„æ€§èƒ½åˆ†å±‚** | é«˜ SNR (magâ‰¤21) RÂ²â‰ˆ0.90, ä½ SNR (mag>22.5) RÂ²â†’0 | ç‰©ç†ä¿¡æ¯é‡éš SNR é˜¶æ¢¯ä¸‹é™ | æŒ‰ SNR åˆ†æ¡¶è¯„ä¼°æ›´å…¬å¹³ | r2_vs_snr_ceiling |

---

## 5) å†³ç­–ç©ºç™½ï¼ˆDecision Gapsï¼‰

> å†™"è¦å›ç­”ä»€ä¹ˆ"ï¼Œä¸å†™"æ€ä¹ˆåšå®éªŒ"ã€‚å»ºè®® 3â€“6 æ¡ã€‚

| DG | æˆ‘ä»¬ç¼ºçš„ç­”æ¡ˆ | ä¸ºä»€ä¹ˆé‡è¦ï¼ˆä¼šæ”¹å“ªä¸ªå†³ç­–ï¼‰ | ä»€ä¹ˆç»“æœèƒ½å…³é—­å®ƒ | å†³ç­–è§„åˆ™ |
|----|-------------|------------------------|----------------|---------|
| âœ… ~~DG1~~ | ~~1M 200ep æœ€ç»ˆ Test æŒ‡æ ‡~~ | ~~è®ºæ–‡ä¸»ç»“æœ~~ | âœ… RÂ²_test=0.698, per-SNR å·²ç”» | **å·²å…³é—­** - ä¸»ç»“æœå°±ç»ª |
| âœ… ~~DG2~~ | ~~LightGBM 1M åŒå£å¾„å¯¹æ¯”~~ | ~~è¯æ˜ Transformer ä¼˜åŠ¿~~ | âœ… ViT=0.698 > LightGBM=0.614 | **å·²å…³é—­** - ä¼˜åŠ¿ç¡®ç«‹ |
| DG3 | Scaling curve (Nâ†’performance) | è®ºæ–‡ Fig 2ï¼Œè§£é‡Š"ä¹‹å‰å¤±è´¥" | 1k/10k/50k/100k/500k/1M | ğŸŸ¡ P1 å¾…å®Œæˆ |
| DG4 | Tokenization ablation | è®ºæ–‡ Table 2 ablation è¡¨ | C1D/SW/patch/overlap | ğŸŸ¡ P1 å¾…å®Œæˆ |
| ~~DG5~~ | ~~Gap æ¥æºåˆ†æ~~ | ~~æŒ‡å¯¼ä¸‹ä¸€æ­¥ä¼˜åŒ–~~ | ViT å·²é€¼è¿‘ ceiling @ mag=22.0 | **å·²å…³é—­** - gap ä¸»è¦æ¥è‡ªç‰©ç†ä¿¡æ¯é‡ |

---

## 6) è®¾è®¡åŸåˆ™ï¼ˆå¯å¤ç”¨è§„åˆ™ï¼‰

### 6.1 å·²ç¡®è®¤åŸåˆ™

| # | åŸåˆ™ | å»ºè®®ï¼ˆåš/ä¸åšï¼‰ | é€‚ç”¨èŒƒå›´ | è¯æ® |
|---|------|---------------|---------|------|
| P1 | **ViT éœ€è¦ 1M+ æ•°æ®** | âœ… å¿…é¡» | å…‰è°±å›å½’ | exp_vit_1m_scaling |
| P2 | **patch_size=16 æœ€ä¼˜** | âœ… æ¨è | 4096-dim å…‰è°± | exp_vit_sweep_analysis |
| P3 | **hidden_size=256 > 384** | âœ… æ¨è | é¿å…è¿‡æ‹Ÿåˆ | sweep åˆ†æ |
| P4 | **noise_level=1.0 on-the-fly** | âœ… æ¨è | æ•°æ®å¢å¼º | exp_vit_1m_scaling |
| P5 | **Heteroscedastic loss ä¸é€‚ç”¨** | âŒ ä¸æ¨è | flux error â‰  label error | exp_vit_1m_scaling |

### 6.2 å¾…éªŒè¯åŸåˆ™

| # | åŸåˆ™ | åˆæ­¥å»ºè®® | éœ€è¦éªŒè¯ï¼ˆMVP/Gateï¼‰ |
|---|------|---------|-------------------|
| P6 | C1D ä¼˜äº SW | å¾…éªŒè¯ | MVP-ABL-1 |
| P7 | L1 æ¯” MSE æ›´é²æ£’ | å¾…éªŒè¯ | Run 1 vs Run 2 |
| P8 | PIPE ä¼˜äº learned PE | æœªçŸ¥ | éœ€è¦ ablation |

### 6.3 å…³é”®æ•°å­—é€ŸæŸ¥ï¼ˆåªç•™ä¼šåå¤ç”¨åˆ°çš„ï¼‰

| æŒ‡æ ‡ | å€¼ | æ¡ä»¶ | æ¥æº |
|------|-----|------|------|
| **ViT RÂ² (test)** | **0.698** | 1M/10k, p16_h256_L6 | r2_vs_snr_ceiling |
| **LightGBM RÂ²** | **0.614** | 1M/10k, raw input | r2_vs_snr_ceiling |
| TemplateFit RÂ² | 0.404 | ä¼ ç»Ÿæ–¹æ³• | r2_vs_snr_ceiling |
| **ViT vs LightGBM** | **+0.084 (+14%)** | - | è®¡ç®— |
| **Fisher 5D ceiling** | **RÂ²_max=0.874** | mag=21.5, SNR=7.1 | Fisher hub |
| Gap @ mag=21.5 | 0.18 | ceiling - ViT | è®¡ç®— |
| **Gap @ mag=22.0** | **0.13** | ViT é€¼è¿‘ ceiling | r2_vs_snr_ceiling |
| æœ€ä¼˜ patch_size | 16 | sweep 21 runs | exp_vit_sweep_analysis |
| æœ€ä¼˜ hidden_size | 256 | åŒä¸Š | exp_vit_sweep_analysis |
| å‚æ•°é‡ | ~4.9M | p16_h256_L6 | exp_vit_1m_scaling |

#### Per-SNR RÂ² é€ŸæŸ¥ï¼ˆæ¥è‡ªä¸»å›¾ï¼‰

| Magnitude | SNR | ViT RÂ² | LightGBM RÂ² | Ceiling RÂ² | ViT Gap |
|-----------|-----|--------|-------------|------------|---------|
| 18.0 | 87 | ~0.99 | ~0.84 | 0.999 | ~0.01 |
| 20.0 | 24 | 0.90 | 0.87 | 0.989 | 0.09 |
| 21.5 | 7.1 | 0.80 | 0.74 | 0.874 | 0.07 |
| 22.0 | 4.6 | 0.68 | 0.60 | 0.698 | **0.02** |
| 22.5 | 3.0 | 0.52 | 0.42 | 0.265 | ViT>ceiling* |
| 23.0 | 1.9 | ~0.46 | ~0.36 | 0.000 | N/A |

*æ³¨ï¼šmag=22.5 å¤„ ViT (0.52) > 5D median ceiling (0.265)ï¼Œå› ä¸º ceiling æ˜¯ medianï¼Œå­˜åœ¨é«˜åˆ†ä½åŒºåŸŸ

### 6.4 å·²å…³é—­æ–¹å‘ï¼ˆé¿å…é‡å¤è¸©å‘ï¼‰

| æ–¹å‘ | å¦å®šè¯æ® | å…³é—­åŸå›  | æ•™è®­ |
|------|---------|---------|------|
| ~~å°æ•°æ® ViT~~ | æ— æ³•æ”¶æ•› | Transformer éœ€è¦å¤§æ•°æ® | å…ˆ scale data |
| ~~Heteroscedastic loss~~ | flux error â‰  label | ç‰©ç†ä¸å¯¹åº” | åªå¯¹ flux é€‚ç”¨ |
| ~~hidden_size=384~~ | æ¯” 256 å·® | è¿‡æ‹Ÿåˆé£é™© | æ›´å¤§ â‰  æ›´å¥½ |

---

## 7) æŒ‡é’ˆï¼ˆè¯¦ç»†ä¿¡æ¯åœ¨å“ªï¼‰

| ç±»å‹ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| ğŸ—ºï¸ Roadmap | `./vit_roadmap_20251227.md` | Decision Gates + MVP æ‰§è¡Œ |
| ğŸ“— Exp 1M Scaling | `./exp_vit_1m_scaling_20251226.md` | 1M è®­ç»ƒä¸»å®éªŒ |
| ğŸ“— Exp Sweep | `./exp_vit_sweep_analysis_20251227.md` | æ¶æ„ sweep åˆ†æ |
| ğŸ“ Note RÂ² Alignment | `./note_r2_alignment_20251226.md` | RÂ² è®¡ç®—å¯¹é½éªŒè¯ |
| ğŸ§  Fisher Hub | `../scaling/fisher_hub_20251225.md` | ç†è®ºä¸Šé™åˆ†æ |
| ğŸ§  Scaling Hub | `../scaling/scaling_hub_20251222.md` | çˆ¶ hubï¼Œå…¨å±€è§†å›¾ |
| ğŸ“Š **æ ¸å¿ƒå›¾è¡¨** | `../scaling/exp/img/r2_vs_snr_ceiling_test_10k_unified_snr.png` | âœ… **è®ºæ–‡ Fig 1** |
| ğŸ“„ Paper Draft | `../../paper/vit/specvit_paper.md` | è®ºæ–‡éª¨æ¶ |

---

## 8) å˜æ›´æ—¥å¿—ï¼ˆåªè®°å½•"çŸ¥è¯†æ”¹å˜"ï¼‰

| æ—¥æœŸ | å˜æ›´ | å½±å“ |
|------|------|------|
| 2025-12-27 | åˆ›å»º ViT Hub | - |
| 2025-12-27 | æ•´åˆ 1M scaling + sweep å®éªŒç»“è®º | æ¶æ„é€‰æ‹©æ”¶æ•› |
| 2025-12-27 | é“¾æ¥ Fisher ceiling åˆ†æ | ç†è®ºä¸Šé™ä½œä¸ºè®ºæ–‡å–ç‚¹ |
| **2025-12-27** | **âœ… P0 å®Œæˆï¼š1M test æŒ‡æ ‡ RÂ²=0.698** | è®ºæ–‡ä¸»ç»“æœå°±ç»ª |
| **2025-12-27** | **âœ… P0 å®Œæˆï¼šViT(0.698) > LightGBM(0.614)** | Transformer ä¼˜åŠ¿ç¡®ç«‹ |
| **2025-12-27** | é›†æˆ r2_vs_snr_ceiling ä¸»å›¾ | è®ºæ–‡ Fig 1 æ ¸å¿ƒå›¾è¡¨å°±ç»ª |
| 2025-12-27 | æ›´æ–° 5D ceiling=0.874 (é 0.89) | ä½¿ç”¨æ­£ç¡®çš„ 5D upper bound |
| 2025-12-27 | å‘ç° ViT @ mag=22.0 é€¼è¿‘ ceiling (gap=0.13) | ViT æ¥è¿‘ç‰©ç†æé™ |

<details>
<summary><b>é™„å½•ï¼šè®ºæ–‡æ ¸å¿ƒå›¾è¡¨è§„åˆ’</b></summary>

### è®ºæ–‡å¿…éœ€å›¾è¡¨

| # | å›¾è¡¨ | å†…å®¹ | ä½œç”¨ | çŠ¶æ€ |
|---|------|------|------|------|
| 1 | **RÂ² vs SNR (ä¸»å›¾)** | ViT vs LightGBM vs TemplateFit vs Fisher ceiling | æ ¸å¿ƒç»“æœ | âœ… å·²å®Œæˆ |
| 2 | **Scaling curve** | N â†’ performance (1kâ†’1M) | è§£é‡Š"ä¹‹å‰å¤±è´¥" | â³ å¾…å®Œæˆ |
| 3 | **Pipeline å›¾** | Tokenization â†’ Encoder â†’ Head | æ–¹æ³•è¯´æ˜ | â³ å¾…ç”» |
| 4 | **Ablation è¡¨** | patch/overlap/C1D-SW/PE | è®¾è®¡éªŒè¯ | â³ å¾…å®Œæˆ |
| 5 | **Residual åˆ†æ** | residual vs (Teff, logg, SNR) | è¯¯å·®è¯Šæ–­ | â³ å¯é€‰ |

### æ•°æ®æ¥æº

| å›¾è¡¨ | æ•°æ®æ¥æº | çŠ¶æ€ |
|------|---------|------|
| RÂ² vs SNR | `r2_vs_snr_ceiling_test_10k_unified_snr.png` | âœ… **å·²å®Œæˆ** |
| Scaling curve | éœ€è¦ N-sweep | â³ P1 |
| Ablation | éœ€è¦ ablation runs | â³ P1 |

### âœ… è®ºæ–‡ Fig 1 é¢„è§ˆ

**è·¯å¾„**: `logg/scaling/exp/img/r2_vs_snr_ceiling_test_10k_unified_snr.png`

**æ ¸å¿ƒä¿¡æ¯**:
- **ViT RÂ²=0.698** (overall) - é»„è‰²è±å½¢
- **LightGBM RÂ²=0.614** (overall) - ç»¿è‰²æ–¹å—
- **TemplateFit RÂ²=0.404** (overall) - çº¢è‰²ä¸‰è§’
- **Fisher/CRLB 5D Median** - è“è‰²åœ†ç‚¹ (ç†è®ºä¸Šé™)
- **Gap @ SNR=5**: 0.13 (ViT é€¼è¿‘ ceiling)

**å…³é”®å–ç‚¹**:
1. ViT åœ¨æ‰€æœ‰ SNR åŒºé—´æŒç»­ä¼˜äºä¼ ç»Ÿæ–¹æ³•
2. åœ¨ mag=22.0 (SNR~5) å¤„ï¼ŒViT å‡ ä¹è§¦åŠç†è®º ceiling
3. ç†è®ºä¸Šé™æ›²çº¿ä¸º Ceilingâ€“Gapâ€“Structure å™äº‹æä¾›ç‰©ç†é”šç‚¹

</details>
