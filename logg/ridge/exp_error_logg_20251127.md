# ğŸ“˜ Error ç‰¹å¾é¢„æµ‹ log_g å®éªŒæŠ¥å‘Š

---
> **å®éªŒåç§°ï¼š** Error-based log_g Prediction Experiment  
> **ä½œè€…ï¼š** Viska Wei  
> **æ—¥æœŸï¼š** 2025-11-27  
> **æ•°æ®ç‰ˆæœ¬ï¼š** HDF5 å…‰è°±æ•°æ®ï¼ˆå« flux å’Œ error åˆ—ï¼‰  
> **æ¨¡å‹ç‰ˆæœ¬ï¼š** LightGBM (lgbm_error_nz0.pkl), Ridge Regression (lnreg_e_n32k_nz0.pkl)

---

# ğŸ“‘ ç›®å½•

- [1. ğŸ¯ ç›®æ ‡](#1--ç›®æ ‡)
- [2. ğŸ§ª å®éªŒè®¾è®¡](#2--å®éªŒè®¾è®¡experiment-design)
- [3. ğŸ“Š å®éªŒå›¾è¡¨](#3--å®éªŒå›¾è¡¨)
- [4. ğŸ’¡ å…³é”®æ´è§](#4--å…³é”®æ´è§key-insights)
- [5. ğŸ“ ç»“è®º](#5--ç»“è®ºconclusion)
- [6. ğŸ“ é™„å½•](#6--é™„å½•)

---

# 1. ğŸ¯ ç›®æ ‡

## 1.1 èƒŒæ™¯ä¸åŠ¨æœº

é€šè¿‡å¯¹æ¯” flux-based å’Œ error-based æ¨¡å‹ï¼Œç†è§£ä¸åŒç‰¹å¾ç±»å‹å¯¹ log_g ä¼°è®¡çš„è´¡çŒ®ï¼Œä¸ºåç»­ç¥ç»ç½‘ç»œè®¾è®¡æä¾›ç‰¹å¾å·¥ç¨‹ä¾æ®ã€‚

æ¢ç´¢å…‰è°±æ•°æ®ä¸­ **å·²çŸ¥é«˜æ–¯å™ªå£°æ–¹å·®ï¼ˆerrorï¼‰** æ˜¯å¦åŒ…å«æ’æ˜Ÿç‰©ç†å‚æ•°ï¼ˆlog_gï¼‰çš„ä¿¡æ¯ï¼Œä»è€Œï¼š

- ç†è§£å…‰è°±æµ‹é‡è¯¯å·®ä¸æ’æ˜Ÿç‰©ç†å‚æ•°ä¹‹é—´çš„æ½œåœ¨å…³è”
- è¯„ä¼° error ç‰¹å¾åœ¨ç¥ç»ç½‘ç»œæ¶æ„è®¾è®¡ä¸­çš„ä»·å€¼
- æ­ç¤ºæ•°æ®ç”Ÿæˆè¿‡ç¨‹ä¸­å¯èƒ½å­˜åœ¨çš„éšå¼ä¿¡æ¯ç»“æ„æˆ–æ•°æ®æ³„æ¼

## 1.2 æ ¸å¿ƒå‡è®¾

> **å¼‚æ–¹å·®è¯¯å·®ï¼ˆerror Ïƒï¼‰å¯èƒ½ä½œä¸ºç‹¬ç«‹ç‰¹å¾å…·æœ‰é¢„æµ‹èƒ½åŠ›ã€‚**

æœ¬æ¬¡å®éªŒéªŒè¯ï¼š

- è¯„ä¼°å¼‚æ–¹å·®è¯¯å·®ï¼ˆerror Ïƒï¼‰ä½œä¸ºç‹¬ç«‹ç‰¹å¾çš„é¢„æµ‹èƒ½åŠ›
- å¯¹æ¯”çº¿æ€§æ¨¡å‹ä¸éçº¿æ€§æ¨¡å‹ï¼ˆLightGBMï¼‰ä» error ä¸­æå–ä¿¡æ¯çš„èƒ½åŠ›å·®å¼‚
- æ¢ç©¶ error ä¸ log_g ä¹‹é—´æ˜¯å¦å­˜åœ¨ç‰©ç†æˆ–ç»Ÿè®¡ä¸Šçš„ç›¸å…³æ€§

## 1.3 éªŒè¯é—®é¢˜

| # | é—®é¢˜ | éªŒè¯ç›®æ ‡ | ç»“æœ |
|---|------|---------|------|
| Q1 | Error å•ç‹¬ä½œä¸ºç‰¹å¾èƒ½å¦é¢„æµ‹ log_gï¼Ÿ | éªŒè¯ error æ˜¯å¦åŒ…å«ç‰©ç†ä¿¡æ¯ | âœ… æ˜¯ï¼ŒLightGBM RÂ²=0.392 |
| Q2 | çº¿æ€§æ¨¡å‹ vs éçº¿æ€§æ¨¡å‹åœ¨ error ä¸Šè¡¨ç°å·®å¼‚ï¼Ÿ | ç†è§£ error-log_g å…³ç³»çš„æ€§è´¨ | âœ… éçº¿æ€§ï¼šLinear RÂ²â‰ˆ0, LightGBM RÂ²=0.39 |
| Q3 | Error-based vs Flux-based æ€§èƒ½å·®è·ï¼Ÿ | é‡åŒ– error çš„ä¿¡æ¯é‡ | âœ… Error çº¦ 39% æ–¹å·®ï¼ŒFlux çº¦ 99.8% |
| Q4 | Error ä¸­ log_g ä¿¡æ¯çš„æ¥æºï¼Ÿ | ç‰©ç†å…³è” vs æ•°æ®åå·® | âš ï¸ éœ€è¿›ä¸€æ­¥éªŒè¯ |

## 1.4 ç»“è®ºæ‘˜è¦

### 1.4.1 å®éªŒç»“è®º

| ç»“è®º | è¯´æ˜ |
|------|------|
| **Error åŒ…å«ç‰©ç†ä¿¡æ¯** | LightGBM ä½¿ç”¨ error ç‰¹å¾è¾¾åˆ° RÂ²=0.392 |
| **Error ä¿¡æ¯æ˜¯éçº¿æ€§çš„** | çº¿æ€§æ¨¡å‹ RÂ²â‰ˆ0ï¼Œéçº¿æ€§æ¨¡å‹ RÂ²=0.39 |
| **Error ä¿¡æ¯é‡è¿œä½äº Flux** | Error RÂ²=0.39 vs Flux RÂ²=0.998 |

### 1.4.2 è®¾è®¡å¯ç¤º

| è®¾è®¡åŸåˆ™ | å…·ä½“å»ºè®® |
|---------|---------|
| **Error å¯ä½œä¸ºè¾…åŠ©ç‰¹å¾** | éœ€è¦éçº¿æ€§å±‚æ¥æå– error ä¿¡æ¯ |
| **ç»„åˆæ–¹å¼** | æ¨è [flux, error] æ‹¼æ¥æˆ– flux/error (SNR) |
| **NN è®¾è®¡** | ä½¿ç”¨ error éœ€è¶³å¤Ÿçš„éçº¿æ€§å±‚ |

> **ä¸€å¥è¯æ€»ç»“**ï¼šError åŒ…å«çº¦ 39% çš„ log_g å¯è§£é‡Šæ–¹å·®ï¼Œä½†ä¿¡æ¯æ˜¯é«˜åº¦éçº¿æ€§çš„ï¼Œéœ€è¦éçº¿æ€§æ¨¡å‹ï¼ˆå¦‚ LightGBMï¼‰æ‰èƒ½æå–ã€‚

---

# 2. ğŸ§ª å®éªŒè®¾è®¡ï¼ˆExperiment Designï¼‰

## 2.1 æ•°æ®ï¼ˆDataï¼‰

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| è®­ç»ƒæ ·æœ¬æ•° | 32,000 |
| æµ‹è¯•æ ·æœ¬æ•° | 512 |
| ç‰¹å¾ç»´åº¦ | 4,096 |
| æ ‡ç­¾å‚æ•° | log_g |
| å™ªå£°æ°´å¹³ | 0 (noiseless) |

**å™ªå£°æ¨¡å‹ï¼š**
$$
\text{noisy\_flux} = \text{flux} + \mathcal{N}(0, 1) \times \text{error} \times \text{noise\_level}
$$

å…¶ä¸­ï¼š
- **flux**: å…‰è°±æµé‡å€¼ï¼ˆæ¯ä¸ªæ³¢é•¿ç‚¹çš„è¾å°„å¼ºåº¦ï¼‰
- **error**: æ¯ä¸ªæ³¢é•¿ç‚¹çš„å·²çŸ¥é«˜æ–¯å™ªå£°æ ‡å‡†å·® Ïƒï¼ˆå…ˆéªŒå·²çŸ¥ï¼Œç”±ä»ªå™¨æ¨¡å‹/å…‰å­è®¡æ•°è®¡ç®—å¾—å‡ºï¼‰
- æœ¬å®éªŒ noise_level = 0ï¼Œå³æœªå®é™…æ·»åŠ å™ªå£°ï¼Œä½† error æœ¬èº«ä»ä¸ºç‰¹å¾

## 2.2 ä½¿ç”¨çš„ç‰¹å¾ç±»å‹

| å®éªŒç»„ | ç‰¹å¾ç±»å‹ | ç‰¹å¾ç»´åº¦ |
|--------|----------|----------|
| æœ¬å®éªŒ | error (å™ªå£°æ ‡å‡†å·®) | 4,096 |
| å¯¹ç…§ç»„ | flux (å…‰è°±æµé‡) | 4,096 |

## 2.3 æ¨¡å‹ä¸ç®—æ³•ï¼ˆModel & Algorithmï¼‰

### çº¿æ€§å›å½’ / å²­å›å½’ï¼ˆRidge Regressionï¼‰
$$
\hat{y} = X w + b
$$
$$
w = (X^\top X + \alpha I)^{-1} X^\top y
$$

å…¶ä¸­ $\alpha = 100$ï¼ˆå¼ºæ­£åˆ™åŒ–ï¼‰

### LightGBM
- **n_estimators**: 1000 trees
- **è®­ç»ƒæ—¶é—´**: ~18 min
- å…¶ä»–å‚æ•°: é»˜è®¤é…ç½®

## 2.4 è¶…å‚æ•°ï¼ˆHyperparametersï¼‰

| å‚æ•° | å€¼ |
|------|-----|
| Ridge Î± | 100 |
| LightGBM n_estimators | 1000 |
| noise_level | 0 |
| ç‰¹å¾ç»´åº¦ | 4096 |

---

# 3. ğŸ“Š å®éªŒå›¾è¡¨

## ğŸ“Š å»ºè®®å›¾ 1ï¼šæ¨¡å‹æ€§èƒ½å¯¹æ¯”æŸ±çŠ¶å›¾

**ç›®çš„**ï¼šç›´è§‚å±•ç¤ºç‰¹å¾ç±»å‹å’Œæ¨¡å‹ç±»å‹çš„äº¤äº’æ•ˆåº”

| å†…å®¹ | è¯´æ˜ |
|------|------|
| å››ç»„æŸ±çŠ¶å›¾ | Flux+LightGBM, Flux+Linear, Error+LightGBM, Error+Linear |
| æŒ‡æ ‡ | RÂ², MAE, RMSE |

---

## ğŸ“Š å»ºè®®å›¾ 2ï¼šLightGBM ç‰¹å¾é‡è¦æ€§ vs æ³¢é•¿

**ç›®çš„**ï¼šéªŒè¯é‡è¦çš„ error åƒç´ æ˜¯å¦å¯¹åº” log_g æ•æ„Ÿçš„è°±çº¿åŒºåŸŸ

| å†…å®¹ | è¯´æ˜ |
|------|------|
| X è½´ | æ³¢é•¿ï¼ˆ4096 ä¸ªç‚¹ï¼‰ |
| Y è½´ | LightGBM feature_importance |
| æ ‡æ³¨ | Top 50 æœ€é‡è¦çš„æ³¢é•¿ä½ç½® |

---

# 4. ğŸ’¡ å…³é”®æ´è§ï¼ˆKey Insightsï¼‰

## 4.1 å®è§‚å±‚æ´è§ï¼ˆç”¨äºæŒ‡å¯¼ Neural Network æ¶æ„è®¾è®¡ï¼‰

### æ ¸å¿ƒå‘ç°ï¼šError ç¡®å®åŒ…å« log_g ä¿¡æ¯ï¼

1. **Error åŒ…å«çº¦ 39% çš„ log_g å¯è§£é‡Šæ–¹å·®**
   - LightGBM ä½¿ç”¨ error ç‰¹å¾è¾¾åˆ° RÂ² = 0.392ï¼Œè¿œé«˜äºéšæœºæ°´å¹³
   - è¿™è¡¨æ˜ error ä¸­å­˜åœ¨ä¸ log_g ç›¸å…³çš„ç»“æ„æ€§ä¿¡æ¯

2. **Error ä¿¡æ¯æ˜¯é«˜åº¦éçº¿æ€§çš„**
   - çº¿æ€§æ¨¡å‹ï¼ˆRidgeï¼‰å®Œå…¨æ— æ³•æå–ï¼ˆRÂ² â‰ˆ 0ï¼‰
   - åªæœ‰éçº¿æ€§æ¨¡å‹ï¼ˆæ ‘æ¨¡å‹ï¼‰èƒ½å¤Ÿæ•æ‰è¿™ç§å…³ç³»

3. **å¯¹ NN è®¾è®¡çš„å¯ç¤º**
   - å¦‚æœä½¿ç”¨ error ä½œä¸ºè¾…åŠ©ç‰¹å¾ï¼Œéœ€è¦éçº¿æ€§å±‚æ¥æå–ä¿¡æ¯
   - ç®€å•çš„çº¿æ€§ç»„åˆ (flux + error) å¯èƒ½æ— æ³•å……åˆ†åˆ©ç”¨ error ä¿¡æ¯
   - å»ºè®®è€ƒè™‘ **SNR = flux / error** æˆ–å…¶ä»–éçº¿æ€§ç»„åˆæ–¹å¼

## 4.2 æ¨¡å‹å±‚æ´è§ï¼ˆç”¨äºä¼˜åŒ–æ¨¡å‹ï¼‰

### çº¿æ€§æ¨¡å‹å¤±æ•ˆåŸå› 

çº¿æ€§æ¨¡å‹çš„é¢„æµ‹å½¢å¼ï¼š
$$
\hat{y} = w_0 + \sum_{i=1}^{4096} w_i \cdot \text{error}\_i
$$

çº¿æ€§æ¨¡å‹æ— æ³•æ•æ‰éçº¿æ€§å…³ç³»å¦‚ï¼š
$$
\text{error}\_i \propto \sqrt{F\_i} \quad \Rightarrow \quad F\_i \propto \text{error}\_i^2
$$

å› æ­¤ï¼Œå³ä½¿ error ä¸ log_g å­˜åœ¨é—´æ¥å…³è”ï¼Œçº¿æ€§æ¨¡å‹ä¹Ÿæ— æ³•"è‡ªåŠ¨å¹³æ–¹"å„ç»´åº¦å†ç»„åˆã€‚

### LightGBM æœ‰æ•ˆåŸå› 

- æ ‘æ¨¡å‹é€šè¿‡åˆ†è£‚é˜ˆå€¼ç»„åˆï¼Œå¯ä»¥è¿‘ä¼¼ä»»æ„éçº¿æ€§å‡½æ•°
- èƒ½å¤Ÿéšå¼å­¦ä¹  $\text{error}_i^2$ã€$\text{error}_i \cdot \text{error}_j$ ç­‰éçº¿æ€§é¡¹

### è¿‡æ‹Ÿåˆè­¦ç¤º

- train_RÂ² (0.79) >> test_RÂ² (0.39)
- å­˜åœ¨æ˜æ˜¾è¿‡æ‹Ÿåˆï¼Œå¯èƒ½éœ€è¦æ›´å¼ºæ­£åˆ™åŒ–æˆ–æ›´å¤šè®­ç»ƒæ•°æ®

## 4.3 ç‰©ç†å±‚æ´è§

### Error ä¸ºä»€ä¹ˆä¼š"çŸ¥é“" log_gï¼Ÿ

**ç‰©ç†è§£é‡Šé“¾ï¼š**
$$
\log g \longrightarrow \text{æ’æ˜Ÿäº®åº¦ } L\_\star \longrightarrow \text{å…‰å­æ•° } F\_i(\lambda) \longrightarrow \text{error}\_i(\lambda)
$$

**å™ªå£°æ¨¡å‹çš„ç‰©ç†ä¾èµ–ï¼š**

åœ¨å…¸å‹å…‰å­è®¡æ•°ç³»ç»Ÿä¸­ï¼š
$$
\sigma\_i \approx \sqrt{F\_i + N\_{\text{sky},i} + N\_{\text{read}}^2}
$$

å› æ­¤ error æ˜¯ flux çš„éçº¿æ€§å‡½æ•°ï¼Œè€Œ flux ä¸ log_g å¼ºç›¸å…³ã€‚

**å¤©ä½“ç‰©ç†å…³è”ï¼š**
- **å·¨æ˜Ÿï¼ˆä½ log_gï¼‰** â†’ æœ¬å¾æ›´äº® â†’ flux æ›´å¤§ â†’ Poisson å™ªå£°ç»å¯¹å€¼æ›´å¤§
- **çŸ®æ˜Ÿï¼ˆé«˜ log_gï¼‰** â†’ æœ¬å¾æ›´æš— â†’ flux æ›´å° â†’ readnoise/sky noise æ¯”ä¾‹æ›´å¤§

### âš ï¸ æ•°æ®åå·®è­¦ç¤º

å¦‚æœä¸åŒ log_g åŒºé—´çš„æ˜Ÿåœ¨æ¨¡æ‹Ÿ/è§‚æµ‹æ—¶è¢«èµ‹äºˆäº†ä¸åŒçš„å™ªå£°ç­–ç•¥æˆ– SNR åˆ†å¸ƒï¼Œerror å°±ä¼šæˆä¸º"éšå¼ç¼–ç  log_g çš„ side channel"ï¼Œè¿™æ˜¯éœ€è¦è­¦æƒ•çš„æ•°æ®æ³„æ¼é£é™©ã€‚

---

# 5. ğŸ“ ç»“è®ºï¼ˆConclusionï¼‰

## 5.1 æ ¸å¿ƒå‘ç°

> **Error åŒ…å«çº¦ 39% çš„ log_g å¯è§£é‡Šæ–¹å·®ï¼Œä½†ä¿¡æ¯æ˜¯é«˜åº¦éçº¿æ€§çš„ï¼Œéœ€è¦éçº¿æ€§æ¨¡å‹æ‰èƒ½æå–ã€‚**

å‡è®¾éªŒè¯ï¼š
- âœ… Error åŒ…å« log_g çš„å¯åˆ©ç”¨ä¿¡æ¯ï¼šLightGBM test_RÂ² = 0.392
- âœ… Error ä¸ log_g çš„å…³ç³»æ˜¯éçº¿æ€§çš„ï¼šLinear RÂ² â‰ˆ 0, LightGBM RÂ² = 0.39
- âš ï¸ Error ä¿¡æ¯é‡è¿œä½äº Fluxï¼šError RÂ² = 0.39 vs Flux RÂ² = 0.998

## 5.2 å…³é”®ç»“è®ºï¼ˆ3 æ¡ï¼‰

| # | ç»“è®º | è¯æ® |
|---|------|------|
| 1 | **Error åŒ…å«ç‰©ç†ä¿¡æ¯** | LightGBM RÂ²=0.392 >> éšæœºæ°´å¹³ |
| 2 | **Error-log_g å…³ç³»éçº¿æ€§** | Linear RÂ²â‰ˆ0, LightGBM RÂ²=0.39 |
| 3 | **å­˜åœ¨è¿‡æ‹Ÿåˆé£é™©** | train_RÂ²=0.79 >> test_RÂ²=0.39 |

## 5.3 è®¾è®¡å¯ç¤º

### æ¶æ„åŸåˆ™

| åŸåˆ™ | å»ºè®® | åŸå›  |
|------|------|------|
| Error å¯ä½œè¾…åŠ©ç‰¹å¾ | éœ€éçº¿æ€§å±‚ | Error ä¿¡æ¯æ˜¯éçº¿æ€§çš„ |
| ç»„åˆæ–¹å¼ | [flux, error] æˆ– flux/error | å……åˆ†åˆ©ç”¨ error ä¿¡æ¯ |
| æ¨¡å‹å®¹é‡ | è¶³å¤Ÿçš„éçº¿æ€§å±‚ | çº¿æ€§ç»„åˆæ— æ³•åˆ©ç”¨ error |

### æ¨èç»„åˆæ–¹å¼

| æ–¹æ¡ˆ | å…¬å¼ | ç»´åº¦ |
|------|------|------|
| ç›´æ¥æ‹¼æ¥ | $X = [\text{flux}, \text{error}]$ | 8192 |
| SNR ç‰¹å¾ | $X_\text{SNR} = \text{flux} / \text{error}$ | 4096 |
| é€†æ–¹å·®åŠ æƒ | $X_\text{weighted} = \text{flux} / \text{error}^2$ | 4096 |

### âš ï¸ å¸¸è§é™·é˜±

| å¸¸è§åšæ³• | å®éªŒè¯æ® |
|----------|----------|
| "çº¿æ€§ç»„åˆ flux+error å°±å¤Ÿäº†" | Linear æ— æ³•æå– error ä¿¡æ¯ (RÂ²â‰ˆ0) |
| "Error æ˜¯çº¯å™ªå£°ï¼Œæ²¡ç”¨" | LightGBM RÂ²=0.392 è¯´æ˜åŒ…å«ç‰©ç†ä¿¡æ¯ |

## 5.4 ç‰©ç†è§£é‡Š

- Error Ïƒ é€šè¿‡å…‰å­è®¡æ•°ç»Ÿè®¡ä¸æ’æ˜Ÿäº®åº¦ï¼ˆå› æ­¤ä¸ log_gï¼‰ç‰©ç†å…³è”
- $\sigma_i \approx \sqrt{F_i + N_{\text{sky}} + N_{\text{read}}^2}$
- ä¸åŒ log_g çš„æ’æ˜Ÿæœ‰ä¸åŒçš„äº®åº¦åˆ†å¸ƒ â†’ ä¸åŒçš„å™ªå£°æ¨¡å¼

## 5.5 å…³é”®æ•°å­—é€ŸæŸ¥

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| Error-only LightGBM RÂ² | 0.392 |
| Error-only Linear RÂ² | â‰ˆ0 |
| Flux-only LightGBM RÂ² | 0.998 |
| Error è¿‡æ‹Ÿåˆç¨‹åº¦ | train_RÂ²=0.79 vs test_RÂ²=0.39 |

## 5.6 ä¸‹ä¸€æ­¥å·¥ä½œ

| æ–¹å‘ | å…·ä½“ä»»åŠ¡ |
|------|----------|
| éªŒè¯ä¿¡æ¯æ¥æº | Shuffle test æ’é™¤è™šå‡ç›¸å…³ |
| ç»„åˆç‰¹å¾å®éªŒ | æµ‹è¯• [flux, error], flux/error ç­‰æ–¹æ¡ˆ |
| ç‰¹å¾é‡è¦æ€§åˆ†æ | åˆ†æ LightGBM æœ€é‡è¦çš„æ³¢é•¿æ˜¯å¦å¯¹åº” log_g æ•æ„Ÿè°±çº¿ |

---

# 6. ğŸ“ é™„å½•

## 6.1 æ•°å€¼ç»“æœè¡¨ï¼ˆResultsï¼‰

### 6.1.1 Error-Based Modelsï¼ˆæœ¬å®éªŒï¼‰

| Model | test_RÂ² | test_MAE | test_RMSE | train_RÂ² | Notes |
|-------|---------|----------|-----------|----------|-------|
| **LightGBM** | **0.3920** | **0.1872** | **0.2277** | 0.7896 | 1000 trees, 18min |
| Linear (Ridge Î±=100) | -0.0009 | 0.2509 | 0.2921 | 0.0013 | æ— é¢„æµ‹èƒ½åŠ› |

### 6.1.2 Flux-Based Modelsï¼ˆå¯¹ç…§ç»„ï¼‰

| Model | test_RÂ² | test_MAE | test_RMSE | Notes |
|-------|---------|----------|-----------|-------|
| **LightGBM** | **0.9981** | **0.0082** | **0.0128** | Best performance |
| LinearRegression (OLS) | 0.9694 | 0.0380 | 0.0511 | æ— æ­£åˆ™åŒ– |
| Ridge Î±=100 | 0.7943 | 0.1014 | 0.1324 | è¿‡åº¦æ­£åˆ™åŒ– |

### 6.1.3 å¯¹æ¯”åˆ†æ

| å¯¹æ¯”é¡¹ | Flux-based | Error-based | Î” (å·®å¼‚) |
|--------|------------|-------------|----------|
| LightGBM RÂ² | 0.998 | 0.392 | **-0.606** |
| Linear RÂ² | 0.969 | ~0 | **-0.969** |

### 6.1.4 ç»Ÿè®¡è‡ªæ´½æ€§éªŒè¯

**RÂ² ä¸ RMSE çš„ä¸€è‡´æ€§æ£€éªŒï¼š**

ä» flux æ¨¡å‹ä¼°è®¡ log_g æ€»ä½“æ ‡å‡†å·®ï¼š
$$
\sigma\_y \approx \frac{\text{RMSE}\_\text{flux}}{\sqrt{1-R^2\_\text{flux}}} = \frac{0.0128}{\sqrt{1-0.9981}} \approx 0.293
$$

éªŒè¯ error æ¨¡å‹çš„ RMSEï¼š
$$
\text{RMSE}\_\text{error} \approx \sqrt{(1-0.392) \cdot 0.293^2} \approx 0.228
$$

å®é™…å€¼ 0.2277ï¼Œä¸ç†è®ºè®¡ç®—ä¸€è‡´ âœ“

## 6.2 å»ºè®®ç»˜å›¾ï¼ˆPlot Suggestionsï¼‰

### 6.2.1 LightGBM ç‰¹å¾é‡è¦æ€§ vs æ³¢é•¿
- **ç›®çš„**ï¼šéªŒè¯é‡è¦çš„ error åƒç´ æ˜¯å¦å¯¹åº” log_g æ•æ„Ÿçš„è°±çº¿åŒºåŸŸ
- **X è½´**ï¼šæ³¢é•¿ï¼ˆ4096 ä¸ªç‚¹ï¼‰
- **Y è½´**ï¼šfeature_importance
- **æ ‡æ³¨**ï¼šTop 50 æœ€é‡è¦çš„æ³¢é•¿ä½ç½®

### 6.2.2 Error vs log_g æ ‡é‡ç›¸å…³æ€§
- **ç›®çš„**ï¼šéªŒè¯ error çš„å…¨å±€ç»Ÿè®¡é‡æ˜¯å¦ä¸ log_g æœ‰ç®€å•ç›¸å…³æ€§
- **X è½´**ï¼šmean(error) / std(error) / norm(error)
- **Y è½´**ï¼šlog_g
- **æŒ‡æ ‡**ï¼šPearson/Spearman ç›¸å…³ç³»æ•°

### 6.2.3 Error çƒ­åŠ›å›¾ï¼ˆæŒ‰ log_g åˆ†ç»„ï¼‰
- **ç›®çš„**ï¼šå¯è§†åŒ–ä¸åŒ log_g åŒºé—´çš„ error æ¨¡å¼å·®å¼‚
- **X è½´**ï¼šæ³¢é•¿
- **Y è½´**ï¼šlog_g åŒºé—´
- **é¢œè‰²**ï¼šå¹³å‡ error å€¼

## 6.3 ç›¸å…³æ–‡ä»¶

| ç±»å‹ | è·¯å¾„ |
|------|------|
| LightGBM (error) | `models/lgbm_error_test/lgbm_error_nz0.pkl` |
| Linear (error) | `models/lnreg_e_n32k_test/lnreg_e_n32k/lnreg_e_n32k_nz0.pkl` |

---

*Generated: 2025-11-27*
