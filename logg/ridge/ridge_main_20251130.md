# Ridge Â· log_g å®éªŒä¸»ç¬”è®°ï¼ˆæˆªè‡³ 2025-11-30ï¼‰

- æœ¬ç›®å½•ï¼š`logg/ridge/`
- æœ€è¿‘æ›´æ–°æ—¶é—´ï¼š2025-11-30
- å†™ä½œé£æ ¼å‚è€ƒï¼š`/home/swei20/VIT/docs`
- è¯´æ˜ï¼šæ­¤æ–‡ä»¶æ˜¯è¯¥å­ç›®å½•æ‰€æœ‰å®éªŒçš„ä¸»ç´¢å¼•ã€æ ¸å¿ƒç»“è®ºä¸æœªæ¥è®¡åˆ’ã€‚

---

# ç›®å½•

0. [é—®é¢˜é‡è¿°](#0-é—®é¢˜é‡è¿°)
1. [ç ”ç©¶ç›®æ ‡](#1-ç ”ç©¶ç›®æ ‡)
2. [å®éªŒåœ°å›¾ï¼ˆå«è¶…é“¾æ¥ï¼‰](#2-å®éªŒåœ°å›¾å«è¶…é“¾æ¥)
3. [æ ¸å¿ƒå‘ç°ï¼ˆä¸­æ–‡Â·ä¸“ä¸šÂ·å‹ç¼©ï¼‰](#3-æ ¸å¿ƒå‘ç°ä¸­æ–‡ä¸“ä¸šå‹ç¼©)
4. [å…³é”®å›¾è¡¨](#4-å…³é”®å›¾è¡¨)
5. [ä¸‹ä¸€æ­¥å®éªŒè®¡åˆ’](#5-ä¸‹ä¸€æ­¥å®éªŒè®¡åˆ’)
6. [é™„å½•ï¼šæ‰€æœ‰å­å®éªŒç´¢å¼•](#6-é™„å½•æ‰€æœ‰å­å®éªŒç´¢å¼•)

---

# 0. é—®é¢˜é‡è¿°

## 0.1 æ ¸å¿ƒç ”ç©¶é—®é¢˜

> **$\log g$-flux æ˜ å°„æ˜¯å¦æœ¬è´¨çº¿æ€§ï¼Ÿæ­£åˆ™åŒ–åœ¨å…¶ä¸­æ‰®æ¼”ä»€ä¹ˆè§’è‰²ï¼Ÿ**

è¿™ä¸ªé—®é¢˜å†³å®šäº†ï¼š
- **NN æ¶æ„é€‰æ‹©**ï¼šå¦‚æœæ˜ å°„æœ¬è´¨çº¿æ€§ï¼ŒNN çš„ä¸»è¦ä»»åŠ¡æ˜¯"ä¿¡æ¯è¿‡æ»¤"è€Œé"éçº¿æ€§æå–"
- **æ­£åˆ™åŒ–ç­–ç•¥**ï¼šæœ€ä¼˜ $\alpha$ ä¸å™ªå£°çš„å…³ç³»æ­ç¤ºäº†"éœ€è¦åˆ é™¤å¤šå°‘æ— å…³ä¿¡æ¯"
- **Linear shortcut çš„å¿…è¦æ€§**ï¼šå¦‚æœçº¿æ€§æ¨¡å‹å·²æ¥è¿‘ä¸Šé™ï¼ŒNN åº”åŒ…å« linear shortcut

## 0.2 ç»Ÿè®¡å­¦æ„ä¹‰

å¦‚æœ noise=0 æ—¶ Ridge è¾¾åˆ° $R^2 \approx 1$ï¼š
$$Y \approx w^\top X + \text{const}$$

åˆ™è¯´æ˜ $\log g$ æ˜¯ flux çš„**è¿‘çº¿æ€§å‡½æ•°**ï¼ŒNN åªéœ€å­¦ä¹ æ®‹å·®ã€‚

## 0.3 å¯¹ NN è®¾è®¡çš„ç›´æ¥å½±å“

| å¦‚æœ... | åˆ™... |
|---------|-------|
| æœ€ä¼˜ $\alpha$ éšå™ªå£°å¢å¤§ | Weight decay éœ€è¦ä¸å™ªå£°æŒ‚é’© |
| noise=0 æ—¶ $R^2 \approx 1$ | Linear shortcut æ˜¯å¿…é¡»çš„ |
| æ­£åˆ™åŒ–æ€»æ˜¯æœ‰ç›Š | NN ä¹Ÿéœ€è¦å¼ºæ­£åˆ™åŒ– |

---

# 1. ç ”ç©¶ç›®æ ‡

æœ¬ç›®å½•èšç„¦äº **Ridge å›å½’ä½œä¸ºçº¿æ€§ baseline** çš„ç³»ç»Ÿåˆ†æï¼Œæ ¸å¿ƒé—®é¢˜æ˜¯ï¼š

- $\log g$-flux æ˜ å°„æ˜¯å¦æœ¬è´¨çº¿æ€§ï¼Ÿæ­£åˆ™åŒ–çš„å¿…è¦æ€§å¦‚ä½•ï¼Ÿ
- æœ€ä¼˜ $\alpha$ å¦‚ä½•éšå™ªå£°æ°´å¹³å˜åŒ–ï¼Ÿ
- ç‰¹å¾é‡è¦æ€§ï¼ˆRidge ç³»æ•°ï¼‰åœ¨ä¸åŒ $\alpha$ å’Œå™ªå£°ä¸‹æ˜¯å¦ç¨³å®šï¼Ÿ
- Error é€šé“ $\sigma$ æ˜¯å¦æºå¸¦é¢å¤–ç‰©ç†ä¿¡æ¯ï¼Ÿ

ä¸ $\log g$ æ€»ç›®æ ‡çš„å…³ç³»ï¼šRidge æ˜¯æ‰€æœ‰æ¨¡å‹å¿…é¡»è¶…è¶Šçš„**çº¿æ€§ baseline**ï¼Œå…¶è¡Œä¸ºæ­ç¤ºäº† $\log g$ ä¿¡æ¯çš„æœ¬è´¨ç‰¹æ€§ã€‚

---

# 2. å®éªŒåœ°å›¾ï¼ˆå«è¶…é“¾æ¥ï¼‰

| å®éªŒID | æ–‡ä»¶/ç›®å½• | ç±»å‹ | å…³é”®é…ç½® | ä¸»è¦æŒ‡æ ‡ | é“¾æ¥ |
|-------|-----------|------|----------|----------|------|
| E01 | exp_ridge_alpha_sweep_20251127.md | Î± å‚æ•°æ‰«æ | Î±âˆˆ[0.001,1000], noiseâˆˆ[0,2] | $R^2$=0.999 @ noise=0 | [è¯¦æƒ…](exp_ridge_alpha_sweep_20251127.md) |
| E02 | exp_feature_importance_stability_20251128.md | ç‰¹å¾ç¨³å®šæ€§ | Î±Ã—noise çŸ©é˜µ | é«˜å™ªå£°ä¸‹é«˜åº¦ç¨³å®š | [è¯¦æƒ…](exp_feature_importance_stability_20251128.md) |
| E03 | exp_error_logg_20251127.md | Error é€šé“åˆ†æ | Ïƒ-only è¾“å…¥ | $R^2$=0.91 | [è¯¦æƒ…](exp_error_logg_20251127.md) |
| E04 | exp_ridge_topk_20251129.md | Ridge TopK | Kâˆˆ[50,4096] | TopK å¯¹æ ‘æ¨¡å‹æå‡æœ‰é™ | [è¯¦æƒ…](exp/exp_ridge_topk_20251129.md) |
| **E05** ğŸ†• | exp_scaling_ridge_alpha_extended_20251222.md | å¤§æ ·æœ¬ Î± æ‰«æ | 100k/1M, Î±âˆˆ[1e2,1e8] | **å€’ U å‹æ›²çº¿éªŒè¯** | [è¯¦æƒ…](../scaling/exp/exp_scaling_ridge_alpha_extended_20251222.md) |
| img/ | img/ | å›¾è¡¨ç›®å½• | 5 å¼ æ ¸å¿ƒå›¾è¡¨ | - | [ç›®å½•](img/) |

> è¡¨æ ¼æŒ‰é‡è¦æ€§æ’åºã€‚

---

# 3. æ ¸å¿ƒå‘ç°ï¼ˆä¸­æ–‡Â·ä¸“ä¸šÂ·å‹ç¼©ï¼‰

## 3.1 å®è§‚ç»“è®º

| ç»“è®º | æ•°å€¼è¯æ® | è®¾è®¡å¯ç¤º |
|------|---------|---------|
| **æ˜ å°„æœ¬è´¨çº¿æ€§** | noise=0 æ—¶ $R^2=0.999$ | Linear shortcut æ˜¯å¿…é¡»çš„ |
| **æ­£åˆ™åŒ–æ€»æ˜¯æœ‰ç›Š** | å³ä½¿ noise=0ï¼ŒÎ±=0.001 ä¹Ÿæ¯” OLS å¥½ | å…‰è°±å«æ— å…³ä¿¡æ¯éœ€å‹åˆ¶ |
| **æœ€ä¼˜ Î± éšå™ªå£°å•è°ƒå¢å¤§** | 0.001 (N=0) â†’ 1000 (N=2.0) | Weight decay éœ€ä¸å™ªå£°æŒ‚é’© |
| **Error Ïƒ æºå¸¦ç‰©ç†ä¿¡æ¯** | Ïƒ-only è¾¾ $R^2=0.91$ | åŒé€šé“è¾“å…¥ [flux, Ïƒ] |

## 3.2 æœ€ä¼˜ Î± å‚æ•°è¡¨

### 32k æ ·æœ¬ (baseline)

| å™ªå£°æ°´å¹³ | æœ€ä¼˜ Î± | æœ€ä¼˜ $R^2$ | OLS $R^2$ | æå‡ |
|----------|--------|-----------|----------|------|
| 0.0 | **0.001** | 0.999 | 0.969 | +3.1% |
| 0.1 | **1.0** | ~0.90 | 0.901 | - |
| 0.5 | **50** | ~0.67 | 0.608 | +10% |
| 1.0 | **200** | 0.458 | 0.385 | +19% |
| 2.0 | **1000** | 0.221 | 0.131 | **+68.7%** |

### ğŸ†• å¤§æ ·æœ¬ Î± æ‰«æ (noise=1.0, 2025-12-22)

| æ•°æ®è§„æ¨¡ | æœ€ä¼˜ Î± | æœ€ä¼˜ $R^2$ | vs baseline Î±~3162 | å¢ç›Š |
|----------|--------|-----------|-------------------|------|
| 100k | **3.16e+04** | 0.4856 | 0.4735 | +2.55% |
| 1M | **1.00e+05** | 0.5017 | 0.4997 | +0.42% |

> **å…³é”®å‘ç°**: æœ€ä¼˜ Î± éšæ•°æ®é‡å¢å¤§ï¼Œ100kâ†’1M æ—¶ Î± å¢å¤§çº¦ 3xï¼›å­˜åœ¨æ˜æ˜¾çš„å€’ U å‹æ›²çº¿ï¼ˆH1.5.1 âœ…ï¼‰
> - æ¨è Î± âˆˆ [1e4, 1e5] è€ŒéåŸæ¥çš„ 5000
> - Î± > 1e6 æ—¶ RÂ² æ€¥å‰§ä¸‹é™ï¼ˆè¿‡åº¦æ­£åˆ™åŒ–ï¼‰

## 3.3 ç‰¹å¾ç¨³å®šæ€§å‘ç°

| å‘ç° | æ•°å€¼è¯æ® | è®¾è®¡å¯ç¤º |
|------|---------|---------|
| **noise=0 æ˜¯"å­¤å²›"** | ä¸å…¶ä»–å™ªå£°ç›¸å…³æ€§ <0.5 | é¿å…åœ¨æ— å™ªå£°æ•°æ®ä¸Šè®­ç»ƒ |
| **é«˜å™ªå£°ä¸‹é«˜åº¦ç¨³å®š** | noiseâ‰¥0.5 ç›¸å…³æ€§ >0.95 | é«˜å™ªå£°è®­ç»ƒæ›´é²æ£’ |
| **Î± å½±å“è¾ƒå°** | ç›¸å…³æ€§ >0.85 è·¨ Î± | ç‰¹å¾é€‰æ‹©ä¸ä¾èµ– Î± |

## 3.4 Error é€šé“åˆ†æ

| ç»“è®º | æ•°å€¼è¯æ® |
|------|---------|
| Ïƒ-only é¢„æµ‹èƒ½åŠ› | $R^2 = 0.91$ |
| å…³ç³»ç±»å‹ | éçº¿æ€§ï¼ˆéœ€ MLPï¼‰ |
| ç‰©ç†è§£é‡Š | Ïƒ ç¼–ç äº†æ’æ˜Ÿäº®åº¦/è·ç¦»ç­‰ä¿¡æ¯ |

## 3.5 å…³é”®æ•°å­—é€ŸæŸ¥

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| noise=0 æœ€ä½³ $R^2$ | **0.999** (Î±=0.001) |
| noise=1.0 æœ€ä½³ $R^2$ (32k) | **0.458** (Î±=200) |
| noise=1.0 æœ€ä½³ $R^2$ (100k) ğŸ†• | **0.4856** (Î±=3.16e+04) |
| noise=1.0 æœ€ä½³ $R^2$ (1M) ğŸ†• | **0.5017** (Î±=1.00e+05) |
| noise=2.0 æœ€ä½³ $R^2$ | **0.221** (Î±=1000) |
| OLS vs Ridge æœ€å¤§å·®è· | **+68.7%** @ noise=2.0 |
| Ïƒ-only $R^2$ | **0.91** |
| ğŸ†• æœ€ä¼˜ Î± ä¸æ•°æ®é‡å…³ç³» | Î± âˆ æ•°æ®é‡ (çº¦ 3x per 10x data) |

---

# 4. å…³é”®å›¾è¡¨

> æ‰€æœ‰å›¾è¡¨ä½äº `img/` å­ç›®å½•ï¼š

| å›¾è¡¨ | æè¿° | æ–‡ä»¶ |
|------|------|------|
| $R^2$ vs Î± (by noise) | ä¸åŒå™ªå£°ä¸‹çš„ Î± æ›²çº¿ | [ridge_r2_vs_alpha_by_noise.png](img/ridge_r2_vs_alpha_by_noise.png) |
| ç»¼åˆæŒ‡æ ‡ vs Î± | MAE/RMSE/$R^2$ ä¸‰æŒ‡æ ‡ | [ridge_metrics_vs_alpha_by_noise.png](img/ridge_metrics_vs_alpha_by_noise.png) |
| ç‰¹å¾ç›¸å…³æ€§ vs Î± | ä¸åŒ Î± ä¸‹ç‰¹å¾é‡è¦æ€§ç›¸å…³æ€§ | [feature_importance_correlation_vs_alpha.png](img/feature_importance_correlation_vs_alpha.png) |
| ç‰¹å¾ç›¸å…³æ€§è¯¦ç»†ç‰ˆ | å¸¦è¯¯å·®æ¡çš„è¯¦ç»†åˆ†æ | [feature_importance_correlation_vs_alpha_detailed.png](img/feature_importance_correlation_vs_alpha_detailed.png) |
| æœ€ä¼˜ Î± åˆ†æ | æœ€ä¼˜ Î± çš„ç¨³å®šæ€§åˆ†æ | [feature_importance_optimal_alpha_analysis.png](img/feature_importance_optimal_alpha_analysis.png) |

---

# 5. ä¸‹ä¸€æ­¥å®éªŒè®¡åˆ’

| ä¼˜å…ˆçº§ | æ–¹å‘ | å…·ä½“ä»»åŠ¡ | é¢„æœŸæ”¶ç›Š |
|--------|------|----------|----------|
| **P0** | 100k æ•°æ® | ç”¨ 100k æ•°æ®é‡æ–°è®­ç»ƒ Ridge | ä¸ NN å…¬å¹³æ¯”è¾ƒ |
| **P1** | Ridge + Error | [flux, Ïƒ] åŒè¾“å…¥ Ridge | å¯èƒ½æå‡é«˜å™ªå£°æ€§èƒ½ |
| **P1** | Elastic Net | L1+L2 æ··åˆæ­£åˆ™åŒ– | ç¨€ç–æ€§+ç¨³å®šæ€§ |
| **P2** | åˆ†åŒºé—´åˆ†æ | æŒ‰ $\log g$ åŒºé—´åˆ†æè¯¯å·®åˆ†å¸ƒ | è¯Šæ–­æ¨¡å‹ç›²ç‚¹ |

---

# 6. é™„å½•ï¼šæ‰€æœ‰å­å®éªŒç´¢å¼•

## 6.1 å®Œæ•´å®éªŒåˆ—è¡¨

| æ–‡ä»¶ | æ—¥æœŸ | ä¸»é¢˜ | çŠ¶æ€ |
|------|------|------|------|
| [exp_ridge_alpha_sweep_20251127.md](exp_ridge_alpha_sweep_20251127.md) | 2025-11-27 | Î± å‚æ•°æ‰«æ | âœ… å®Œæˆ |
| [exp_feature_importance_stability_20251128.md](exp_feature_importance_stability_20251128.md) | 2025-11-28 | ç‰¹å¾ç¨³å®šæ€§ | âœ… å®Œæˆ |
| [exp_error_logg_20251127.md](exp_error_logg_20251127.md) | 2025-11-27 | Error é€šé“åˆ†æ | âœ… å®Œæˆ |
| [exp_ridge_topk_20251129.md](exp_ridge_topk_20251129.md) | 2025-11-29 | Ridge TopK | âœ… å®Œæˆ |

## 6.2 ç›¸å…³å¤–éƒ¨æ–‡ä»¶

| ç±»å‹ | è·¯å¾„ |
|------|------|
| VIT æ€»ç»“ | `/home/swei20/VIT/docs/summaries/ridge_comprehensive.md` |
| çº¿æ€§å›å½’æ€»ç»“ | `/home/swei20/VIT/docs/summaries/linear_regression_summary.md` |

## 6.3 ä¸å…¶ä»–ç›®å½•çš„å…³è”

| ç›®å½• | å…³è”ä¸»é¢˜ | é“¾æ¥ |
|------|----------|------|
| `NN/` | Residual MLP (å­¦ä¹  Ridge æ®‹å·®) | [NN_main](../NN/NN_main_20251130.md) |
| `lightgbm/` | æ ‘æ¨¡å‹å¯¹æ¯” | [lightgbm_main](../lightgbm/lightgbm_main_20251130.md) |
| `pca/` | PCA+Ridge ç»„åˆ | [pca_main](../pca/pca_main_20251130.md) |
| `noise/` | Ridge ç‰¹å¾é€‰æ‹©å™¨ | [noise_main](../noise/noise_main_20251130.md) |

## 6.4 å¯¹ NN è®¾è®¡çš„å¯ç¤º

| è®¾è®¡åŸåˆ™ | å…·ä½“å»ºè®® | æ¥æº |
|---------|---------|------|
| **ä¿¡æ¯è¿‡æ»¤ä¼˜å…ˆ** | NN ä¸»è¦ä»»åŠ¡æ˜¯"å­¦ä¼šå¿½ç•¥å“ªäº›åƒç´ " | Ridge Î± å®éªŒ |
| **Linear shortcut** | å…ˆç”¨ Ridge é¢„æµ‹ï¼Œå†å­¦ä¹ æ®‹å·® | çº¿æ€§æœ¬è´¨ |
| **Weight decay ä¸å™ªå£°æŒ‚é’©** | å™ªå£°è¶Šå¤§ï¼Œæ­£åˆ™åŒ–è¶Šå¼º | æœ€ä¼˜ Î± è§„å¾‹ |
| **åŒé€šé“è¾“å…¥** | [flux, Ïƒ] åŒé€šé“ | Error é€šé“å®éªŒ |

---

*æœ€åæ›´æ–°: 2025-12-22*  
*æ€»å®éªŒæ•°: 52+ é…ç½®ç»„åˆ (Î± Ã— noise) + 26 å¤§æ ·æœ¬ Î± æ‰«æ*  
*æ ¸å¿ƒå‘ç°: $\log g$-flux æ˜ å°„æœ¬è´¨çº¿æ€§ï¼ŒNN çš„ä¸»è¦ä»»åŠ¡æ˜¯"å­¦ä¼šå¿½ç•¥æ— å…³åƒç´ "*  
*ğŸ†• æ–°å¢: 100k/1M æ ·æœ¬ä¸‹æœ€ä¼˜ Î± åœ¨ 3e4~1e5 èŒƒå›´ï¼Œå€’ U å‹æ›²çº¿éªŒè¯*

