# ğŸƒ Ridge/Alpha/A Leaf
> **Name:** æ­£åˆ™åŒ–å¼ºåº¦(Î±)è°ƒä¼˜å®éªŒ | **ID:** `L-RIDGE-ALPHA-A`  
> **Topic:** `ridge` | **Branch:** `alpha` | **Type:** MVP  
> **Author:** Viska Wei | **Date:** 2025-11-27 | **Status:** âœ… Done
```
ğŸ’¡ Ridge æœ€ä¼˜ Î± å¦‚ä½•éšå™ªå£°å˜åŒ–ï¼Ÿæ­£åˆ™åŒ–æ”¶ç›Šå¤šå¤§ï¼Ÿ  
å‡è®¾ï¼šæœ€ä¼˜ Î± éšå™ªå£°å•è°ƒå¢å¤§ï¼›æ­£åˆ™åŒ–åœ¨æ‰€æœ‰å™ªå£°ä¸‹ä¼˜äº OLS
```

---

## ğŸ”— Tree Links
| Type | Path |
|------|------|
| ğŸŒ¿ Branch | [`branch_ridge__alpha.md`](./branch_ridge__alpha.md) |
| patch_of | - |
| patch_reason | - |

---

## âš¡ Leaf Summary

### MVP Spec
| Item | Value |
|------|-------|
| å˜é‡ | Î± âˆˆ [0.001~1000], noise âˆˆ [0~2.0] |
| å¯¹ç…§ | OLS (æ— æ­£åˆ™åŒ–) |
| æ ·æœ¬é‡ | ~32k è®­ç»ƒ |
| é¢„ç®—ä¸Šé™ | <1å°æ—¶ |

### Stop Rule
| Outcome | Condition | Action |
|---------|-----------|--------|
| æˆåŠŸ | æ‰¾åˆ°å„å™ªå£°ä¸‹æœ€ä¼˜ Î± | å®Œæˆ |
| å¤±è´¥ | æ— æ˜æ˜¾è§„å¾‹ | æ£€æŸ¥æ•°æ®/å®ç° |

### Key Result
> âœ… æœ€ä¼˜ Î± éšå™ªå£°å•è°ƒå¢å¤§ï¼š0.001 (n=0) â†’ 10 (n=0.2) â†’ 200 (n=1.0) â†’ 1000 (n=2.0)  
> âœ… noise=0 æ—¶ RÂ²=0.999ï¼ŒéªŒè¯å…‰è°±-log_g æ˜ å°„æœ¬è´¨çº¿æ€§  
> âœ… Ridge åœ¨æ‰€æœ‰å™ªå£°ä¸‹ä¼˜äº OLSï¼šÎ” RÂ² +3.1% (n=0) â†’ +68.4% (n=2.0)

### Decision
> âœ… æ”¯æŒå‡è®¾ â†’ NEXT: æµ‹è¯•æ›´å¤§æ•°æ®é‡(100k)æ˜¯å¦æ”¹å˜ç»“è®º

---

## ğŸ“Š Config

### Data Config
> | é¡¹ç›® | å€¼ |
> |------|-----|
> | train_size | ~32k |
> | test_size | ~1k |
> | noise_levels | [0, 0.1, 0.2, 0.5, 1.0, 2.0] |
> | data_version | v1 |
> | split_seed | default |
>
> **MODEL CONFIGï¼ˆåšå®Œå¿…å¡«ï¼‰:**
> | é¡¹ç›® | å€¼ |
> |------|-----|
> | model | sklearn.linear_model.Ridge |
> | Î± | [0.001, 0.01, 0.1, 1, 10, 100, 1000] |
> | å…¶ä»–è¶…å‚ | - |
>
> **SEED/REPEATS:** single run
>
> **COMMAND/SCRIPT:**
> ```bash
> cd ~/VIT && source init.sh && python scripts/alpha_sweep.sh
> ```
>
> **OUTPUT ARTIFACTS:**
> | ç±»å‹ | è·¯å¾„ |
> |------|------|
> | csv | `results/linear_alpha_search/linear_alpha_sweep.csv` |
> | fig | `logg/ridge/img/ridge_r2_vs_alpha_by_noise.png` |

---

## 1. ğŸ¯ èƒŒæ™¯ä¸åŠ¨æœºï¼ˆçŸ­ï¼‰

### 1.1 ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªå®éªŒï¼Ÿ
é¢„æµ‹ log_g æ—¶ï¼ŒæŠŠæ— å…³åƒç´ "æ‰”æ‰"æ¯”"ä¿ç•™"æ›´æœ‰æ•ˆã€‚
éªŒè¯ 4096 ç»´å…‰è°±ä¸­æ˜¯å¦å­˜åœ¨å¤§é‡ä¸ log_g å®Œå…¨æ— å…³çš„åƒç´ /ä¿¡æ¯ã€‚

### 1.2 ä¸ä¸Šæ¸¸çš„å…³ç³»
- æ¥è‡ª branch: alpha
- éªŒè¯å‡è®¾: NN çš„ä¸»è¦ä»»åŠ¡æ˜¯"åˆ æ‰æ— ç”¨ä¿¡æ¯"è€Œé"æå–æœ‰ç”¨ä¿¡æ¯"
- å‰ç½®å®éªŒ: æ— ï¼ˆbaselineï¼‰

---

## 2. ğŸ§ª å®éªŒè®¾è®¡

### 2.1 å˜é‡ä¸å¯¹ç…§
| ç±»å‹ | å˜é‡å | å–å€¼èŒƒå›´ | è¯´æ˜ |
|------|--------|---------|------|
| è‡ªå˜é‡ | Î± | [0.001, 0.01, 0.1, 1, 10, 100, 1000] | æ­£åˆ™åŒ–å¼ºåº¦ |
| è‡ªå˜é‡ | noise_level | [0, 0.1, 0.2, 0.5, 1.0, 2.0] | å™ªå£°æ°´å¹³ |
| å¯¹ç…§ | OLS | Î±=0 ç­‰æ•ˆ | æ— æ­£åˆ™åŒ–åŸºçº¿ |

### 2.2 æ•°æ®é…ç½®
| é¡¹ç›® | é…ç½® |
|------|------|
| è®­ç»ƒé›† | ~32k æ ·æœ¬ |
| æµ‹è¯•é›† | ~1k æ ·æœ¬ |
| ç‰¹å¾ | 4096 ç»´å…‰è°± flux |
| å™ªå£°æ¨¡å‹ | noisy_flux = flux + N(0,1) Ã— error Ã— noise_level |

### 2.3 æ¨¡å‹é…ç½®
| é¡¹ç›® | é…ç½® |
|------|------|
| æ¨¡å‹ | sklearn.linear_model.Ridge |
| è¶…å‚æœç´¢ | 7Ã—6=42 é…ç½® |
| è¯„ä»·æŒ‡æ ‡ | RÂ², MAE, RMSE |

---

## 3. ğŸ“Š ç»“æœ

### 3.1 ä¸»è¦ç»“æœè¡¨

| Noise | Best Î± | Ridge RÂ² | OLS RÂ² | Î” RÂ² | ç›¸å¯¹æ”¹è¿› |
|-------|--------|----------|--------|------|----------|
| 0.0 | 0.001 | **0.999** | 0.969 | +0.030 | +3.1% |
| 0.1 | 1.0 | **0.909** | 0.901 | +0.008 | +0.9% |
| 0.2 | 10.0 | **0.826** | 0.811 | +0.016 | +1.9% |
| 0.5 | 50.0 | **0.655** | 0.608 | +0.048 | +7.8% |
| 1.0 | 200.0 | **0.458** | 0.385 | +0.073 | +18.9% |
| 2.0 | 1000.0 | **0.221** | 0.131 | +0.090 | +68.4% |

### 3.2 å…³é”®å›¾è¡¨
![Ridge RÂ² vs Alpha](../../img/ridge_r2_vs_alpha_by_noise.png)
**è§‚å¯Ÿ:** æœ€ä¼˜ Î± éšå™ªå£°å•è°ƒå³ç§»ï¼›é«˜å™ªå£°ä¸‹æ›²çº¿æ›´å¹³ç¼“

### 3.3 å…³é”®æ•°å­—
| æŒ‡æ ‡ | å€¼ | æ¡ä»¶ |
|------|-----|------|
| Best RÂ² (noiseless) | 0.999 | Î±=0.001 |
| Best RÂ² (high noise) | 0.221 | Î±=1000, noise=2.0 |
| æ­£åˆ™åŒ–æœ€å¤§æ”¶ç›Š | +68.4% | noise=2.0 |
| Î± å˜åŒ–èŒƒå›´ | 10â¶ å€ | 0.001 â†’ 1000 |

---

## 4. ğŸ’¡ åˆ†æ

### 4.1 ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ
- **å…‰è°±å«æ— å…³ä¿¡æ¯**ï¼šå³ä½¿ noise=0ï¼Œæ­£åˆ™åŒ–ä¹Ÿèƒ½å°† RÂ² ä» 0.969 æå‡åˆ° 0.999
- **æœ€ä¼˜ Î± éšå™ªå£°å¢å¤§**ï¼šå™ªå£°è¶Šå¤§ï¼Œéœ€è¦"æ‰”æ‰"çš„æ— å…³åƒç´ è¶Šå¤š
- **ç‰©ç†è§£é‡Š**ï¼šlog_g ä¿¡æ¯åœ¨ä½é¢‘/å¹³æ»‘ç»“æ„ä¸­ï¼Œå™ªå£°æ±¡æŸ“é«˜é¢‘åˆ†é‡ï¼ŒÎ± èµ·"ä½é€šæ»¤æ³¢"ä½œç”¨

### 4.2 ä¸é¢„æœŸå¯¹æ¯”
| é¢„æœŸ | å®é™… | è§£é‡Š |
|------|------|------|
| Î± éšå™ªå£°å¢å¤§ | âœ… ç¬¦åˆ | bias-variance tradeoff |
| Ridge > OLS | âœ… ç¬¦åˆ | ä¿¡æ¯è¿‡æ»¤æœ‰ç›Š |
| noise=0 è¿‘å®Œç¾ | âœ… RÂ²=0.999 | æ˜ å°„æœ¬è´¨çº¿æ€§ |

### 4.3 æ„å¤–å‘ç°
- Î± å˜åŒ–è·¨ 6 ä¸ªæ•°é‡çº§ï¼Œæ¯”é¢„æœŸæ›´å‰§çƒˆ
- æ­£åˆ™åŒ–æ”¶ç›Šåœ¨é«˜å™ªå£°ä¸‹é«˜è¾¾ +68.4%

---

## 5. ğŸ“ ç»“è®ºä¸ä¸‹ä¸€æ­¥

### 5.1 å‡è®¾éªŒè¯
| å‡è®¾ | ç»“æœ | è¯æ® |
|------|------|------|
| æœ€ä¼˜ Î± éšå™ªå£°å¢å¤§ | âœ… æˆç«‹ | 0.001â†’1000 |
| Ridge > OLS åœ¨æ‰€æœ‰å™ªå£° | âœ… æˆç«‹ | Î” +0.9%~+68.4% |
| æ˜ å°„æœ¬è´¨çº¿æ€§ | âœ… æˆç«‹ | RÂ²=0.999 @ noise=0 |

### 5.2 æ ¸å¿ƒç»“è®ºï¼ˆç»™ branchï¼‰
1. å…‰è°±-log_g æ˜ å°„æœ¬è´¨çº¿æ€§ï¼ˆRÂ²=0.999ï¼‰
2. æœ€ä¼˜ Î± éšå™ªå£°å•è°ƒå¢å¤§ï¼Œè·¨ 6 ä¸ªæ•°é‡çº§
3. æ­£åˆ™åŒ–æ€»æ˜¯æœ‰ç›Šï¼Œæ”¶ç›Šéšå™ªå£°å¢å¤§

### 5.3 è®¾è®¡å¯ç¤º
| å¯ç¤º | å»ºè®® |
|------|------|
| Linear shortcut | æ¨¡å‹è®¾è®¡ä¸º $\hat{y} = w^\top x + g_\theta(x)$ |
| è‡ªé€‚åº” weight decay | æ ¹æ® SNR ä¼°è®¡é€‰æ‹© Î± |
| ä¿¡æ¯è¿‡æ»¤ä¼˜å…ˆ | NN åº”ä¾§é‡ Attention/Sparse/Denoising |

### 5.4 ç»™ grow çš„å»ºè®®
| å»ºè®®ç±»å‹ | å…·ä½“å†…å®¹ | ä¼˜å…ˆçº§ |
|---------|---------|--------|
| éªŒè¯ | 100k æ•°æ®æ˜¯å¦æ”¹å˜ç»“è®º | P0 |
| æ¢ç´¢ | å…¶ä»–å‚æ•°(Teff, [Fe/H]) | P2 |

---

## 6. ğŸ“ é™„å½•

### 6.1 å®Œæ•´æ•°å€¼ç»“æœ

#### Noise = 0.0ï¼ˆæ— å™ªå£°ï¼‰
| Alpha | RÂ² | MAE | RMSE |
|-------|-----|-----|------|
| 0.001 | **0.999** | 0.006 | 0.009 |
| 0.01 | 0.998 | 0.009 | 0.014 |
| 0.1 | 0.993 | 0.016 | 0.024 |
| 1.0 | 0.978 | 0.029 | 0.043 |
| 10.0 | 0.930 | 0.055 | 0.077 |
| 100.0 | 0.794 | 0.101 | 0.132 |
| 1000.0 | 0.472 | 0.180 | 0.212 |
| OLS | 0.969 | 0.038 | 0.051 |

### 6.2 å®éªŒæµç¨‹è®°å½•
```bash
# æ‰§è¡Œå‘½ä»¤
cd ~/VIT && source init.sh && python scripts/alpha_sweep.sh

# è¾“å‡ºç›®å½•
~/VIT/results/linear_alpha_search/
â”œâ”€â”€ linear_alpha_sweep.csv      # 42 é…ç½®ç»“æœ
â””â”€â”€ metadata.json               # å®éªŒå…ƒæ•°æ®

# å›¾è¡¨ç›®å½•
~/Physics_Informed_AI/logg/ridge/img/
â”œâ”€â”€ ridge_metrics_vs_alpha_by_noise.png
â”œâ”€â”€ ridge_r2_vs_alpha_by_noise.png
â””â”€â”€ ridge_r2_vs_alpha_by_snr_32k.png
```

### 6.3 è°ƒè¯•å¤‡æ³¨
- æ— ç‰¹æ®Šé—®é¢˜

---

*å®Œæˆæ—¥æœŸ: 2025-11-27*
*åŸå§‹æŠ¥å‘Š: logg/ridge/exp/exp_ridge_alpha_sweep_20251127.md*

