# ğŸ—ºï¸ Ridge Experiment Roadmap

> **Topic:** Ridge Regression for log_g | **Author:** Viska Wei  
> **Created:** 2025-11-27 | **Updated:** 2025-12-24 | **Phase:** 2 (Gate Verification)

## ğŸ”— Related Files
| Type | File |
|------|------|
| ğŸ§  Hub | `ridge_hub_20251223.md` |
| ğŸ“‹ Kanban | `status/kanban.md` |
| ğŸ“— Experiments | `exp/*.md` |

---

# 1. ğŸš¦ Decision Gates

> Roadmapå®šä¹‰éªŒè¯æ–¹å¼ï¼Œæˆ˜ç•¥ç†ç”±è§Hub Â§2

## 1.1 æˆ˜ç•¥è·¯çº¿ (æ¥è‡ªHub)

| Route | åç§° | Hubæ¨è | éªŒè¯Gate |
|-------|------|---------|----------|
| I | ä¿¡æ¯ä¸Šé™ | ğŸŸ¡ | Gate-1 |
| **M** | è¡¨å¾/æ¨¡å‹ | ğŸŸ¢ **æ¨è** | Gate-2 |
| S | Ïƒé€šé“ | ğŸŸ¡ | Gate-3 |

## 1.2 Gateå®šä¹‰

### Gate-1: Fisherä¸Šé™é—¨

| é¡¹ | å†…å®¹ |
|----|------|
| éªŒè¯ | ä¿¡æ¯è®ºä¸Šé™å¤šå°‘ï¼ŸRidgeçš„0.50æ˜¯ä¿¡æ¯è¿˜æ˜¯æ¨¡å‹ä¸Šé™ï¼Ÿ |
| MVP | MVP-2.0 |
| è‹¥â‰¤0.6 | â†’ Route I (ä¿¡æ¯ä¸»å¯¼) |
| è‹¥â‰¥0.8 | â†’ Route M (æ¨¡å‹ä¸»å¯¼) |
| çŠ¶æ€ | â³ |

### Gate-2: è¡¨å¾è·³å˜é—¨

| é¡¹ | å†…å®¹ |
|----|------|
| éªŒè¯ | è½»é‡è¡¨å¾æ”¹è¿›èƒ½å¦å¸¦æ¥è·³å˜ï¼Ÿ |
| MVP | MVP-2.1(å½¢çŠ¶), MVP-2.2(SNR-aware) |
| è‹¥>10% | â†’ Route Mç¡®è®¤ |
| è‹¥<5% | â†’ å›Gate-1æ·±æŒ– |
| çŠ¶æ€ | â³ |

### Gate-3: Ïƒå®¡è®¡é—¨

| é¡¹ | å†…å®¹ |
|----|------|
| éªŒè¯ | Ïƒæ˜¯ç‰©ç†ä¿¡æ¯è¿˜æ˜¯æ·å¾„(selection effect)ï¼Ÿ |
| MVP | MVP-2.3 |
| è‹¥æ‰åˆ†>50% | â†’ Ïƒæ˜¯æ·å¾„ï¼Œåªç”¨äºè¯Šæ–­ |
| è‹¥æ‰åˆ†<20% | â†’ Ïƒè¿›å…¥ä¸»æ¨¡å‹ |
| çŠ¶æ€ | â³ |

## 1.3 æœ¬å‘¨é‡ç‚¹

| ä¼˜å…ˆçº§ | MVP | Gate | çŠ¶æ€ |
|--------|-----|------|------|
| ğŸ”´ P0 | MVP-2.2: SNR-aware Ridge | Gate-2 | â³ |
| ğŸ”´ P0 | MVP-2.0: Fisher check | Gate-1 | â³ |
| ğŸŸ¡ P1 | MVP-2.3: Ïƒå®¡è®¡ | Gate-3 | â³ |

## 1.4 Gateè¿›åº¦æµ

```
Hubæ¨è: Route M
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gate-1: Fisher  â”‚ â³
â”‚ MVP-2.0         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“â‰¤0.6      â†“â‰¥0.8
Route I    Route M
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gate-2   â”‚ â³   â”‚ Gate-3   â”‚ â³
â”‚ è¡¨å¾è·³å˜  â”‚      â”‚ Ïƒå®¡è®¡    â”‚
â”‚ MVP-2.1,2â”‚      â”‚ MVP-2.3  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# 2. ğŸ“‹ MVPåˆ—è¡¨

## 2.1 æ€»è§ˆ

| MVP | åç§° | Phase | Gate | çŠ¶æ€ | exp_id | æŠ¥å‘Š |
|-----|------|-------|------|------|--------|------|
| 0.1 | Î± Sweep | 0 | - | âœ… | `VIT-20251127-ridge-alpha-01` | [exp](./exp/exp_ridge_alpha_sweep_20251127.md) |
| 0.2 | Erroråˆ†æ | 0 | - | âœ… | `VIT-20251127-ridge-error-01` | [exp](./exp/exp_error_logg_20251127.md) |
| 0.3 | ç‰¹å¾ç¨³å®šæ€§ | 0 | - | âœ… | `VIT-20251128-ridge-stability-01` | [exp](./exp/exp_feature_importance_stability_20251128.md) |
| 0.4 | Top-K | 0 | - | âœ… | `VIT-20251129-ridge-topk-01` | [exp](./exp/exp_ridge_topk_20251129.md) |
| 1.0 | 100k Sweep | 1 | - | âœ… | `BM-20251205-ridge-100k` | [exp](./exp/exp_ridge_100k_noise_sweep_20251205.md) |
| 1.1 | Î±æ‰©å±•(100k/1M) | 1 | - | âœ… | `VIT-20251222-scaling-ridge-01` | [exp](../scaling/exp/) |
| **2.0** | **Fisher Check** | 2 | Gate-1 | â³ | - | - |
| **2.1** | **å½¢çŠ¶ç‰¹å¾** | 2 | Gate-2 | â³ | - | - |
| **2.2** | **SNR-aware** | 2 | Gate-2 | â³ | - | - |
| **2.3** | **Ïƒå®¡è®¡** | 2 | Gate-3 | â³ | - | - |
| 3.0 | Mixture-of-Linear | 3 | - | â³ | - | - |

**çŠ¶æ€**: â³è®¡åˆ’ | ğŸ”´å°±ç»ª | ğŸš€è¿è¡Œ | âœ…å®Œæˆ | âŒå–æ¶ˆ

## 2.2 é…ç½®é€ŸæŸ¥

| MVP | æ•°æ® | æ¨¡å‹ | å…³é”®å˜é‡ | éªŒæ”¶ |
|-----|------|------|---------|------|
| 0.1 | 32k | Ridge | Î±âˆˆ[0.001,1000] | RÂ²â‰¥0.99 |
| 0.2 | 32k | Ridge+LightGBM | ç‰¹å¾ç±»å‹ | RÂ²>0.3 |
| 1.0 | 100k | Ridge | noiseâˆˆ[0,2] | vs 32kå¯¹æ¯” |
| 1.1 | 100k/1M | Ridge | Î±âˆˆ[1e2,1e8] | å€’Uå‹ |
| 2.0 | 32k | Fisher | - | ä¸Šé™ä¼°è®¡ |
| 2.1 | 32k | Ridge | ä¸€é˜¶/äºŒé˜¶å¯¼ | Î”RÂ²>10% |
| 2.2 | 32k | Weighted Ridge | [flux,Ïƒ,flux/Ïƒ] | Î”RÂ²>0 |
| 2.3 | 32k | LightGBM | shuffle Ïƒ | æ‰åˆ†å¹…åº¦ |

---

# 3. ğŸ”§ MVPè§„æ ¼

## Phase 0: Baseline (âœ…å®Œæˆ)

<details>
<summary>MVP-0.1~0.4 è¯¦æƒ…</summary>

### MVP-0.1: Î± Sweep
| é¡¹ | é…ç½® |
|----|------|
| ç›®æ ‡ | ä¸åŒå™ªå£°ä¸‹æœ€ä¼˜Î±ï¼ŒéªŒè¯çº¿æ€§å‡è®¾ |
| æ•°æ® | 32k/512, 4096 flux |
| Î± | [0.001,0.01,0.1,1,10,100,1000] |
| å™ªå£° | [0,0.1,0.2,0.5,1,2] |
| ç»“æœ | âœ… RÂ²=0.999, Î±è§„å¾‹ç¡®è®¤ |

### MVP-0.2: Erroråˆ†æ
| é¡¹ | é…ç½® |
|----|------|
| ç›®æ ‡ | Error Ïƒæ˜¯å¦å«log_gä¿¡æ¯ |
| æ•°æ® | 32k/512, 4096 error |
| ç»“æœ | âœ… LightGBM RÂ²=0.91, Linearâ‰ˆ0 |

### MVP-0.3: ç‰¹å¾ç¨³å®šæ€§
| é¡¹ | é…ç½® |
|----|------|
| ç›®æ ‡ | ç‰¹å¾é‡è¦æ€§å¯¹Î±/å™ªå£°çš„ç¨³å®šæ€§ |
| ç»“æœ | âœ… noise=0å­¤å²›, é«˜å™ªå£°ç¨³å®š |

### MVP-0.4: Top-K
| é¡¹ | é…ç½® |
|----|------|
| ç›®æ ‡ | Ridgeç³»æ•°çš„Top-Kç‰¹å¾é€‰æ‹© |
| ç»“æœ | âœ… nz1.0 selectoræ›´ä¼˜ |

</details>

## Phase 1: Scaling (âœ…å®Œæˆ)

<details>
<summary>MVP-1.0~1.1 è¯¦æƒ…</summary>

### MVP-1.0: 100k Noise Sweep
| é¡¹ | é…ç½® |
|----|------|
| ç›®æ ‡ | Ridgeå¯¹æ•°æ®é‡å¢ç›Š |
| æ•°æ® | 100k/1k |
| ç»“æœ | âœ… +2.71% avg |

### MVP-1.1: Î±æ‰©å±•
| é¡¹ | é…ç½® |
|----|------|
| ç›®æ ‡ | å¤§æ ·æœ¬æœ€ä¼˜Î± |
| Î± | [1e2..1e8] |
| ç»“æœ | âœ… 100k:Î±=3e4, 1M:Î±=1e5 |

</details>

## Phase 2: GateéªŒè¯ (â³å½“å‰)

### MVP-2.0: Fisher Check (Gate-1)

| é¡¹ | é…ç½® |
|----|------|
| ç›®æ ‡ | ä¼°è®¡noise=1ä¿¡æ¯è®ºä¸Šé™ |
| Gate | Gate-1 |
| æ–¹æ³• | Fisher Information / Cramer-Rao / Posterior variance |
| éªŒæ”¶ | å¯è§£é‡Šä¸Šé™ä¼°è®¡ |

â†’ è‹¥â‰¤0.6: Route I; è‹¥â‰¥0.8: Route M

### MVP-2.1: å½¢çŠ¶ç‰¹å¾ (Gate-2)

| é¡¹ | é…ç½® |
|----|------|
| ç›®æ ‡ | æ˜¾å¼å½¢çŠ¶ç‰¹å¾èƒ½å¦è·³å˜ |
| Gate | Gate-2 |
| ç‰¹å¾ | ä¸€é˜¶å¯¼ã€äºŒé˜¶å¯¼ã€å±€éƒ¨å¹³æ»‘å·®åˆ† |
| éªŒæ”¶ | Î”RÂ²>10% |

â†’ è‹¥>10%: ç“¶é¢ˆåœ¨representation â†’ Route M

### MVP-2.2: SNR-aware Ridge (Gate-2)

| é¡¹ | é…ç½® |
|----|------|
| ç›®æ ‡ | SNR-awareé€‰æ‹©æ€§è¿‡æ»¤ |
| Gate | Gate-2 |
| ç‰¹å¾ | [flux,Ïƒ,flux/Ïƒ] æˆ– weighted features |
| æ¨¡å‹ | Weighted Ridge(æŒ‰1/ÏƒÂ²åŠ æƒ) |
| éªŒæ”¶ | Î”RÂ²>0 |

â†’ è‹¥æå‡æ˜æ˜¾: é€‰æ‹©æ€§è¿‡æ»¤æ˜¯å…³é”® â†’ NN/MoEå›´ç»•SNRåšé—¨æ§

### MVP-2.3: Ïƒå®¡è®¡ (Gate-3)

| é¡¹ | é…ç½® |
|----|------|
| ç›®æ ‡ | Ïƒæ˜¯ç‰©ç†ä¿¡å·è¿˜æ˜¯æ·å¾„ |
| Gate | Gate-3 |
| æ–¹æ³• | (1)Shuffle Ïƒ (2)åªä¿ç•™Poissonéƒ¨åˆ† |
| æ¨¡å‹ | LightGBM(error-only) |
| éªŒæ”¶ | è§‚å¯Ÿæ‰åˆ†å¹…åº¦ |

â†’ è‹¥æ‰åˆ†>50%: Ïƒæ˜¯æ·å¾„; è‹¥<20%: Ïƒè¿›å…¥ä¸»æ¨¡å‹

## Phase 3: Extensions (â³è®¡åˆ’)

### MVP-3.0: Mixture-of-Linear

| é¡¹ | é…ç½® |
|----|------|
| ç›®æ ‡ | åˆ†åŒºä¸“å®¶èƒ½å¦è¶…è¶Šå…¨å±€Ridge |
| æ–¹æ³• | Teff/[M/H]åšgatingï¼Œåˆ†ç°‡Ridge |
| éªŒæ”¶ | è¶…è¿‡å…¨å±€Ridge |

---

# 4. ğŸ“Š è¿›åº¦è¿½è¸ª

## 4.1 çœ‹æ¿

```
â³è®¡åˆ’    ğŸ”´å°±ç»ª    ğŸš€è¿è¡Œ    âœ…å®Œæˆ
MVP-2.0                       MVP-0.1~0.4
MVP-2.1                       MVP-1.0
MVP-2.2                       MVP-1.1
MVP-2.3
MVP-3.0
```

## 4.2 Gateè¿›åº¦

| Gate | MVP | çŠ¶æ€ | ç»“æœ |
|------|-----|------|------|
| Gate-1 | MVP-2.0 | â³ | - |
| Gate-2 | MVP-2.1,2.2 | â³ | - |
| Gate-3 | MVP-2.3 | â³ | - |

## 4.3 ç»“è®ºå¿«ç…§

| MVP | ç»“è®º | å…³é”®æŒ‡æ ‡ | åŒæ­¥Hub |
|-----|------|---------|---------|
| 0.1 | æ˜ å°„æœ¬è´¨çº¿æ€§ï¼ŒÎ±éšå™ªå£°å•è°ƒå¢ | RÂ²=0.999, Î±:0.001â†’1000 | âœ… |
| 0.2 | Errorå«ç‰©ç†ä¿¡æ¯ï¼Œéçº¿æ€§ | LightGBM RÂ²=0.91 | âœ… |
| 0.3 | noise=0å­¤å²›ï¼Œé«˜å™ªå£°ç¨³å®š | Ï>0.95 | âœ… |
| 0.4 | Selectoréœ€åŒ¹é…æµ‹è¯•å™ªå£° | nz1.0æ›´ä¼˜ | âœ… |
| 1.0 | æ•°æ®é‡å¢ç›Šæœ‰é™ | +2.71% | âœ… |
| 1.1 | å¤§æ ·æœ¬Î±æ›´å¤§ï¼Œå­˜åœ¨å€’U | Î±=3e4(100k), 1e5(1M) | âœ… |

## 4.4 æ—¶é—´çº¿

| æ—¥æœŸ | äº‹ä»¶ |
|------|------|
| 2025-11-27 | MVP-0.1,0.2å®Œæˆ |
| 2025-11-28 | MVP-0.3å®Œæˆ |
| 2025-11-29 | MVP-0.4å®Œæˆ |
| 2025-11-30 | Phase 0æ€»ç»“ |
| 2025-12-05 | MVP-1.0å®Œæˆ |
| 2025-12-22 | MVP-1.1å®Œæˆ |
| 2025-12-23 | Hub/Roadmapé‡æ„ |
| TBD | Phase 2å¼€å§‹ |

---

# 5. ğŸ”— è·¨ä»“åº“é›†æˆ

## 5.1 å®éªŒç´¢å¼•

| exp_id | project | çŠ¶æ€ | MVP |
|--------|---------|------|-----|
| `VIT-20251127-ridge-alpha-01` | VIT | âœ… | 0.1 |
| `VIT-20251127-ridge-error-01` | VIT | âœ… | 0.2 |
| `VIT-20251128-ridge-stability-01` | VIT | âœ… | 0.3 |
| `VIT-20251129-ridge-topk-01` | VIT | âœ… | 0.4 |
| `BM-20251205-ridge-100k` | VIT | âœ… | 1.0 |
| `VIT-20251222-scaling-ridge-01` | VIT | âœ… | 1.1 |

## 5.2 ä»“åº“é“¾æ¥

| ä»“åº“ | è·¯å¾„ | ç”¨é€” |
|------|------|------|
| VIT | `~/VIT/results/linear_alpha_search/` | Î± sweep |
| VIT | `~/VIT/results/benchmark_ridge_100k/` | 100kç»“æœ |
| æœ¬ä»“åº“ | `logg/ridge/` | çŸ¥è¯†åº“ |

---

# 6. ğŸ“ é™„å½•

## 6.1 æ•°å€¼æ±‡æ€»

### Î± vs Noise (32k)

| Noise | Best Î± | Best RÂ² | OLS RÂ² | Î”RÂ² |
|-------|--------|---------|--------|-----|
| 0.0 | 0.001 | 0.999 | 0.969 | +3.1% |
| 0.1 | 1.0 | 0.909 | 0.901 | +0.9% |
| 0.5 | 50 | 0.655 | 0.608 | +7.8% |
| 1.0 | 200 | 0.458 | 0.385 | +18.9% |
| 2.0 | 1000 | 0.221 | 0.131 | +68.4% |

### Î± vs æ•°æ®é‡ (noise=1)

| æ•°æ®é‡ | Best Î± | RÂ² |
|--------|--------|-----|
| 32k | 200 | 0.458 |
| 100k | 3.16e4 | 0.486 |
| 1M | 1e5 | 0.455 |

### æ ‡å‡†åŸºå‡† (1M train, 1k test, Ïƒ=1)

| Î± | Test RÂ² |
|---|---------|
| 50k | 0.4531 |
| **100k** | **0.4551** âœ… |
| 500k | 0.4543 |
| 1M | 0.4360 |

### vs Oracle MoE

| Model | RÂ² | Î”RÂ² |
|-------|-----|-----|
| Global Ridge | 0.4551 | baseline |
| Oracle MoE(9 bins) | 0.6249 | **+0.16** |

## 6.2 æ–‡ä»¶ç´¢å¼•

| ç±»å‹ | è·¯å¾„ |
|------|------|
| Roadmap | `ridge_roadmap_20251223.md` |
| Hub | `ridge_hub_20251223.md` |
| å›¾è¡¨ | `img/` |

## 6.3 æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | å˜æ›´ |
|------|------|
| 2025-12-24 | ç²¾ç®€é‡æ„ï¼Œæ·»åŠ æ ‡å‡†åŸºå‡† |
| 2025-12-23 | æ–°å¢Â§1 Decision Gates |
| 2025-12-22 | MVP-1.1å®Œæˆ |
| 2025-12-05 | MVP-1.0å®Œæˆ |
| 2025-11-30 | Phase 0å®Œæˆ |
