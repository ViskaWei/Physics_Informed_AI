# ğŸ“‡ Knowledge Card: Whitening/SNR è¾“å…¥é¢„å¤„ç†è®¾è®¡åŸåˆ™

> **Name:** Whitening Design Principles | **ID:** `VIT-20251226-whitening-principles-card`  
> **Topic:** `scaling` | **Source:** `exp_whitening_design_principles_20251226.md` | **Project:** `VIT`  
> **Author:** Viska Wei | **Date:** 2025-12-26
> ```
> ğŸ’¡ æ ¸å¿ƒåŸåˆ™ï¼šä¸åŒæ¨¡å‹å¯¹è¾“å…¥é¢„å¤„ç†çš„éœ€æ±‚å®Œå…¨ä¸åŒï¼Œä¸èƒ½ä¸€æ¦‚è€Œè®º
> é€‚ç”¨ï¼šè¾“å…¥é¢„å¤„ç†ç­–ç•¥é€‰æ‹©ã€æ¨¡å‹è®¾è®¡å†³ç­–
> ```

---

## ğŸ¯ æ ¸å¿ƒè®¾è®¡åŸåˆ™

| æ¨¡å‹ç±»å‹ | âœ… æ¨èè¾“å…¥ | âŒ ç¦æ­¢æ“ä½œ | æ€§èƒ½å½±å“ |
|---------|-----------|-----------|---------|
| **LightGBM/æ ‘æ¨¡å‹** | `raw flux` | whitening, standardization | raw: RÂ²=0.5533<br>std: RÂ²=0.1966 (-36%)<br>snr: RÂ²=0.0074 (-98%) |
| **Ridge/çº¿æ€§æ¨¡å‹** | `standardized` æˆ– `snr_centered` | æ—  | raw: RÂ²=0.5077<br>std: RÂ²=0.5077<br>snr_centered: RÂ²=0.5222 (+1.5%) |
| **NN (MLP/CNN)** | `flux_only` + BatchNorm | whiteningéœ€è°¨æ… | raw: RÂ²=0.44-0.47<br>whitening: å¤šæ•°å¤±è´¥ |

---

## ğŸ“Š å…³é”®å®éªŒç»“æœ

### Ridge (1M samples)
- âœ… **snr_centered**: RÂ²=0.5222ï¼ˆæœ€ä½³ï¼Œ+1.5%ï¼‰
- âœ… **standardized**: RÂ²=0.5077ï¼ˆåŸºå‡†ï¼‰
- âœ… **raw**: RÂ²=0.5077ï¼ˆå‡ ä¹ç›¸åŒï¼‰

### LightGBM (100k samples)
- â­ **raw**: RÂ²=0.5533ï¼ˆæœ€ä½³ï¼ï¼‰
- âŒ **standardized**: RÂ²=0.1966ï¼ˆ-36%ï¼‰
- âŒ **snr**: RÂ²=0.0074ï¼ˆ-98%ï¼Œå‡ ä¹å¤±æ•ˆï¼‰

### NN (100k samples)
- â­ **MLP + flux_only**: RÂ²=0.44-0.47ï¼ˆç¨³å®šï¼‰
- âš ï¸ **MLP + whitening**: RÂ²â‰ˆ0.12æˆ–å¤±è´¥ï¼ˆ~70%å¤±è´¥ç‡ï¼‰
- â­ **CNN + flux_only**: RÂ²=0.41ï¼ˆç¨³å®šï¼‰
- âš ï¸ **CNN + whitening**: RÂ²=0.34-0.43ï¼ˆéœ€BatchNormï¼Œéƒ¨åˆ†æˆåŠŸï¼‰

---

## ğŸ’¡ æ ¸å¿ƒæ´è§

### ğŸ—ï¸ åŸåˆ™1: æ¨¡å‹ç±»å‹å†³å®šé¢„å¤„ç†ç­–ç•¥

**ä¸èƒ½å¯¹æ‰€æœ‰æ¨¡å‹ç»Ÿä¸€ä½¿ç”¨StandardScalerï¼**

- æ ‘æ¨¡å‹ï¼šå¿…é¡»ç”¨rawï¼Œä»»ä½•å½’ä¸€åŒ–éƒ½ä¼šæŸå®³æ€§èƒ½
- çº¿æ€§æ¨¡å‹ï¼šå¯ä»¥ç”¨standardizedæˆ–whitening
- ç¥ç»ç½‘ç»œï¼šä¼˜å…ˆç”¨raw + BatchNormï¼Œé¿å…whitening

### ğŸ”§ åŸåˆ™2: Whiteningä¸æ˜¯é“¶å¼¹

- ç†è®ºä¸Šåˆç†ï¼ˆè®©æ¨¡å‹çŸ¥é“å“ªäº›åƒç´ å¯ä¿¡ï¼‰
- å®é™…æ•ˆæœæœ‰é™ï¼ˆRidge +1.5%ï¼ŒLightGBM -98%ï¼ŒNNä¸ç¨³å®šï¼‰
- å¿…é¡»é’ˆå¯¹å…·ä½“æ¨¡å‹éªŒè¯

### âš™ï¸ åŸåˆ™3: æ ‘æ¨¡å‹å¿…é¡»ä¿æŒåŸå§‹åˆ†å¸ƒ

**ä¸ºä»€ä¹ˆLightGBMä¸èƒ½whiteningï¼Ÿ**

1. æ ‘æ¨¡å‹åŸºäºé˜ˆå€¼åˆ†å‰²ï¼Œå¯¹å•è°ƒå˜æ¢ç†è®ºä¸Šä¸æ•æ„Ÿ
2. ä½†whiteningæ”¹å˜äº†åˆ†å¸ƒå½¢çŠ¶å’Œæ•°å€¼èŒƒå›´
3. å¯¼è‡´æœ€ä¼˜åˆ†è£‚ç‚¹å˜åŒ–ï¼Œç ´åå­¦åˆ°çš„æ¨¡å¼

### ğŸ§  åŸåˆ™4: ç¥ç»ç½‘ç»œéœ€è¦ç¨³å®šçš„æ•°å€¼èŒƒå›´

**ä¸ºä»€ä¹ˆNN whiteningå®¹æ˜“å¤±è´¥ï¼Ÿ**

1. `flux/error`æ•°å€¼èŒƒå›´å¯èƒ½å¾ˆå¤§ï¼ˆerrorå¾ˆå°çš„åœ°æ–¹ä¼šå¾ˆå¤§ï¼‰
2. å¯¼è‡´æ¢¯åº¦çˆ†ç‚¸æˆ–æ¶ˆå¤±
3. BatchNormå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£ï¼Œä½†æ€»ä½“ä¸æ¨è

---

## ğŸ“‹ å¿«é€Ÿå†³ç­–è¡¨

```
é€‰æ‹©æ¨¡å‹ç±»å‹
    â”‚
    â”œâ”€â†’ LightGBM/æ ‘æ¨¡å‹
    â”‚   â””â”€â†’ âœ… ä½¿ç”¨ raw fluxï¼ˆç¦æ­¢whitening/standardizationï¼‰
    â”‚
    â”œâ”€â†’ Ridge/çº¿æ€§æ¨¡å‹
    â”‚   â””â”€â†’ âœ… ä½¿ç”¨ standardized æˆ– snr_centeredï¼ˆå‡å¯ï¼‰
    â”‚
    â””â”€â†’ NN (MLP/CNN)
        â””â”€â†’ âœ… ä½¿ç”¨ flux_only + BatchNormï¼ˆé¿å…whiteningï¼‰
```

---

## âœ… ä»£ç æ£€æŸ¥æ¸…å•

- [ ] **LightGBM**: ç¡®è®¤ä½¿ç”¨raw fluxï¼Œæœªåº”ç”¨StandardScaleræˆ–whitening
- [ ] **Ridge**: ç¡®è®¤ä½¿ç”¨standardizedæˆ–snr_centered
- [ ] **NN**: ç¡®è®¤ä½¿ç”¨flux_only + BatchNorm/LayerNorm
- [ ] **å®éªŒéªŒè¯**: æ–°æ¨¡å‹å¿…é¡»å¯¹æ¯”raw vs whitening vs standardizedçš„æ€§èƒ½

---

## ğŸ”¬ ç†è®ºæ”¯æŒ

### æ ‘æ¨¡å‹ä¸å°ºåº¦ä¸å˜æ€§
- ç†è®ºï¼šå†³ç­–æ ‘å¯¹å•è°ƒå˜æ¢ä¸æ•æ„Ÿ
- å®è·µï¼šä½†whiteningæ”¹å˜äº†åˆ†å¸ƒå½¢çŠ¶ï¼Œç ´åå­¦åˆ°çš„æ¨¡å¼

### çº¿æ€§æ¨¡å‹ä¸æ¡ä»¶æ•°
- Standardizationæ”¹å–„æ¡ä»¶æ•°ï¼Œæé«˜æ•°å€¼ç¨³å®šæ€§
- Whiteningæä¾›éšå¼åŠ æƒä¿¡æ¯ï¼ˆä½SNRåŒºåŸŸæƒé‡é™ä½ï¼‰

### ç¥ç»ç½‘ç»œçš„æ¢¯åº¦ç¨³å®šæ€§
- Whiteningå¯¼è‡´æ•°å€¼èŒƒå›´è¿‡å¤§
- ç ´åæ¢¯åº¦æµåŠ¨ï¼Œéœ€è¦BatchNormè¾…åŠ©

---

## ğŸ”— ç›¸å…³é“¾æ¥

| ç±»å‹ | è·¯å¾„ |
|------|------|
| ğŸ“˜ å®Œæ•´è®¾è®¡åŸåˆ™ | `exp/exp_whitening_design_principles_20251226.md` |
| ğŸ“Š å®éªŒæŠ¥å‘Š | `exp/exp_scaling_whitening_snr_20251222.md` |
| ğŸ“‡ åŸçŸ¥è¯†å¡ç‰‡ | `card/card_whitening_snr_20251222.md` |
| ğŸ§ª NNåŸºçº¿å®éªŒ | `exp/exp_scaling_nn_baseline_framework_20251224.md` |

---

## ğŸ“ å…³é”®æ•°å­—é€ŸæŸ¥

| Metric | Value | Condition |
|--------|-------|-----------|
| **Ridgeæœ€ä½³** | 0.5222 (snr_centered) | 1M, Ïƒ=1 |
| **LightGBMæœ€ä½³** | 0.5533 (raw) | 100k, Ïƒ=1 |
| **LightGBMæ ‡å‡†åŒ–æŸå¤±** | -36% | 100k, Ïƒ=1 |
| **LightGBM whiteningæŸå¤±** | -98% | 100k, Ïƒ=1 |
| **MLPæœ€ä½³** | 0.44-0.47 (flux_only) | 100k, Ïƒ=1 |
| **NN whiteningå¤±è´¥ç‡** | ~70% | 100k, Ïƒ=1 |

---

> **æ›´æ–°**: æ•´åˆRidgeã€LightGBMã€NNä¸‰å¤§ç±»æ¨¡å‹çš„å®éªŒç»“æœï¼Œå½¢æˆç»Ÿä¸€çš„è®¾è®¡åŸåˆ™

