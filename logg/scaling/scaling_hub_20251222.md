# ğŸ§  Scaling Hub â€” æ•°æ®è§„æ¨¡ä¸æ¨¡å‹å®¹é‡
> **ID:** VIT-20251222-scaling-hub | **Status:** ğŸŒ·æ”¶æ•› |  
> **Date:** 2025-12-22 | **Update:** 2025-12-27  
> **Scope:** BOSZ åˆæˆå…‰è°± â†’ log_g å›å½’  
> **Focus:** noise=1 (é«˜å™ªå£°) + å¤§æ•°æ® (â‰¥100k, up to 1M)

| # | ğŸ’¡ å…±è¯† | è¯æ® | å†³ç­– |
|---|--------|------|------|
| K1 | **ä¼ ç»Ÿ ML å­˜åœ¨æ˜ç¡® ceiling**ï¼šRidgeâ‰ˆ0.46, LightGBMâ‰ˆ0.57 | 1M/1k test | ç»§ç»­å †æ•°æ®æ— æ„ä¹‰ |
| K2 | **ç†è®ºä¸Šé™ RÂ²_max=0.87 >> å½“å‰æœ€ä½³**ï¼Œå­˜åœ¨ +30% headroom | Fisher 5D ceiling | ç»§ç»­æŠ• CNN/MoE å€¼å¾— |
| K3 | **Soft-gate MoE ä¿ç•™ 80.5% Oracle æ”¶ç›Š** (Ï=0.805) | RÂ²=0.59 vs Oracle=0.62 | MoE æ˜¯ noise=1 å¯è½åœ°ä¸»çº¿ |
| K4 | **100kâ†’1M å¯¹ä¼ ç»Ÿ ML å¢ç›Š <3%** | scaling å®éªŒ | èµ„æºåº”è½¬å‘æ¨¡å‹/ç»“æ„ |
| K5 | **Pipeline å¯¹æ¨¡å‹å½±å“å·¨å¤§**ï¼šLightGBM å¿…é¡» rawï¼ŒNN å¿…é¡» flux_only | whitening å®éªŒ | é¢„å¤„ç†æŒ‰æ¨¡å‹å®šåˆ¶ |

**ğŸ¦¾ ç°é˜¶æ®µä¿¡å¿µ**
- **Route B (MoE) éªŒè¯é€šè¿‡**ï¼šÏ=0.805 â‰¥ 0.70 â†’ å¯è¿›å…¥ç”Ÿäº§åŒ–é˜¶æ®µ
- **ç†è®º headroom å¤§**ï¼š5D ceiling=0.87, å½“å‰æœ€ä½³=0.57, Gap=30% â†’ ç»§ç»­æŠ•æ¨¡å‹å€¼å¾—
- **åˆ†å±‚å†³ç­–æ˜¯å…³é”®**ï¼šå…¨å±€ RÂ² æ©ç›–åŒºåŸŸå·®å¼‚ï¼Œå¿…é¡»æŒ‰ mag/SNR åˆ†æ¡¶è¯„ä¼°

**ğŸ‘£ ä¸‹ä¸€æ­¥æœ€æœ‰ä»·å€¼**
- ğŸ”´ **P0**ï¼šMLP@1M flux_only â†’ If RÂ² > 0.50 then Route A å¯è¡Œ else Route B ä¸»å¯¼
- ğŸŸ¡ **P1**ï¼šæŒ‰ mag/SNR åˆ†æ¡¶ç”» efficiency å›¾ â†’ å†³å®šé«˜ SNR åŒºæŠ•æ¨¡å‹è¿˜æ˜¯æŠ•ç»“æ„

> **æƒå¨æ•°å­—**ï¼šBest=0.62(Oracle MoE)ï¼›Baseline=0.46(Ridge)ï¼›5D Ceiling=0.87ï¼›Gap=+30%ï¼›æ¡ä»¶=1M/1k/noise=1

| æ¨¡å‹/æ–¹æ³• | RÂ² | é…ç½® | å¤‡æ³¨ |
|-----------|-----|------|------|
| Ridge | **0.46** | Î±=100k, 1M/1k | çº¿æ€§ baseline (canonical) |
| Ridge | **0.4957** | Î±=100k, 1M/10k | çº¿æ€§ baseline (10k test) |
| LightGBM | **0.57** | raw input, 1M/500 | éçº¿æ€§ baseline |
| MLP (100k) | 0.47 | flux_only, 3L_1024 | NN baseline |
| CNN (100k) | 0.41 | flux_only, 4L_k5_bn | NN baseline |
| Oracle MoE | **0.62** | 9-bin çœŸå€¼ routing | ç»“æ„ä¸Šé™ |
| Soft-gate MoE | **0.59** | 37-dim gate | âœ… å¯è½åœ° |
| **Fisher 5D ceiling** | **0.87** | è§„åˆ™ç½‘æ ¼ 5D | ç†è®ºä¸Šé™ |

---

## 1) ğŸŒ² æ ¸å¿ƒå‡è®¾æ ‘

```
ğŸŒ² æ ¸å¿ƒ: noise=1 ä¸‹å¦‚ä½•æå‡ log_g ä¼°è®¡ï¼Ÿ
â”‚
â”œâ”€â”€ Q1: æ•°æ®è§„æ¨¡æ˜¯å¦æ˜¯ç“¶é¢ˆï¼Ÿ
â”‚   â”œâ”€â”€ Q1.1: 100kâ†’1M æå‡å¤šå°‘ï¼Ÿ â†’ âœ… <3%ï¼Œæ•°æ®ä¸æ˜¯ç“¶é¢ˆ
â”‚   â””â”€â”€ Q1.2: ç»§ç»­å †æ•°æ®åˆ’ç®—å—ï¼Ÿ â†’ âŒ ä¸åˆ’ç®—ï¼Œèµ„æºè½¬å‘æ¨¡å‹
â”‚
â”œâ”€â”€ Q2: æ¨¡å‹ç»“æ„æ˜¯å¦æ˜¯ç“¶é¢ˆï¼Ÿ
â”‚   â”œâ”€â”€ Q2.1: Oracle MoE æ¯” Ridge é«˜å¤šå°‘ï¼Ÿ â†’ âœ… +16%ï¼Œç»“æ„çº¢åˆ©æ˜¾è‘—
â”‚   â”œâ”€â”€ Q2.2: Soft-gate èƒ½ä¿ç•™å¤šå°‘ Oracleï¼Ÿ â†’ âœ… 80.5%ï¼Œå¯è½åœ°
â”‚   â””â”€â”€ Q2.3: å•æ¨¡å‹ NN èƒ½åƒ headroom å—ï¼Ÿ â†’ â³ MLP@1M å¾…éªŒè¯
â”‚
â”œâ”€â”€ Q3: ç†è®ºä¸Šé™æ˜¯å¤šå°‘ï¼Ÿ
â”‚   â”œâ”€â”€ Q3.1: Fisher 3D ceilingï¼Ÿ â†’ âœ… RÂ²_max=0.89
â”‚   â”œâ”€â”€ Q3.2: Fisher 5D ceilingï¼Ÿ â†’ âœ… RÂ²_max=0.87ï¼ˆé«˜ SNR å‡ ä¹ç­‰äº 3Dï¼‰
â”‚   â””â”€â”€ Q3.3: ä¸´ç•Œ SNR åœ¨å“ªï¼Ÿ â†’ âœ… SNRâ‰ˆ4 (magâ‰ˆ22)
â”‚
â”œâ”€â”€ Q4: é¢„å¤„ç†ç­–ç•¥å¦‚ä½•é€‰æ‹©ï¼Ÿ
â”‚   â”œâ”€â”€ Q4.1: LightGBM ç”¨ä»€ä¹ˆè¾“å…¥ï¼Ÿ â†’ âœ… raw onlyï¼ˆç¦æ­¢ standardizeï¼‰
â”‚   â”œâ”€â”€ Q4.2: NN ç”¨ä»€ä¹ˆè¾“å…¥ï¼Ÿ â†’ âœ… flux_onlyï¼ˆç¦æ­¢ whiteningï¼‰
â”‚   â””â”€â”€ Q4.3: Ridge ç”¨ä»€ä¹ˆè¾“å…¥ï¼Ÿ â†’ âœ… standardized æˆ– raw å‡å¯
â”‚
â””â”€â”€ Q5: ä¸‹ä¸€æ­¥æŠ•å“ªä¸ªæ–¹å‘ï¼Ÿ
    â”œâ”€â”€ Q5.1: Route A (å•æ¨¡å‹ NN) â†’ â³ MLP@1M å¾…éªŒè¯
    â”œâ”€â”€ Q5.2: Route B (MoE) â†’ âœ… Soft-gate éªŒè¯é€šè¿‡
    â””â”€â”€ Q5.3: Route C (æ”¹ä»»åŠ¡) â†’ â³ ä»… mag>22.5 è€ƒè™‘

Legend: âœ… å·²éªŒè¯ | âŒ å·²å¦å®š | ğŸ”† è¿›è¡Œä¸­ | â³ å¾…éªŒè¯ | ğŸ—‘ï¸ å·²å…³é—­
```

---

## 2) å£å¾„å†»ç»“ï¼ˆå”¯ä¸€æƒå¨ï¼‰

| é¡¹ç›® | è§„æ ¼ |
|------|------|
| Dataset | BOSZ 50000, mag205_225_lowT_1M |
| Train | 1M (5 shards Ã— 200k) |
| **Test** | **1k (test_1k_0, pre-noised)** â† Canonical |
| Features | 4096 (MR arm) |
| Target | log_g âˆˆ [1.0, 5.0] |
| Noise | Ïƒ=1.0 (heteroscedastic Gaussian, pre-stored) |
| Metric | RÂ² over test set |
| Ridge Î± | 100000 (for 1M train) |
| LightGBM input | raw (never standardized) |
| NN input | flux_only (never whitening) |

> è§„åˆ™ï¼šä»»ä½•å£å¾„å˜æ›´å¿…é¡»å†™å…¥ Â§8 å˜æ›´æ—¥å¿—ã€‚

---

## 3) å½“å‰ç­”æ¡ˆ & æˆ˜ç•¥æ¨è

### 3.1 æˆ˜ç•¥æ¨è

- **æ¨èè·¯çº¿ï¼šRoute B (MoE + Structure)**ï¼ˆç†ç”±ï¼šÏ=0.805 éªŒè¯é€šè¿‡ï¼Œå¯è¿›å…¥ç”Ÿäº§åŒ–ï¼‰
- å¤‡é€‰ï¼šRoute A (å•æ¨¡å‹ NN) å¾… MLP@1M éªŒè¯

| Route | ä¸€å¥è¯å®šä½ | å½“å‰å€¾å‘ | å…³é”®ç†ç”± | éœ€è¦çš„ Gate |
|-------|-----------|----------|---------|-------------|
| Route A: å•æ¨¡å‹ NN | ç»§ç»­ CNN/Transformer | ğŸŸ¡ | MLP@1M æœªæµ‹ | Gate-MLP-1M |
| **Route B: MoE** | Soft-gate MoE | ğŸŸ¢ æ¨è | Ï=0.805 â‰¥ 0.70 âœ… | - |
| Route C: æ”¹ä»»åŠ¡ | åˆ†ç±»/å…ˆéªŒ/å¤šæ›å…‰ | ğŸ”´ | ä»… mag>22.5 è€ƒè™‘ | - |

### 3.2 åˆ†æ”¯ç­”æ¡ˆè¡¨

| åˆ†æ”¯ | å½“å‰ç­”æ¡ˆ | ç½®ä¿¡åº¦ | å†³ç­–å«ä¹‰ | è¯æ® |
|------|---------|--------|---------|------|
| Q1: æ•°æ®è§„æ¨¡ | 100kâ†’1M å¢ç›Š <3% | ğŸŸ¢ | åœæ­¢å †æ•°æ® | ml-ceiling |
| Q2: ç»“æ„çº¢åˆ© | Oracle MoE +16%, Soft ä¿ç•™ 80.5% | ğŸŸ¢ | MoE ä¸»çº¿ | oracle-moe, soft-moe |
| Q3: ç†è®ºä¸Šé™ | 5D ceiling=0.87, Gap=30% | ğŸŸ¢ | ç»§ç»­æŠ•å…¥å€¼å¾— | Fisher Hub |
| Q4: é¢„å¤„ç† | LightGBM=raw, NN=flux_only | ğŸŸ¢ | æŒ‰æ¨¡å‹å®šåˆ¶ | whitening å®éªŒ |
| Q5: ä¸‹ä¸€æ­¥ | Route B éªŒè¯é€šè¿‡ | ğŸŸ¢ | MoE ç”Ÿäº§åŒ– | soft-moe |

---

## 4) æ´è§æ±‡åˆï¼ˆå¤šå®éªŒ â†’ å…±è¯†ï¼‰

| # | æ´è§ | è§‚å¯Ÿ | è§£é‡Š | å†³ç­–å½±å“ | è¯æ® |
|---|------|------|------|---------|------|
| I1 | æ•°æ®ä¸æ˜¯ç“¶é¢ˆ | 100kâ†’1M ä»… +2-3% | å…¨å±€æ¨¡å‹è¢«è·¨åŸŸå¼‚è´¨æ€§æ‹–ç´¯ | èµ„æºè½¬å‘æ¨¡å‹/ç»“æ„ | ml-ceiling |
| I2 | ç†è®ºä¸Šé™é«˜ | 5D ceiling=0.87 >> LightGBM=0.57 | ä»»åŠ¡æœªè¢«å™ªå£°å°æ­» | ç»§ç»­æŠ•å…¥ CNN/MoE | Fisher Hub |
| I3 | ç»“æ„çº¢åˆ©æ˜¾è‘— | Oracle MoE +16% vs Ridge | åˆ†åŸŸé™ä½æœ‰æ•ˆå¤æ‚åº¦ | MoE æ˜¯ä¸»çº¿ | oracle-moe |
| I4 | Gate å¯è½åœ° | 9-class Acc=88% @ noise=1 | Gate ç‰¹å¾å¯åŒºåˆ† bins | MoE ä¸»è¦é£é™©æ¶ˆé™¤ | gate-sanity |
| I5 | Pipeline ä¸ä¸­æ€§ | LightGBM standardize -36% | æ ‘æ¨¡å‹å¯¹åˆ†å¸ƒæ•æ„Ÿ | æŒ‰æ¨¡å‹å®šåˆ¶è¾“å…¥ | whitening |
| I6 | 5Dâ‰ˆ3D @ é«˜ SNR | Î”ceiling <2% @ magâ‰¤21.5 | åŒ–å­¦ä¸°åº¦å½±å“æœ‰é™ | ç”¨ 5D ceiling ä½œ upper bound | Fisher 5D |
| I7 | åˆ†å±‚è¯„ä¼°æ˜¯å…³é”® | RÂ²_max ä» 0.99â†’0 é˜¶æ¢¯ä¸‹é™ | å…¨å±€ RÂ² æ©ç›–åŒºåŸŸå·®å¼‚ | æŒ‰ mag/SNR åˆ†æ¡¶ | Multi-Mag |

---

## 5) å†³ç­–ç©ºç™½ï¼ˆDecision Gapsï¼‰

| DG | æˆ‘ä»¬ç¼ºçš„ç­”æ¡ˆ | ä¸ºä»€ä¹ˆé‡è¦ | ä»€ä¹ˆç»“æœèƒ½å…³é—­å®ƒ | å†³ç­–è§„åˆ™ |
|----|-------------|-----------|-----------------|---------|
| DG1 | MLP@1M flux_only æ€§èƒ½ | å†³å®š Route A æ˜¯å¦å¯è¡Œ | RÂ² ç»“æœ | If >0.50 â†’ A å¯è¡Œï¼›If â‰ˆ0.47 â†’ A é¥±å’Œ |
| DG2 | æŒ‰ mag/SNR åˆ†æ¡¶çš„ efficiency | å†³å®šé«˜ SNR åŒºæŠ•æ¨¡å‹è¿˜æ˜¯ç»“æ„ | efficiency å›¾ | If <80%@é«˜SNR â†’ æŠ•æ¨¡å‹ï¼›Else â†’ æŠ•ç»“æ„ |
| DG3 | Weighted loss èƒ½æå‡å¤šå°‘ | å†³å®šè¯¯å·®æ˜¯å¦æ˜¯ç“¶é¢ˆ | CNN/MLP â‰¥ Ridge | If æ˜¾è‘—æå‡ â†’ è¯¯å·®æ˜¯ç“¶é¢ˆ |

---

## 6) è®¾è®¡åŸåˆ™

### 6.1 å·²ç¡®è®¤åŸåˆ™

| # | åŸåˆ™ | å»ºè®® | é€‚ç”¨èŒƒå›´ | è¯æ® |
|---|------|------|---------|------|
| P1 | Ridge Î± åº”æ›´å¤§ | Î± âˆˆ [1e4, 1e5] | noise=1, 1M | ridge-alpha |
| P2 | LightGBM å¿…é¡»ç”¨ raw | âŒ ç¦æ­¢ StandardScaler | æ‰€æœ‰ LightGBM | whitening |
| P3 | NN å¿…é¡»ç”¨ flux_only | âŒ ç¦æ­¢ whitening | æ‰€æœ‰ NN | nn-baseline |
| P4 | é«˜å™ªå£°ä¼˜å…ˆåˆ†åŸŸ | MoE/åˆ†åŸŸæ¯”å †æ•°æ®åˆ’ç®— | noiseâ‰¥1 | oracle-moe |
| P5 | Gate ç‰¹å¾ PCA+ç‰©ç†çª—å£ | 37 ç»´è¶³å¤Ÿ | MoE routing | gate-sanity |
| P6 | Test ç”¨ pre-noised | âŒ ç¦æ­¢ on-fly åŠ å™ª | æ‰€æœ‰å®éªŒ | Canonical |
| P7 | è®ºæ–‡ç”¨ 5D ceiling | é«˜ SNR åŒº 5Dâ‰ˆ3D | ç†è®ºåˆ†æ | Fisher 5D |

### 6.2 å¾…éªŒè¯åŸåˆ™

| # | åŸåˆ™ | åˆæ­¥å»ºè®® | éœ€è¦éªŒè¯ |
|---|------|---------|---------|
| P8 | Weighted loss æœ‰å¸®åŠ© | å¾…éªŒè¯ | MVP-WGT |
| P9 | MLP å—ç›Šäº 1M è§„æ¨¡ | å¾…éªŒè¯ | MVP-MLP-1M |

### 6.3 å…³é”®æ•°å­—é€ŸæŸ¥

| æŒ‡æ ‡ | å€¼ | æ¡ä»¶ | æ¥æº |
|------|-----|------|------|
| Ridge RÂ² | **0.46** | 1M/1k, Î±=100k | oracle-moe (canonical) |
| Ridge RÂ² (10k test) | **0.4957** | 1M/10k, Î±=100k | card_ridge_1m_optimal |
| LightGBM RÂ² | **0.57** | 1M/500, raw | ml-ceiling |
| Oracle MoE RÂ² | **0.62** | 1M/1k, 9-bin | oracle-moe |
| Soft-gate MoE RÂ² | **0.59** | 1M/1k, Ï=0.805 | soft-moe |
| **5D ceiling** | **0.87** | mag=21.5, è§„åˆ™ç½‘æ ¼ | Fisher 5D |
| 3D ceiling | 0.89 | mag=21.5, è§„åˆ™ç½‘æ ¼ | Fisher V2 |
| ä¸´ç•Œ SNR | **~4** | RÂ²_max>0.5 è¾¹ç•Œ | Multi-Mag |
| ä¿¡æ¯æ‚¬å´– | **SNR<2** | median=0 | Multi-Mag |
| MoE ç»“æ„çº¢åˆ© | **+16%** | Oracle vs Ridge | oracle-moe |

### 6.4 å·²å…³é—­æ–¹å‘

| æ–¹å‘ | å¦å®šè¯æ® | å…³é—­åŸå›  | æ•™è®­ |
|------|---------|---------|------|
| ~~ç»§ç»­å †æ•°æ®~~ | 100kâ†’1M +3% | è¾¹é™…æ”¶ç›Šå¤ªå° | è½¬å‘æ¨¡å‹/ç»“æ„ |
| ~~LightGBM standardize~~ | -36% | æ ‘æ¨¡å‹å¯¹åˆ†å¸ƒæ•æ„Ÿ | å¿…é¡» raw input |
| ~~NN whitening~~ | RÂ²â‰ˆ0 | æ¢¯åº¦ä¸ç¨³å®š | å¿…é¡» flux_only |
| ~~Fisher V1 è¿ç»­é‡‡æ ·~~ | CRLB 20 orders | åå¯¼æ··å‚ | å¿…é¡»è§„åˆ™ç½‘æ ¼ |

---

## 7) æŒ‡é’ˆ

| ç±»å‹ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| ğŸ—ºï¸ Roadmap | [`scaling_roadmap_20251222.md`](./scaling_roadmap_20251222.md) | å®éªŒè§„åˆ’ä¸æ‰§è¡Œ |
| ğŸ§  **Fisher Hub** | [`fisher_hub_20251225.md`](./fisher_hub_20251225.md) | Fisher/CRLB ç†è®ºä¸Šé™ä¸“é¢˜ |
| ğŸ“— Experiments | `exp/*.md` | è¯¦ç»†å®éªŒæŠ¥å‘Š |
| ğŸ” Audit | [`contradiction_audit.md`](./contradiction_audit.md) | çŸ›ç›¾å®¡è®¡ |
| ğŸ“¥ Child Hubs | [`ridge_hub`](../ridge/ridge_hub_20251223.md), [`moe_hub`](../moe/moe_hub_20251203.md) | å­ä¸»é¢˜æ·±æ½œ |

---

## 8) å˜æ›´æ—¥å¿—

| æ—¥æœŸ | å˜æ›´ | å½±å“ |
|------|------|------|
| 2025-12-22 | åˆ›å»º Hub | - |
| 2025-12-24 | Hub v2 é‡æ„ | ç²¾ç®€å‡è®¾â†’ç»“è®ºè´¦æœ¬ |
| 2025-12-25 | C10 Soft-gate MoE Ï=0.805 éªŒè¯ | MoE è·¯çº¿ç¡®è®¤ |
| 2025-12-25 | æ–°å¢è®¾è®¡åŸåˆ™ P7: NN å¿…é¡» flux_only | æ‰€æœ‰ NN å®éªŒå¿…é¡»éµå®ˆ |
| 2025-12-26 | Fisher 5D Multi-Mag å®Œæˆ | 5D ceiling æ˜¯çœŸæ­£ upper bound |
| **2025-12-27** | **Hub v3 Audited + åˆå¹¶** | çŸ›ç›¾æ¶ˆé™¤ï¼Œåè®®æ ‡å‡†åŒ–ï¼Œ5D ceiling é›†æˆ |
| **2025-12-27** | **æ›´æ–° Ridge 1M 10k test ç»“æœ**ï¼šRÂ²=0.4957 (test=10k) vs 0.46 (test=1k canonical) | Â§0, Â§6.3 |

---

<details>
<summary><b>é™„å½•ï¼šCanonical Scoreboard History</b></summary>

### A. Test Size æ¼”å˜

| æ—¥æœŸ | test size | Ridge RÂ² | Notes |
|------|-----------|----------|-------|
| 2025-12-22 | 500 | 0.50 | æ—§å£å¾„ (deprecated) |
| 2025-12-24 | **1k** | **0.46** | å½“å‰ canonical |
| 2025-12-27 | **10k** | **0.4957** | æ›´ç¨³å®šä¼°è®¡ (è¡¥å……) |

### B. Multi-Magnitude Fisher

| Mag | SNR | 5D RÂ²_max | 3D RÂ²_max | Î” (%) |
|-----|-----|-----------|-----------|-------|
| 18.0 | 87.4 | 0.9993 | 0.9994 | -0.01% |
| 20.0 | 24.0 | 0.9892 | 0.9906 | -0.14% |
| **21.5** | 7.1 | **0.8742** | 0.8914 | -1.93% |
| 22.0 | 4.6 | 0.6983 | 0.7396 | -5.58% |
| 22.5 | 3.0 | 0.2647 | 0.3658 | -27.65% |
| 23.0 | 1.9 | 0.0000 | 0.0000 | N/A |

### C. å…³é”®é˜ˆå€¼

| SNR é˜ˆå€¼ | Magnitude | RÂ²_max | çŠ¶æ€ |
|----------|-----------|--------|------|
| SNR > 20 | mag â‰¤ 20 | > 0.99 | âœ… è¿‘ä¹å®Œç¾ |
| **SNR â‰ˆ 4** | **mag â‰ˆ 22** | **0.70** | âš ï¸ ä¸´ç•Œç‚¹ |
| SNR < 2 | mag > 23 | 0.00 | âŒ ä¿¡æ¯æ‚¬å´– |

</details>

---

*Audited: 2025-12-27 | Source: contradiction_audit.md*
