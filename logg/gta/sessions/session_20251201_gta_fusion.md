# ğŸ’¬ GPT è®¾è®¡ä¼šè¯å½’æ¡£ - GTA Phase 4 åŒå¡”èåˆ

---
> **ä¼šè¯ IDï¼š** `session-20251201-gta-fusion`  
> **æ—¥æœŸï¼š** 2025-12-01  
> **å‚ä¸ï¼š** Viska + Claude  
> **å…³è” mainï¼š** [logg/gta/gta_main_20251130.md](../gta_main_20251130.md)  
> **çŠ¶æ€ï¼š** âœ… å·²å½’æ¡£åˆ° kanban

---

# ğŸ“‘ ç›®å½•

- [1. ğŸ¯ èµ·ç‚¹ï¼šé—®é¢˜ & åŠ¨æœº](#1--èµ·ç‚¹é—®é¢˜--åŠ¨æœº)
- [2. ğŸ’¡ MVP å€™é€‰åˆ—è¡¨](#2--mvp-å€™é€‰åˆ—è¡¨)
- [3. âœ… é€‰æ‹©è¦æ‰§è¡Œçš„å®éªŒ](#3--é€‰æ‹©è¦æ‰§è¡Œçš„å®éªŒ)
- [4. ğŸ“ Prompt è‰ç¨¿åŒº](#4--prompt-è‰ç¨¿åŒº)
- [5. ğŸ“‹ ä¼šè¯å TODO](#5--ä¼šè¯å-todo)

---

# 1. ğŸ¯ èµ·ç‚¹ï¼šé—®é¢˜ & åŠ¨æœº

## 1.1 åŸå§‹åŠ¨æœº

> **ä¸ºä»€ä¹ˆä»Šå¤©åœ¨æƒ³è¿™ä¸ªé—®é¢˜ï¼Ÿ**

- **èƒŒæ™¯**ï¼šGTA Phase 1-3 å·²å®Œæˆï¼ŒGlobal Tower ($R^2$=0.9588) å’Œ Local Tower ($R^2$=0.9313) å•ç‹¬è¡¨ç°éƒ½å¾ˆå¥½
- **é—®é¢˜**ï¼šnoise=1.0 ä¸‹ Global Feature è¡¨ç°ä¸‹é™åˆ° $R^2$=0.4883ï¼Œéœ€è¦å¢å¼º
- **ç›®æ ‡**ï¼šæ¢ç´¢ Global + Local åŒå¡”èåˆï¼Œä»¥åŠåŠ å…¥ Latent ç‰¹å¾

## 1.2 GPT å¯¹è¯ä¸­çš„å…³é”®æ‘˜å½•

### ğŸ’ å…³é”®æ´è§ 1

> "Global Tower æ•è·å…¨å±€ç»Ÿè®¡ç‰¹å¾ï¼ˆPCAã€Ridge predictionï¼‰ï¼ŒLocal Tower æ•è·å±€éƒ¨å…‰è°±ç»†èŠ‚ï¼ˆTop-K çª—å£ï¼‰ï¼Œä¸¤è€…ä¿¡æ¯äº’è¡¥ã€‚"

**å¯å‘**ï¼šèåˆç­–ç•¥åº”è¯¥ä¿ç•™ä¸¤ä¸ª tower çš„ç‹¬ç«‹è¡¨å¾èƒ½åŠ›ï¼Œè€Œä¸æ˜¯ç®€å• concat

### ğŸ’ å…³é”®æ´è§ 2

> "noise=1.0 ä¸‹æ€§èƒ½ä¸‹é™ä¸»è¦æ˜¯å› ä¸º PCA åˆ†é‡è¢«å™ªå£°æ±¡æŸ“ï¼Œå¯ä»¥å°è¯•å¼•å…¥ BlindSpot Latent ä½œä¸ºæ›´é²æ£’çš„ç‰¹å¾æ¥æºã€‚"

**å¯å‘**ï¼šLatent ç‰¹å¾å¯èƒ½æ¯” PCA æ›´æŠ—å™ª

### âš ï¸ éœ€è¦è­¦æƒ•çš„å‡è®¾

> "åŒå¡”èåˆä¸€å®šæ¯”å•å¡”å¥½"

**é£é™©**ï¼šå¦‚æœä¸¤ä¸ª tower å­¦åˆ°çš„ä¿¡æ¯é«˜åº¦é‡å ï¼Œèåˆå¯èƒ½å¸¦æ¥è´Ÿå¢ç›Šã€‚éœ€è¦å…ˆéªŒè¯ä¿¡æ¯äº’è¡¥æ€§ã€‚

---

# 2. ğŸ’¡ MVP å€™é€‰åˆ—è¡¨

> ä»å¯¹è¯ä¸­ç»“æ„åŒ–å‡ºçš„å®éªŒå€™é€‰

| MVP ID | ä¸€å¥è¯ç›®æ ‡ | è¦éªŒè¯çš„å‡è®¾/é—®é¢˜ | ç²—ç•¥å®éªŒæƒ³æ³• | é¢„ä¼°å¤æ‚åº¦ |
|--------|------------|-------------------|--------------|-----------|
| MVP-Fusion-1 | Global + Local concat èåˆ | åŒå¡”ä¿¡æ¯äº’è¡¥ï¼Ÿ | ç®€å• concat + MLP | ğŸŸ¢ ç®€å• |
| MVP-Fusion-2 | FiLM æ¡ä»¶èåˆ | Global è°ƒåˆ¶ Localï¼Ÿ | FiLM layer | ğŸŸ¡ ä¸­ç­‰ |
| MVP-Fusion-3 | Cross-attention èåˆ | åŒå‘ä¿¡æ¯äº¤äº’ï¼Ÿ | Transformer | ğŸ”´ å¤æ‚ |
| MVP-Latent-1 | åŠ å…¥ BlindSpot Latent | Latent æ›´æŠ—å™ªï¼Ÿ | Latent æ›¿æ¢/è¡¥å…… PCA | ğŸŸ¢ ç®€å• |

### MVP è¯¦ç»†è¯´æ˜

#### MVP-Fusion-1ï¼šGlobal + Local Concat

**ç›®æ ‡**ï¼šéªŒè¯æœ€ç®€å•çš„åŒå¡”èåˆç­–ç•¥

**å‡è®¾**ï¼š
- H1: Global å’Œ Local ä¿¡æ¯äº’è¡¥
- H2: ç®€å• concat å³å¯æå‡æ€§èƒ½

**å®éªŒè®¾è®¡è‰æ¡ˆ**ï¼š
- æ•°æ®ï¼šnoise=0.1, 0.5, 1.0
- æ¨¡å‹ï¼šGlobal MLP (126â†’64) + Local CNN (K=256â†’64) â†’ concat â†’ MLP â†’ output
- æŒ‡æ ‡ï¼šTest $R^2$
- æˆåŠŸæ ‡å‡†ï¼š$R^2$ > max(Global-only, Local-only)

**é¢„æœŸç»“æœ**ï¼š
| æƒ…å†µ | é¢„æœŸ | è¯´æ˜ |
|------|------|------|
| æ­£å¸¸ | $R^2$ æå‡ 5-10% | ä¿¡æ¯äº’è¡¥æœ‰æ•ˆ |
| å¼‚å¸¸ A | $R^2$ æ— æå‡ | ä¿¡æ¯å†—ä½™ï¼Œéœ€è¦æ›´å¤æ‚èåˆ |
| å¼‚å¸¸ B | $R^2$ ä¸‹é™ | è®­ç»ƒä¸ç¨³å®šï¼Œæ£€æŸ¥ loss å¹³è¡¡ |

#### MVP-Latent-1ï¼šBlindSpot Latent ç‰¹å¾

**ç›®æ ‡**ï¼šæµ‹è¯• Latent æ›¿ä»£/è¡¥å…… PCA

**å‡è®¾**ï¼š
- H1: Latent æ¯” PCA æ›´æŠ—å™ª
- H2: Latent + å…¶ä»–ç‰¹å¾å¯æå‡ noise=1.0 æ€§èƒ½

**å®éªŒè®¾è®¡è‰æ¡ˆ**ï¼š
- æ•°æ®ï¼šnoise=1.0
- æ¨¡å‹ï¼šç”¨ BlindSpot encoder æå– Latentï¼Œæ›¿æ¢ PCA åˆ†é‡
- æŒ‡æ ‡ï¼šTest $R^2$
- æˆåŠŸæ ‡å‡†ï¼š$R^2$ > 0.50 @ noise=1.0

---

# 3. âœ… é€‰æ‹©è¦æ‰§è¡Œçš„å®éªŒ

## 3.1 æœ¬è½®å†³ç­–

| å†³ç­– | MVP | ç†ç”± |
|------|-----|------|
| âœ… **ç«‹åˆ»æ’é˜Ÿ** | MVP-Fusion-1 | æœ€ç®€å•çš„ baselineï¼Œå…ˆéªŒè¯ä¿¡æ¯äº’è¡¥ |
| âœ… **ç«‹åˆ»æ’é˜Ÿ** | MVP-Latent-1 | è§£å†³ noise=1.0 é—®é¢˜çš„å…³é”®å°è¯• |
| ğŸ•’ **ä»¥åå†è¯´** | MVP-Fusion-2 | ç­‰ concat æ•ˆæœç¡®è®¤åå†å°è¯• |
| ğŸ•’ **ä»¥åå†è¯´** | MVP-Fusion-3 | å¤æ‚åº¦å¤ªé«˜ï¼Œå…ˆéªŒè¯ç®€å•æ–¹æ³• |

## 3.2 ç”Ÿæˆ experiment_id

> å°†é€‰ä¸­çš„ MVP è½¬ä¸ºå…·ä½“çš„ experiment_idï¼Œå¤åˆ¶åˆ° `status/kanban.md`

| experiment_id | MVP | ä¼˜å…ˆçº§ | é¢„ä¼°æ—¶é—´ | å¤‡æ³¨ |
|---------------|-----|--------|---------|------|
| `VIT-20251201-gta-fusion-01` | MVP-Fusion-1 | ğŸ”´ P0 | ~3h | concat baseline |
| `BS-20251201-latent-gta-01` | MVP-Latent-1 | ğŸ”´ P0 | ~2h | latent æå– |

---

# 4. ğŸ“ Prompt è‰ç¨¿åŒº

## 4.1 é€šç”¨ System Prompt ç‰‡æ®µ

```text
ä½ æ˜¯æˆ‘çš„å®éªŒåŠ©ç†ï¼Œè´Ÿè´£æ ¹æ®ç»™å®šçš„ MVP è¯´æ˜ï¼Œåœ¨ VIT ä»“åº“ä¸­é…ç½®å¹¶è¿è¡Œå®éªŒã€‚

ä½ è¦åšçš„äº‹åŒ…æ‹¬ï¼š
1) æ ¹æ®é…ç½®è·¯å¾„ç”Ÿæˆ/ä¿®æ”¹ yaml
2) ç”Ÿæˆè®­ç»ƒè„šæœ¬è°ƒç”¨å‘½ä»¤
3) è¾“å‡ºæ¸…æ™°çš„å®éªŒæ—¥å¿—å’Œç»“æœè·¯å¾„

ä»“åº“è·¯å¾„ï¼š~/VIT
Config æ¨¡ç‰ˆï¼šconfigs/gta/global_tower.yaml
```

## 4.2 é’ˆå¯¹å…·ä½“ experiment_id çš„ Prompt

### Prompt for `VIT-20251201-gta-fusion-01`

```text
å®éªŒ ID: VIT-20251201-gta-fusion-01
MVP: Global + Local Concat èåˆ
ä»“åº“: ~/VIT
config æ¨¡ç‰ˆ: configs/gta/global_tower.yaml

ç›®æ ‡ï¼šå®ç°åŒå¡”èåˆæ¨¡å‹
- Global Tower: 126ç»´è¾“å…¥ â†’ MLP â†’ 64ç»´
- Local Tower: K=256 Top-K çª—å£ â†’ CNN â†’ 64ç»´
- èåˆ: concat(global_feat, local_feat) â†’ MLP(128â†’32â†’1)

è¯·ï¼š
1. åˆ›å»º configs/exp/VIT-20251201-gta-fusion-01.yaml
2. ä¿®æ”¹æ¨¡å‹æ¶æ„æ”¯æŒåŒå¡”è¾“å…¥
3. è®­ç»ƒå‘½ä»¤ï¼Œnoise=[0.1, 0.5, 1.0] ä¸‰ä¸ªç‰ˆæœ¬
4. è®­ç»ƒå®Œæˆåæ‰“å°ï¼š
   - å„ noise çº§åˆ«çš„ Test RÂ²ã€MAE
   - ä¸å•å¡”å¯¹æ¯”çš„æå‡å¹…åº¦
```

### Prompt for `BS-20251201-latent-gta-01`

```text
å®éªŒ ID: BS-20251201-latent-gta-01
MVP: BlindSpot Latent ç‰¹å¾æå–
ä»“åº“: ~/BlindSpotDenoiser

ç›®æ ‡ï¼šæå– Latent ç‰¹å¾ç”¨äº GTA
1. ç”¨è®­ç»ƒå¥½çš„ BlindSpot encoder å¤„ç†å…‰è°±
2. æå– Latent å‘é‡ (é¢„è®¡ ~64ç»´)
3. ä¿å­˜ä¸º .npy æˆ– .pt æ–‡ä»¶
4. æµ‹è¯• Latent ç‰¹å¾çš„ linear probe $R^2$

è¾“å‡ºï¼š
- latent_train.npy, latent_test.npy
- Linear probe RÂ² (ä¸ PCA-96 å¯¹æ¯”)
```

---

# 5. ğŸ“‹ ä¼šè¯å TODO

## 5.1 ç«‹å³æ‰§è¡Œ

- [x] æŠŠ Â§3.2 çš„ experiment_id å¡«å…¥ `status/kanban.md` çš„ã€ŒTODO - å¾…è·‘å®éªŒã€
- [ ] å¦‚æœæœ‰æ–° MVPï¼Œæ›´æ–°å¯¹åº”çš„ `gta_main.md` Â§2 MVP è·¯çº¿å›¾
- [x] åœ¨ `status/next_steps.md` è®¾ç½®ä»Šå¤©/æ˜å¤©è¦è·‘çš„ P0 å®éªŒ

## 5.2 å®éªŒå®Œæˆå

- [ ] ä» kanban çš„ã€ŒTODOã€ç§»åˆ°ã€ŒRunningã€ï¼Œè¡¥ä¸Šè¿è¡Œè·¯å¾„
- [ ] å®éªŒç»“æŸåç§»åˆ°ã€ŒDoneã€ï¼Œå‡†å¤‡å†™ exp.md

## 5.3 å½’æ¡£æ£€æŸ¥

| æ£€æŸ¥é¡¹ | çŠ¶æ€ |
|--------|------|
| experiment_id å·²å¡«å…¥ kanban | âœ… |
| main.md å·²æ›´æ–°ï¼ˆå¦‚æœ‰æ–° MVPï¼‰ | â¬œ |
| next_steps.md å·²è®¾ç½®ä¼˜å…ˆçº§ | âœ… |

---

# ğŸ“ ä¼šè¯å…ƒæ•°æ®

| å­—æ®µ | å€¼ |
|------|-----|
| **GPT æ¨¡å‹** | Claude-3.5 Sonnet |
| **å¯¹è¯è½®æ•°** | ~5 è½® |
| **ä¼šè¯ä¸»é¢˜æ ‡ç­¾** | `#gta` `#fusion` `#latent` |

---

*åˆ›å»ºæ—¶é—´: 2025-12-01*

